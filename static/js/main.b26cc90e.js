/*! For license information please see main.b26cc90e.js.LICENSE.txt */
(()=>{"use strict";var t={43:(t,e,n)=>{t.exports=n(202)},153:(t,e,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:s,_owner:o.current}}e.jsx=c,e.jsxs=c},202:(t,e)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,i){var r,s={},a=null,o=null;if(null!=e)for(r in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)x.call(e,r)&&!A.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:a,ref:o,props:s,_owner:k.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function M(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function T(t,e,r,s,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=t),t=""===s?"."+M(l,0):s,_(a)?(r="",null!=t&&(r=t.replace(C,"$&/")+"/"),T(a,e,r,"",function(t){return t})):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+t)),e.push(a)),1;if(l=0,s=""===s?".":s+":",_(t))for(var c=0;c<t.length;c++){var u=s+M(o=t[c],c);l+=T(o,e,r,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(o=t.next()).done;)l+=T(o=o.value,e,r,u=s+M(o,c++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var i=[],r=0;return T(t,i,"","",function(t){return e.call(n,t,r++)}),i}function R(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var D={current:null},L={transition:null},N={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};function I(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:P,forEach:function(t,e,n){P(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return P(t,function(){e++}),e},toArray:function(t){return P(t,function(t){return t})||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,e.act=I,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=k.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!A.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:a,props:r,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:R}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=I,e.useCallback=function(t,e){return D.current.useCallback(t,e)},e.useContext=function(t){return D.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return D.current.useDeferredValue(t)},e.useEffect=function(t,e){return D.current.useEffect(t,e)},e.useId=function(){return D.current.useId()},e.useImperativeHandle=function(t,e,n){return D.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return D.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return D.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return D.current.useMemo(t,e)},e.useReducer=function(t,e,n){return D.current.useReducer(t,e,n)},e.useRef=function(t){return D.current.useRef(t)},e.useState=function(t){return D.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return D.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return D.current.useTransition()},e.version="18.3.1"},234:(t,e)=>{function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function _(t){if(m=!1,w(t),!g)if(null!==i(c))g=!0,L(x);else{var e=i(u);null!==e&&N(_,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,y(E),E=-1),f=!0;var s=p;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!T());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&N(_,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,A=!1,S=null,E=-1,C=5,M=-1;function T(){return!(e.unstable_now()-M<C)}function P(){if(null!==S){var t=e.unstable_now();M=t;var n=!0;try{n=S(!0,t)}finally{n?k():(A=!1,S=null)}}else A=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,k=function(){D.postMessage(null)}}else k=function(){v(P,0)};function L(t){S=t,A||(A=!0,k())}function N(t,n){E=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,L(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(m?(y(E),E=-1):m=!0,N(_,s-a))):(t.sortIndex=o,n(c,t),g||f||(g=!0,L(x))),t},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},391:(t,e,n)=>{var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},440:t=>{var e=function(){};t.exports=e},579:(t,e,n)=>{t.exports=n(153)},730:(t,e,n)=>{var i=n(43),r=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(t,e,n,i,r,s,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){m[t]=new g(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){m[t]=new g(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){m[t]=new g(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){m[t]=new g(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){m[t]=new g(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)});var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function I(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=N&&t[N]||t["@@iterator"])?t:null}var F,O=Object.assign;function B(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var W=!1;function j(t,e){if(!t||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(hn){var i=hn}Reflect.construct(t,[],e)}else{try{e.call()}catch(hn){i=hn}t.call(e.prototype)}else{try{throw Error()}catch(hn){i=hn}t()}}catch(hn){if(hn&&i&&"string"===typeof hn.stack){for(var r=hn.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{W=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?B(t):""}function z(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case x:return"Portal";case S:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case R:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case D:e=t._payload,t=t._init;try{return U(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=G(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return O({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Q(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=V(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){$(t,e);var n=V(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+V(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return O({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:V(n)}}function st(t,e){var n=V(e.value),i=V(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return ut(t,e)})}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(pt).forEach(function(t){ft.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]})});var vt=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function _t(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,kt=null,At=null;function St(t){if(t=xr(t)){if("function"!==typeof xt)throw Error(s(280));var e=t.stateNode;e&&(e=Ar(e),xt(t.stateNode,t.type,e))}}function Et(t){kt?At?At.push(t):At=[t]:kt=t}function Ct(){if(kt){var t=kt,e=At;if(At=kt=null,St(t),e)for(t=0;t<e.length;t++)St(e[t])}}function Mt(t,e){return t(e)}function Tt(){}var Pt=!1;function Rt(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return Mt(t,e,n)}finally{Pt=!1,(null!==kt||null!==At)&&(Tt(),Ct())}}function Dt(t,e){var n=t.stateNode;if(null===n)return null;var i=Ar(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Lt=!1;if(u)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch(ut){Lt=!1}function It(t,e,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ft=!1,Ot=null,Bt=!1,Wt=null,jt={onError:function(t){Ft=!0,Ot=t}};function zt(t,e,n,i,r,s,a,o,l){Ft=!1,Ot=null,It.apply(jt,arguments)}function Ut(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Vt(t){if(Ut(t)!==t)throw Error(s(188))}function Gt(t){return t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Vt(r),t;if(a===i)return Vt(r),e;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),null!==t?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=r.unstable_scheduleCallback,Yt=r.unstable_cancelCallback,Kt=r.unstable_shouldYield,Qt=r.unstable_requestPaint,$t=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=he(o):0!==(s&=a)&&(i=he(s))}else 0!==(a=n&~r)?i=he(a):0!==s&&(i=he(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-ae(e)),i|=t[n],e&=~r;return i}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ae(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function we(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var _e,xe,ke,Ae,Se,Ee=!1,Ce=[],Me=null,Te=null,Pe=null,Re=new Map,De=new Map,Le=[],Ne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ie(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Te=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Re.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":De.delete(e.pointerId)}}function Fe(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=xr(e))&&xe(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Oe(t){var e=_r(t.target);if(null!==e){var n=Ut(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Se(t.priority,function(){ke(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Be(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=xr(n))&&xe(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);wt=i,n.target.dispatchEvent(i),wt=null,e.shift()}return!0}function We(t,e,n){Be(t)&&n.delete(e)}function je(){Ee=!1,null!==Me&&Be(Me)&&(Me=null),null!==Te&&Be(Te)&&(Te=null),null!==Pe&&Be(Pe)&&(Pe=null),Re.forEach(We),De.forEach(We)}function ze(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,je)))}function Ue(t){function e(e){return ze(e,t)}if(0<Ce.length){ze(Ce[0],t);for(var n=1;n<Ce.length;n++){var i=Ce[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Me&&ze(Me,t),null!==Te&&ze(Te,t),null!==Pe&&ze(Pe,t),Re.forEach(e),De.forEach(e),n=0;n<Le.length;n++)(i=Le[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)Oe(n),null===n.blockedOn&&Le.shift()}var He=w.ReactCurrentBatchConfig,Ve=!0;function Ge(t,e,n,i){var r=be,s=He.transition;He.transition=null;try{be=1,Xe(t,e,n,i)}finally{be=r,He.transition=s}}function qe(t,e,n,i){var r=be,s=He.transition;He.transition=null;try{be=4,Xe(t,e,n,i)}finally{be=r,He.transition=s}}function Xe(t,e,n,i){if(Ve){var r=Ke(t,e,n,i);if(null===r)Xi(t,e,i,Ye,n),Ie(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Me=Fe(Me,t,e,n,i,r),!0;case"dragenter":return Te=Fe(Te,t,e,n,i,r),!0;case"mouseover":return Pe=Fe(Pe,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Re.set(s,Fe(Re.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,De.set(s,Fe(De.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Ie(t,i),4&e&&-1<Ne.indexOf(t)){for(;null!==r;){var s=xr(r);if(null!==s&&_e(s),null===(s=Ke(t,e,n,i))&&Xi(t,e,i,Ye,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Xi(t,e,i,null,n)}}var Ye=null;function Ke(t,e,n,i){if(Ye=null,null!==(t=_r(t=_t(i))))if(null===(e=Ut(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Je,i=n.length,r="value"in $e?$e.value:$e.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[s-e];e++);return Ze=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),fn=O({},cn,{view:0,detail:0}),gn=sn(fn),mn=O({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,on=t.screenY-ln.screenY):on=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:on}}),vn=sn(mn),yn=sn(O({},mn,{dataTransfer:0})),bn=sn(O({},fn,{relatedTarget:0})),wn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=O({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xn=sn(_n),kn=sn(O({},cn,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function Mn(){return Cn}var Tn=O({},fn,{key:function(t){if(t.key){var e=An[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Pn=sn(Tn),Rn=sn(O({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(O({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Ln=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=O({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),In=sn(Nn),Fn=[9,13,27,32],On=u&&"CompositionEvent"in window,Bn=null;u&&"documentMode"in document&&(Bn=document.documentMode);var Wn=u&&"TextEvent"in window&&!Bn,jn=u&&(!On||Bn&&8<Bn&&11>=Bn),zn=String.fromCharCode(32),Un=!1;function Hn(t,e){switch(t){case"keyup":return-1!==Fn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Gn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!qn[t.type]:"textarea"===e}function Yn(t,e,n,i){Et(i),0<(e=Ki(e,"onChange")).length&&(n=new dn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Kn=null,Qn=null;function $n(t){zi(t,0)}function Jn(t){if(X(kr(t)))return t}function Zn(t,e){if("change"===t)return e}var ti=!1;if(u){var ei;if(u){var ni="oninput"in document;if(!ni){var ii=document.createElement("div");ii.setAttribute("oninput","return;"),ni="function"===typeof ii.oninput}ei=ni}else ei=!1;ti=ei&&(!document.documentMode||9<document.documentMode)}function ri(){Kn&&(Kn.detachEvent("onpropertychange",si),Qn=Kn=null)}function si(t){if("value"===t.propertyName&&Jn(Qn)){var e=[];Yn(e,Qn,t,_t(t)),Rt($n,e)}}function ai(t,e,n){"focusin"===t?(ri(),Qn=n,(Kn=e).attachEvent("onpropertychange",si)):"focusout"===t&&ri()}function oi(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Jn(Qn)}function li(t,e){if("click"===t)return Jn(e)}function ci(t,e){if("input"===t||"change"===t)return Jn(e)}var ui="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function hi(t,e){if(ui(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!ui(t[r],e[r]))return!1}return!0}function di(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pi(t,e){var n,i=di(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=di(i)}}function fi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?fi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function gi(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function mi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function vi(t){var e=gi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fi(n.ownerDocument.documentElement,n)){if(null!==i&&mi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=pi(n,s);var a=pi(n,i);r&&a&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yi=u&&"documentMode"in document&&11>=document.documentMode,bi=null,wi=null,_i=null,xi=!1;function ki(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==bi||bi!==Y(i)||("selectionStart"in(i=bi)&&mi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&hi(_i,i)||(_i=i,0<(i=Ki(wi,"onSelect")).length&&(e=new dn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bi)))}function Ai(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Si={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},Ei={},Ci={};function Mi(t){if(Ei[t])return Ei[t];if(!Si[t])return t;var e,n=Si[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ci)return Ei[t]=n[e];return t}u&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);var Ti=Mi("animationend"),Pi=Mi("animationiteration"),Ri=Mi("animationstart"),Di=Mi("transitionend"),Li=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){Li.set(t,e),l(e,[t])}for(var Fi=0;Fi<Ni.length;Fi++){var Oi=Ni[Fi];Ii(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ii(Ti,"onAnimationEnd"),Ii(Pi,"onAnimationIteration"),Ii(Ri,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Di,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function ji(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,a,o,l,c){if(zt.apply(this,arguments),Ft){if(!Ft)throw Error(s(198));var u=Ot;Ft=!1,Ot=null,Bt||(Bt=!0,Wt=u)}}(i,e,void 0,t),t.currentTarget=null}function zi(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;ji(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;ji(r,o,c),s=l}}}if(Bt)throw t=Wt,Bt=!1,Wt=null,t}function Ui(t,e){var n=e[yr];void 0===n&&(n=e[yr]=new Set);var i=t+"__bubble";n.has(i)||(qi(e,t,2,!1),n.add(i))}function Hi(t,e,n){var i=0;e&&(i|=4),qi(n,t,i,e)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Gi(t){if(!t[Vi]){t[Vi]=!0,a.forEach(function(e){"selectionchange"!==e&&(Wi.has(e)||Hi(e,!1,t),Hi(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Vi]||(e[Vi]=!0,Hi("selectionchange",!1,e))}}function qi(t,e,n,i){switch(Qe(e)){case 1:var r=Ge;break;case 4:r=qe;break;default:r=Xe}n=r.bind(null,e,n,t),r=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Xi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=_r(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue t}o=o.parentNode}}i=i.return}Rt(function(){var i=s,r=_t(n),a=[];t:{var o=Li.get(t);if(void 0!==o){var l=dn,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ti:case Pi:case Ri:l=wn;break;case Di:l=Ln;break;case"scroll":l=gn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Dt(f,d))&&u.push(Yi(f,g,p)))),h)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===wt||!(c=n.relatedTarget||n.fromElement)||!_r(c)&&!c[vr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?_r(c):null)&&(c!==(h=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=vn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Rn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?o:kr(l),p=null==c?o:kr(c),(o=new u(g,f+"leave",l,n,r)).target=h,o.relatedTarget=p,g=null,_r(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,f=0,p=u=l;p;p=Qi(p))f++;for(p=0,g=d;g;g=Qi(g))p++;for(;0<f-p;)u=Qi(u),f--;for(;0<p-f;)d=Qi(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=Qi(u),d=Qi(d)}u=null}else u=null;null!==l&&$i(a,o,l,u,!1),null!==c&&null!==h&&$i(a,h,c,u,!0)}if("select"===(l=(o=i?kr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Zn;else if(Xn(o))if(ti)m=ci;else{m=oi;var v=ai}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=li);switch(m&&(m=m(t,i))?Yn(a,m,n,r):(v&&v(t,o,i),"focusout"===t&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&tt(o,"number",o.value)),v=i?kr(i):window,t){case"focusin":(Xn(v)||"true"===v.contentEditable)&&(bi=v,wi=i,_i=null);break;case"focusout":_i=wi=bi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,ki(a,n,r);break;case"selectionchange":if(yi)break;case"keydown":case"keyup":ki(a,n,r)}var y;if(On)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Gn?Hn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=tn()):(Je="value"in($e=r)?$e.value:$e.textContent,Gn=!0)),0<(v=Ki(i,b)).length&&(b=new kn(b,t,null,n,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Wn?function(t,e){switch(t){case"compositionend":return Vn(e);case"keypress":return 32!==e.which?null:(Un=!0,zn);case"textInput":return(t=e.data)===zn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Gn)return"compositionend"===t||!On&&Hn(t,e)?(t=tn(),Ze=Je=$e=null,Gn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Ki(i,"onBeforeInput")).length&&(r=new kn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}zi(a,e)})}function Yi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ki(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Dt(t,n))&&i.unshift(Yi(t,s,r)),null!=(s=Dt(t,e))&&i.push(Yi(t,s,r))),t=t.return}return i}function Qi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function $i(t,e,n,i,r){for(var s=e._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Dt(n,s))&&a.unshift(Yi(n,l,o)):r||null!=(l=Dt(n,s))&&a.push(Yi(n,l,o))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Ji=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function tr(t){return("string"===typeof t?t:""+t).replace(Ji,"\n").replace(Zi,"")}function er(t,e,n){if(e=tr(e),tr(t)!==e&&n)throw Error(s(425))}function nr(){}var ir=null,rr=null;function sr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,or="function"===typeof clearTimeout?clearTimeout:void 0,lr="function"===typeof Promise?Promise:void 0,cr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof lr?function(t){return lr.resolve(null).then(t).catch(ur)}:ar;function ur(t){setTimeout(function(){throw t})}function hr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void Ue(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ue(e)}function dr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function pr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var fr=Math.random().toString(36).slice(2),gr="__reactFiber$"+fr,mr="__reactProps$"+fr,vr="__reactContainer$"+fr,yr="__reactEvents$"+fr,br="__reactListeners$"+fr,wr="__reactHandles$"+fr;function _r(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[gr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=pr(t);null!==t;){if(n=t[gr])return n;t=pr(t)}return e}n=(t=n).parentNode}return null}function xr(t){return!(t=t[gr]||t[vr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function kr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function Ar(t){return t[mr]||null}var Sr=[],Er=-1;function Cr(t){return{current:t}}function Mr(t){0>Er||(t.current=Sr[Er],Sr[Er]=null,Er--)}function Tr(t,e){Er++,Sr[Er]=t.current,t.current=e}var Pr={},Rr=Cr(Pr),Dr=Cr(!1),Lr=Pr;function Nr(t,e){var n=t.type.contextTypes;if(!n)return Pr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Fr(){Mr(Dr),Mr(Rr)}function Or(t,e,n){if(Rr.current!==Pr)throw Error(s(168));Tr(Rr,e),Tr(Dr,n)}function Br(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,H(t)||"Unknown",r));return O({},n,i)}function Wr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,Lr=Rr.current,Tr(Rr,t),Tr(Dr,Dr.current),!0}function jr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Br(t,e,Lr),i.__reactInternalMemoizedMergedChildContext=t,Mr(Dr),Mr(Rr),Tr(Rr,t)):Mr(Dr),Tr(Dr,n)}var zr=null,Ur=!1,Hr=!1;function Vr(t){null===zr?zr=[t]:zr.push(t)}function Gr(){if(!Hr&&null!==zr){Hr=!0;var t=0,e=be;try{var n=zr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}zr=null,Ur=!1}catch(r){throw null!==zr&&(zr=zr.slice(t+1)),Xt(Zt,Gr),r}finally{be=e,Hr=!1}}return null}var qr=[],Xr=0,Yr=null,Kr=0,Qr=[],$r=0,Jr=null,Zr=1,ts="";function es(t,e){qr[Xr++]=Kr,qr[Xr++]=Yr,Yr=t,Kr=e}function ns(t,e,n){Qr[$r++]=Zr,Qr[$r++]=ts,Qr[$r++]=Jr,Jr=t;var i=Zr;t=ts;var r=32-ae(i)-1;i&=~(1<<r),n+=1;var s=32-ae(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zr=1<<32-ae(e)+r|n<<r|i,ts=s+t}else Zr=1<<s|n<<r|i,ts=t}function is(t){null!==t.return&&(es(t,1),ns(t,1,0))}function rs(t){for(;t===Yr;)Yr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null;for(;t===Jr;)Jr=Qr[--$r],Qr[$r]=null,ts=Qr[--$r],Qr[$r]=null,Zr=Qr[--$r],Qr[$r]=null}var ss=null,as=null,os=!1,ls=null;function cs(t,e){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function us(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ss=t,as=dr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ss=t,as=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Jr?{id:Zr,overflow:ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ss=t,as=null,!0);default:return!1}}function hs(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function ds(t){if(os){var e=as;if(e){var n=e;if(!us(t,e)){if(hs(t))throw Error(s(418));e=dr(n.nextSibling);var i=ss;e&&us(t,e)?cs(i,n):(t.flags=-4097&t.flags|2,os=!1,ss=t)}}else{if(hs(t))throw Error(s(418));t.flags=-4097&t.flags|2,os=!1,ss=t}}}function ps(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ss=t}function fs(t){if(t!==ss)return!1;if(!os)return ps(t),os=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!sr(t.type,t.memoizedProps)),e&&(e=as)){if(hs(t))throw gs(),Error(s(418));for(;e;)cs(t,e),e=dr(e.nextSibling)}if(ps(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){as=dr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}as=null}}else as=ss?dr(t.stateNode.nextSibling):null;return!0}function gs(){for(var t=as;t;)t=dr(t.nextSibling)}function ms(){as=ss=null,os=!1}function vs(t){null===ls?ls=[t]:ls.push(t)}var ys=w.ReactCurrentBatchConfig;function bs(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=r.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function ws(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _s(t){return(0,t._init)(t._payload)}function xs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Fc(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=jc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===k?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&_s(s)===e.type)?((i=r(e,n.props)).ref=bs(t,e,n),i.return=t,i):((i=Oc(n.type,n.key,n.props,null,t.mode,i)).ref=bs(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=zc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Bc(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=jc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case _:return(n=Oc(e.type,e.key,e.props,null,t.mode,n)).ref=bs(t,null,e),n.return=t,n;case x:return(e=zc(e,t.mode,n)).return=t,e;case D:return d(t,(0,e._init)(e._payload),n)}if(et(e)||I(e))return(e=Bc(e,t.mode,n,null)).return=t,e;ws(t,e)}return null}function p(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(t,e,n,i):null;case x:return n.key===r?u(t,e,n,i):null;case D:return p(t,e,(r=n._init)(n._payload),i)}if(et(n)||I(n))return null!==r?null:h(t,e,n,i,null);ws(t,n)}return null}function f(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case x:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case D:return f(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||I(i))return h(e,t=t.get(n)||null,i,r,null);ws(e,i)}return null}function g(r,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(r,h,o[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),s=a(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===o.length)return n(r,h),os&&es(r,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(r,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return os&&es(r,g),c}for(h=i(r,h);g<o.length;g++)null!==(m=f(h,r,g,o[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach(function(t){return e(r,t)}),os&&es(r,g),c}function m(r,o,l,c){var u=I(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=p(r,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(r,g),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),os&&es(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(o=a(y,o,m),null===h?u=y:h.sibling=y,h=y);return os&&es(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=f(g,r,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=a(y,o,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach(function(t){return e(r,t)}),os&&es(r,m),u}return function t(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:t:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&_s(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=bs(i,u,a),s.return=i,i=s;break t}n(i,u);break}e(i,u),u=u.sibling}a.type===k?((s=Bc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Oc(a.type,a.key,a.props,null,i.mode,l)).ref=bs(i,s,a),l.return=i,i=l)}return o(i);case x:t:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=zc(a,i.mode,l)).return=i,i=s}return o(i);case D:return t(i,s,(u=a._init)(a._payload),l)}if(et(a))return g(i,s,a,l);if(I(a))return m(i,s,a,l);ws(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=jc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ks=xs(!0),As=xs(!1),Ss=Cr(null),Es=null,Cs=null,Ms=null;function Ts(){Ms=Cs=Es=null}function Ps(t){var e=Ss.current;Mr(Ss),t._currentValue=e}function Rs(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){Es=t,Ms=Cs=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xo=!0),t.firstContext=null)}function Ls(t){var e=t._currentValue;if(Ms!==t)if(t={context:t,memoizedValue:e,next:null},null===Cs){if(null===Es)throw Error(s(308));Cs=t,Es.dependencies={lanes:0,firstContext:t}}else Cs=Cs.next=t;return e}var Ns=null;function Is(t){null===Ns?Ns=[t]:Ns.push(t)}function Fs(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Is(e)):(n.next=r.next,r.next=n),e.interleaved=n,Os(t,i)}function Os(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Bs=!1;function Ws(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Rl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Os(t,n)}return null===(r=i.interleaved)?(e.next=e,Is(i)):(e.next=r.next,r.next=e),i.interleaved=e,Os(t,n)}function Hs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Vs(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gs(t,e,n,i){var r=t.updateQueue;Bs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=t.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,p=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var f=t,g=o;switch(d=e,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break t;h=O({},h,d);break t;case 2:Bs=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{a|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);Wl|=a,t.lanes=a,t.memoizedState=h}}function qs(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Xs={},Ys=Cr(Xs),Ks=Cr(Xs),Qs=Cr(Xs);function $s(t){if(t===Xs)throw Error(s(174));return t}function Js(t,e){switch(Tr(Qs,e),Tr(Ks,t),Tr(Ys,Xs),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Mr(Ys),Tr(Ys,e)}function Zs(){Mr(Ys),Mr(Ks),Mr(Qs)}function ta(t){$s(Qs.current);var e=$s(Ys.current),n=lt(e,t.type);e!==n&&(Tr(Ks,t),Tr(Ys,n))}function ea(t){Ks.current===t&&(Mr(Ys),Mr(Ks))}var na=Cr(0);function ia(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ra=[];function sa(){for(var t=0;t<ra.length;t++)ra[t]._workInProgressVersionPrimary=null;ra.length=0}var aa=w.ReactCurrentDispatcher,oa=w.ReactCurrentBatchConfig,la=0,ca=null,ua=null,ha=null,da=!1,pa=!1,fa=0,ga=0;function ma(){throw Error(s(321))}function va(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ui(t[n],e[n]))return!1;return!0}function ya(t,e,n,i,r,a){if(la=a,ca=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,aa.current=null===t||null===t.memoizedState?eo:no,t=n(i,r),pa){a=0;do{if(pa=!1,fa=0,25<=a)throw Error(s(301));a+=1,ha=ua=null,e.updateQueue=null,aa.current=io,t=n(i,r)}while(pa)}if(aa.current=to,e=null!==ua&&null!==ua.next,la=0,ha=ua=ca=null,da=!1,e)throw Error(s(300));return t}function ba(){var t=0!==fa;return fa=0,t}function wa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ha?ca.memoizedState=ha=t:ha=ha.next=t,ha}function _a(){if(null===ua){var t=ca.alternate;t=null!==t?t.memoizedState:null}else t=ua.next;var e=null===ha?ca.memoizedState:ha.next;if(null!==e)ha=e,ua=t;else{if(null===t)throw Error(s(310));t={memoizedState:(ua=t).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===ha?ca.memoizedState=ha=t:ha=ha.next=t}return ha}function xa(t,e){return"function"===typeof e?e(t):e}function ka(t){var e=_a(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=ua,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((la&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,ca.lanes|=h,Wl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,ui(i,e.memoizedState)||(xo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{a=r.lane,ca.lanes|=a,Wl|=a,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Aa(t){var e=_a(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=t(a,o.action),o=o.next}while(o!==r);ui(a,e.memoizedState)||(xo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function Sa(){}function Ea(t,e){var n=ca,i=_a(),r=e(),a=!ui(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Ba(Ta.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||null!==ha&&1&ha.memoizedState.tag){if(n.flags|=2048,La(9,Ma.bind(null,n,i,r,e),void 0,null),null===Dl)throw Error(s(349));0!==(30&la)||Ca(n,e,r)}return r}function Ca(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ca.updateQueue)?(e={lastEffect:null,stores:null},ca.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ma(t,e,n,i){e.value=n,e.getSnapshot=i,Pa(e)&&Ra(t)}function Ta(t,e,n){return n(function(){Pa(e)&&Ra(t)})}function Pa(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ui(t,n)}catch(i){return!0}}function Ra(t){var e=Os(t,1);null!==e&&sc(e,t,1,-1)}function Da(t){var e=wa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=Qa.bind(null,ca,t),[e.memoizedState,t]}function La(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=ca.updateQueue)?(e={lastEffect:null,stores:null},ca.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Na(){return _a().memoizedState}function Ia(t,e,n,i){var r=wa();ca.flags|=t,r.memoizedState=La(1|e,n,void 0,void 0===i?null:i)}function Fa(t,e,n,i){var r=_a();i=void 0===i?null:i;var s=void 0;if(null!==ua){var a=ua.memoizedState;if(s=a.destroy,null!==i&&va(i,a.deps))return void(r.memoizedState=La(e,n,s,i))}ca.flags|=t,r.memoizedState=La(1|e,n,s,i)}function Oa(t,e){return Ia(8390656,8,t,e)}function Ba(t,e){return Fa(2048,8,t,e)}function Wa(t,e){return Fa(4,2,t,e)}function ja(t,e){return Fa(4,4,t,e)}function za(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ua(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Fa(4,4,za.bind(null,e,t),n)}function Ha(){}function Va(t,e){var n=_a();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&va(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ga(t,e){var n=_a();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&va(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function qa(t,e,n){return 0===(21&la)?(t.baseState&&(t.baseState=!1,xo=!0),t.memoizedState=n):(ui(n,e)||(n=ge(),ca.lanes|=n,Wl|=n,t.baseState=!0),e)}function Xa(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=oa.transition;oa.transition={};try{t(!1),e()}finally{be=n,oa.transition=i}}function Ya(){return _a().memoizedState}function Ka(t,e,n){var i=rc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$a(t))Ja(e,n);else if(null!==(n=Fs(t,e,n,i))){sc(n,t,i,ic()),Za(n,e,i)}}function Qa(t,e,n){var i=rc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($a(t))Ja(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,ui(o,a)){var l=e.interleaved;return null===l?(r.next=r,Is(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(hn){}null!==(n=Fs(t,e,r,i))&&(sc(n,t,i,r=ic()),Za(n,e,i))}}function $a(t){var e=t.alternate;return t===ca||null!==e&&e===ca}function Ja(t,e){pa=da=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Za(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var to={readContext:Ls,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},eo={readContext:Ls,useCallback:function(t,e){return wa().memoizedState=[t,void 0===e?null:e],t},useContext:Ls,useEffect:Oa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ia(4194308,4,za.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ia(4,2,t,e)},useMemo:function(t,e){var n=wa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=wa();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Ka.bind(null,ca,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},wa().memoizedState=t},useState:Da,useDebugValue:Ha,useDeferredValue:function(t){return wa().memoizedState=t},useTransition:function(){var t=Da(!1),e=t[0];return t=Xa.bind(null,t[1]),wa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ca,r=wa();if(os){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Dl)throw Error(s(349));0!==(30&la)||Ca(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,Oa(Ta.bind(null,i,a,t),[t]),i.flags|=2048,La(9,Ma.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=wa(),e=Dl.identifierPrefix;if(os){var n=ts;e=":"+e+"R"+(n=(Zr&~(1<<32-ae(Zr)-1)).toString(32)+n),0<(n=fa++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ga++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},no={readContext:Ls,useCallback:Va,useContext:Ls,useEffect:Ba,useImperativeHandle:Ua,useInsertionEffect:Wa,useLayoutEffect:ja,useMemo:Ga,useReducer:ka,useRef:Na,useState:function(){return ka(xa)},useDebugValue:Ha,useDeferredValue:function(t){return qa(_a(),ua.memoizedState,t)},useTransition:function(){return[ka(xa)[0],_a().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ya,unstable_isNewReconciler:!1},io={readContext:Ls,useCallback:Va,useContext:Ls,useEffect:Ba,useImperativeHandle:Ua,useInsertionEffect:Wa,useLayoutEffect:ja,useMemo:Ga,useReducer:Aa,useRef:Na,useState:function(){return Aa(xa)},useDebugValue:Ha,useDeferredValue:function(t){var e=_a();return null===ua?e.memoizedState=t:qa(e,ua.memoizedState,t)},useTransition:function(){return[Aa(xa)[0],_a().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ya,unstable_isNewReconciler:!1};function ro(t,e){if(t&&t.defaultProps){for(var n in e=O({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function so(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:O({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var ao={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ic(),r=rc(t),s=zs(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Us(t,s,r))&&(sc(e,t,r,i),Hs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ic(),r=rc(t),s=zs(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Us(t,s,r))&&(sc(e,t,r,i),Hs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ic(),i=rc(t),r=zs(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Us(t,r,i))&&(sc(e,t,i,n),Hs(e,t,i))}};function oo(t,e,n,i,r,s,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,a):!e.prototype||!e.prototype.isPureReactComponent||(!hi(n,i)||!hi(r,s))}function lo(t,e,n){var i=!1,r=Pr,s=e.contextType;return"object"===typeof s&&null!==s?s=Ls(s):(r=Ir(e)?Lr:Rr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Nr(t,r):Pr),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ao,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function co(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ao.enqueueReplaceState(e,e.state,null)}function uo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ws(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=Ls(s):(s=Ir(e)?Lr:Rr.current,r.context=Nr(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(so(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&ao.enqueueReplaceState(r,r.state,null),Gs(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function ho(t,e){try{var n="",i=e;do{n+=z(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function po(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function fo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var go="function"===typeof WeakMap?WeakMap:Map;function mo(t,e,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Xl||(Xl=!0,Yl=i),fo(0,e)},n}function vo(t,e,n){(n=zs(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){fo(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){fo(0,e),"function"!==typeof i&&(null===Kl?Kl=new Set([this]):Kl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function yo(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new go;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Mc.bind(null,t,e,n),e.then(t,t))}function bo(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function wo(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=zs(-1,1)).tag=2,Us(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var _o=w.ReactCurrentOwner,xo=!1;function ko(t,e,n,i){e.child=null===t?As(e,null,n,i):ks(e,t.child,n,i)}function Ao(t,e,n,i,r){n=n.render;var s=e.ref;return Ds(e,r),i=ya(t,e,n,i,s,r),n=ba(),null===t||xo?(os&&n&&is(e),e.flags|=1,ko(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xo(t,e,r))}function So(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Ic(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Oc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Eo(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:hi)(a,i)&&t.ref===e.ref)return Xo(t,e,r)}return e.flags|=1,(t=Fc(s,i)).ref=e.ref,t.return=e,e.child=t}function Eo(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(hi(s,i)&&t.ref===e.ref){if(xo=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Xo(t,e,r);0!==(131072&t.flags)&&(xo=!0)}}return To(t,e,n,i,r)}function Co(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Fl,Il),Il|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Fl,Il),Il|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Fl,Il),Il|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tr(Fl,Il),Il|=i;return ko(t,e,r,n),e.child}function Mo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function To(t,e,n,i,r){var s=Ir(n)?Lr:Rr.current;return s=Nr(e,s),Ds(e,r),n=ya(t,e,n,i,s,r),i=ba(),null===t||xo?(os&&i&&is(e),e.flags|=1,ko(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xo(t,e,r))}function Po(t,e,n,i,r){if(Ir(n)){var s=!0;Wr(e)}else s=!1;if(Ds(e,r),null===e.stateNode)qo(t,e),lo(e,n,i),uo(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ls(c):c=Nr(e,c=Ir(n)?Lr:Rr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&co(e,a,i,c),Bs=!1;var d=e.memoizedState;a.state=d,Gs(e,i,a,r),l=e.memoizedState,o!==i||d!==l||Dr.current||Bs?("function"===typeof u&&(so(e,n,u,i),l=e.memoizedState),(o=Bs||oo(e,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,js(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ro(e.type,o),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ls(l):l=Nr(e,l=Ir(n)?Lr:Rr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&co(e,a,i,l),Bs=!1,d=e.memoizedState,a.state=d,Gs(e,i,a,r);var f=e.memoizedState;o!==h||d!==f||Dr.current||Bs?("function"===typeof p&&(so(e,n,p,i),f=e.memoizedState),(c=Bs||oo(e,n,c,i,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Ro(t,e,n,i,s,r)}function Ro(t,e,n,i,r,s){Mo(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&jr(e,n,!1),Xo(t,e,s);i=e.stateNode,_o.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=ks(e,t.child,null,s),e.child=ks(e,null,o,s)):ko(t,e,o,s),e.memoizedState=i.state,r&&jr(e,n,!0),e.child}function Do(t){var e=t.stateNode;e.pendingContext?Or(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Or(0,e.context,!1),Js(t,e.containerInfo)}function Lo(t,e,n,i,r){return ms(),vs(r),e.flags|=256,ko(t,e,n,i),e.child}var No,Io,Fo,Oo,Bo={dehydrated:null,treeContext:null,retryLane:0};function Wo(t){return{baseLanes:t,cachePool:null,transitions:null}}function jo(t,e,n){var i,r=e.pendingProps,a=na.current,o=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&a)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Tr(na,1&a),null===t)return ds(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Wc(l,r,0,null),t=Bc(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Wo(n),e.memoizedState=Bo,t):zo(e,l));if(null!==(a=t.memoizedState)&&null!==(i=a.dehydrated))return function(t,e,n,i,r,a,o){if(n)return 256&e.flags?(e.flags&=-257,Uo(t,e,o,i=po(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=Wc({mode:"visible",children:i.children},r,0,null),(a=Bc(a,r,o,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&ks(e,t.child,null,o),e.child.memoizedState=Wo(o),e.memoizedState=Bo,a);if(0===(1&e.mode))return Uo(t,e,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Uo(t,e,o,i=po(a=Error(s(419)),i,void 0))}if(l=0!==(o&t.childLanes),xo||l){if(null!==(i=Dl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Os(t,r),sc(i,t,r,-1))}return yc(),Uo(t,e,o,i=po(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Pc.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,as=dr(r.nextSibling),ss=e,os=!0,ls=null,null!==t&&(Qr[$r++]=Zr,Qr[$r++]=ts,Qr[$r++]=Jr,Zr=t.id,ts=t.overflow,Jr=e),e=zo(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,a,n);if(o){o=r.fallback,l=e.mode,i=(a=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==a?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Fc(i,o):(o=Bc(o,l,n,null)).flags|=2,o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=null===(l=t.child.memoizedState)?Wo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Bo,r}return t=(o=t.child).sibling,r=Fc(o,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zo(t,e){return(e=Wc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Uo(t,e,n,i){return null!==i&&vs(i),ks(e,t.child,null,n),(t=zo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ho(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Rs(t.return,e,n)}function Vo(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Go(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ko(t,e,i.children,n),0!==(2&(i=na.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ho(t,n,e);else if(19===t.tag)Ho(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(na,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ia(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Vo(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ia(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Vo(e,!0,n,null,s);break;case"together":Vo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qo(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Wl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Fc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Fc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Yo(t,e){if(!os)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ko(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Qo(t,e,n){var i=e.pendingProps;switch(rs(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(e),null;case 1:case 17:return Ir(e.type)&&Fr(),Ko(e),null;case 3:return i=e.stateNode,Zs(),Mr(Dr),Mr(Rr),sa(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(fs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ls&&(cc(ls),ls=null))),Io(t,e),Ko(e),null;case 5:ea(e);var r=$s(Qs.current);if(n=e.type,null!==t&&null!=e.stateNode)Fo(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Ko(e),null}if(t=$s(Ys.current),fs(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[gr]=e,i[mr]=a,t=0!==(1&e.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Bi.length;r++)Ui(Bi[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Q(i,a),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ui("invalid",i);break;case"textarea":rt(i,a),Ui("invalid",i)}for(var l in yt(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&er(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&er(i.textContent,c,t),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":q(i),Z(i,a,!0);break;case"textarea":q(i),at(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=nr)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[gr]=e,t[mr]=i,No(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Ui("cancel",t),Ui("close",t),r=i;break;case"iframe":case"object":case"embed":Ui("load",t),r=i;break;case"video":case"audio":for(r=0;r<Bi.length;r++)Ui(Bi[r],t);r=i;break;case"source":Ui("error",t),r=i;break;case"img":case"image":case"link":Ui("error",t),Ui("load",t),r=i;break;case"details":Ui("toggle",t),r=i;break;case"input":Q(t,i),r=K(t,i),Ui("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=O({},i,{value:void 0}),Ui("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Ui("invalid",t)}for(a in yt(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?mt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ui("scroll",t):null!=u&&b(t,a,u,l))}switch(n){case"input":q(t),Z(t,i,!1);break;case"textarea":q(t),at(t);break;case"option":null!=i.value&&t.setAttribute("value",""+V(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?nt(t,!!i.multiple,a,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=nr)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ko(e),null;case 6:if(t&&null!=e.stateNode)Oo(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=$s(Qs.current),$s(Ys.current),fs(e)){if(i=e.stateNode,n=e.memoizedProps,i[gr]=e,(a=i.nodeValue!==n)&&null!==(t=ss))switch(t.tag){case 3:er(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&er(i.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[gr]=e,e.stateNode=i}return Ko(e),null;case 13:if(Mr(na),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(os&&null!==as&&0!==(1&e.mode)&&0===(128&e.flags))gs(),ms(),e.flags|=98560,a=!1;else if(a=fs(e),null!==i&&null!==i.dehydrated){if(null===t){if(!a)throw Error(s(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(s(317));a[gr]=e}else ms(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ko(e),a=!1}else null!==ls&&(cc(ls),ls=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&na.current)?0===Ol&&(Ol=3):yc())),null!==e.updateQueue&&(e.flags|=4),Ko(e),null);case 4:return Zs(),Io(t,e),null===t&&Gi(e.stateNode.containerInfo),Ko(e),null;case 10:return Ps(e.type._context),Ko(e),null;case 19:if(Mr(na),null===(a=e.memoizedState))return Ko(e),null;if(i=0!==(128&e.flags),null===(l=a.rendering))if(i)Yo(a,!1);else{if(0!==Ol||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ia(t))){for(e.flags|=128,Yo(a,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(na,1&na.current|2),e.child}t=t.sibling}null!==a.tail&&$t()>Gl&&(e.flags|=128,i=!0,Yo(a,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ia(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Yo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!os)return Ko(e),null}else 2*$t()-a.renderingStartTime>Gl&&1073741824!==n&&(e.flags|=128,i=!0,Yo(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$t(),e.sibling=null,n=na.current,Tr(na,i?1&n|2:1&n),e):(Ko(e),null);case 22:case 23:return fc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Il)&&(Ko(e),6&e.subtreeFlags&&(e.flags|=8192)):Ko(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function $o(t,e){switch(rs(e),e.tag){case 1:return Ir(e.type)&&Fr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Zs(),Mr(Dr),Mr(Rr),sa(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return ea(e),null;case 13:if(Mr(na),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));ms()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Mr(na),null;case 4:return Zs(),null;case 10:return Ps(e.type._context),null;case 22:case 23:return fc(),null;default:return null}}No=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},Fo=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,$s(Ys.current);var s,a=null;switch(n){case"input":r=K(t,r),i=K(t,i),a=[];break;case"select":r=O({},r,{value:void 0}),i=O({},i,{value:void 0}),a=[];break;case"textarea":r=it(t,r),i=it(t,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=nr)}for(u in yt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Oo=function(t,e,n,i){n!==i&&(e.flags|=4)};var Jo=!1,Zo=!1,tl="function"===typeof WeakSet?WeakSet:Set,el=null;function nl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cc(t,e,i)}else n.current=null}function il(t,e,n){try{n()}catch(i){Cc(t,e,i)}}var rl=!1;function sl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&il(e,n,s)}r=r.next}while(r!==i)}}function al(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ll(t){var e=t.alternate;null!==e&&(t.alternate=null,ll(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[gr],delete e[mr],delete e[yr],delete e[br],delete e[wr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cl(t){return 5===t.tag||3===t.tag||4===t.tag}function ul(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||cl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function hl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=nr));else if(4!==i&&null!==(t=t.child))for(hl(t,e,n),t=t.sibling;null!==t;)hl(t,e,n),t=t.sibling}function dl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(dl(t,e,n),t=t.sibling;null!==t;)dl(t,e,n),t=t.sibling}var pl=null,fl=!1;function gl(t,e,n){for(n=n.child;null!==n;)ml(t,e,n),n=n.sibling}function ml(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(pn){}switch(n.tag){case 5:Zo||nl(n,e);case 6:var i=pl,r=fl;pl=null,gl(t,e,n),fl=r,null!==(pl=i)&&(fl?(t=pl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(fl?(t=pl,n=n.stateNode,8===t.nodeType?hr(t.parentNode,n):1===t.nodeType&&hr(t,n),Ue(t)):hr(pl,n.stateNode));break;case 4:i=pl,r=fl,pl=n.stateNode.containerInfo,fl=!0,gl(t,e,n),pl=i,fl=r;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&il(n,e,a),r=r.next}while(r!==i)}gl(t,e,n);break;case 1:if(!Zo&&(nl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(pn){Cc(n,e,pn)}gl(t,e,n);break;case 21:gl(t,e,n);break;case 22:1&n.mode?(Zo=(i=Zo)||null!==n.memoizedState,gl(t,e,n),Zo=i):gl(t,e,n);break;default:gl(t,e,n)}}function vl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new tl),e.forEach(function(e){var i=Rc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function yl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,fl=!1;break t;case 3:case 4:pl=l.stateNode.containerInfo,fl=!0;break t}l=l.return}if(null===pl)throw Error(s(160));ml(a,o,r),pl=null,fl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(hn){Cc(r,e,hn)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)bl(e,t),e=e.sibling}function bl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yl(e,t),wl(t),4&i){try{sl(3,t,t.return),al(3,t)}catch(m){Cc(t,t.return,m)}try{sl(5,t,t.return)}catch(m){Cc(t,t.return,m)}}break;case 1:yl(e,t),wl(t),512&i&&null!==n&&nl(n,n.return);break;case 5:if(yl(e,t),wl(t),512&i&&null!==n&&nl(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Cc(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var a=t.memoizedProps,o=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(r,a),bt(l,o);var u=bt(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):b(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":st(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?nt(r,!!a.multiple,a.defaultValue,!0):nt(r,!!a.multiple,a.multiple?[]:"",!1))}r[mr]=a}catch(m){Cc(t,t.return,m)}}break;case 6:if(yl(e,t),wl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(m){Cc(t,t.return,m)}}break;case 3:if(yl(e,t),wl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ue(e.containerInfo)}catch(m){Cc(t,t.return,m)}break;case 4:default:yl(e,t),wl(t);break;case 13:yl(e,t),wl(t),8192&(r=t.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Vl=$t())),4&i&&vl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Zo=(u=Zo)||h,yl(e,t),Zo=u):yl(e,t),wl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(el=t,h=t.child;null!==h;){for(d=el=h;null!==el;){switch(f=(p=el).child,p.tag){case 0:case 11:case 14:case 15:sl(4,p,p.return);break;case 1:nl(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){i=p,n=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Cc(i,n,m)}}break;case 5:nl(p,p.return);break;case 22:if(null!==p.memoizedState){Al(d);continue}}null!==f?(f.return=p,el=f):Al(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",o))}catch(m){Cc(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Cc(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yl(e,t),wl(t),4&i&&vl(t);case 21:}}function wl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(cl(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),dl(t,ul(t),r);break;case 3:case 4:var a=i.stateNode.containerInfo;hl(t,ul(t),a);break;default:throw Error(s(161))}}catch(un){Cc(t,t.return,un)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,n){el=t,xl(t,e,n)}function xl(t,e,n){for(var i=0!==(1&t.mode);null!==el;){var r=el,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Jo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Jo;var c=Zo;if(Jo=a,(Zo=l)&&!c)for(el=r;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?Sl(r):null!==l?(l.return=a,el=l):Sl(r);for(;null!==s;)el=s,xl(s,e,n),s=s.sibling;el=r,Jo=o,Zo=c}kl(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,el=s):kl(t)}}function kl(t){for(;null!==el;){var e=el;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Zo||al(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Zo)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ro(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&qs(e,a,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}qs(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ue(d)}}}break;default:throw Error(s(163))}Zo||512&e.flags&&ol(e)}catch(qw){Cc(e,e.return,qw)}}if(e===t){el=null;break}if(null!==(n=e.sibling)){n.return=e.return,el=n;break}el=e.return}}function Al(t){for(;null!==el;){var e=el;if(e===t){el=null;break}var n=e.sibling;if(null!==n){n.return=e.return,el=n;break}el=e.return}}function Sl(t){for(;null!==el;){var e=el;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{al(4,e)}catch(un){Cc(e,n,un)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(un){Cc(e,r,un)}}var s=e.return;try{ol(e)}catch(un){Cc(e,s,un)}break;case 5:var a=e.return;try{ol(e)}catch(un){Cc(e,a,un)}}}catch(un){Cc(e,e.return,un)}if(e===t){el=null;break}var o=e.sibling;if(null!==o){o.return=e.return,el=o;break}el=e.return}}var El,Cl=Math.ceil,Ml=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Rl=0,Dl=null,Ll=null,Nl=0,Il=0,Fl=Cr(0),Ol=0,Bl=null,Wl=0,jl=0,zl=0,Ul=null,Hl=null,Vl=0,Gl=1/0,ql=null,Xl=!1,Yl=null,Kl=null,Ql=!1,$l=null,Jl=0,Zl=0,tc=null,ec=-1,nc=0;function ic(){return 0!==(6&Rl)?$t():-1!==ec?ec:ec=$t()}function rc(t){return 0===(1&t.mode)?1:0!==(2&Rl)&&0!==Nl?Nl&-Nl:null!==ys.transition?(0===nc&&(nc=ge()),nc):0!==(t=be)?t:t=void 0===(t=window.event)?16:Qe(t.type)}function sc(t,e,n,i){if(50<Zl)throw Zl=0,tc=null,Error(s(185));ve(t,n,i),0!==(2&Rl)&&t===Dl||(t===Dl&&(0===(2&Rl)&&(jl|=n),4===Ol&&uc(t,Nl)),ac(t,i),1===n&&0===Rl&&0===(1&e.mode)&&(Gl=$t()+500,Ur&&Gr()))}function ac(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ae(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=pe(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}(t,e);var i=de(t,t===Dl?Nl:0);if(0===i)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Ur=!0,Vr(t)}(hc.bind(null,t)):Vr(hc.bind(null,t)),cr(function(){0===(6&Rl)&&Gr()}),n=null;else{switch(we(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Dc(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if(ec=-1,nc=0,0!==(6&Rl))throw Error(s(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var i=de(t,t===Dl?Nl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=bc(t,i);else{e=i;var r=Rl;Rl|=2;var a=vc();for(Dl===t&&Nl===e||(ql=null,Gl=$t()+500,gc(t,e));;)try{_c();break}catch(pn){mc(t,pn)}Ts(),Ml.current=a,Rl=r,null!==Ll?e=0:(Dl=null,Nl=0,e=Ol)}if(0!==e){if(2===e&&(0!==(r=fe(t))&&(i=r,e=lc(t,r))),1===e)throw n=Bl,gc(t,0),uc(t,i),ac(t,$t()),n;if(6===e)uc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ui(s(),r))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=bc(t,i))&&(0!==(a=fe(t))&&(i=a,e=lc(t,a))),1===e))throw n=Bl,gc(t,0),uc(t,i),ac(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:Ac(t,Hl,ql);break;case 3:if(uc(t,i),(130023424&i)===i&&10<(e=Vl+500-$t())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){ic(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ar(Ac.bind(null,t,Hl,ql),e);break}Ac(t,Hl,ql);break;case 4:if(uc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ae(i);a=1<<o,(o=e[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){t.timeoutHandle=ar(Ac.bind(null,t,Hl,ql),i);break}Ac(t,Hl,ql);break;default:throw Error(s(329))}}}return ac(t,$t()),t.callbackNode===n?oc.bind(null,t):null}function lc(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(gc(t,e).flags|=256),2!==(t=bc(t,e))&&(e=Hl,Hl=n,null!==e&&cc(e)),t}function cc(t){null===Hl?Hl=t:Hl.push.apply(Hl,t)}function uc(t,e){for(e&=~zl,e&=~jl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),i=1<<n;t[n]=-1,e&=~i}}function hc(t){if(0!==(6&Rl))throw Error(s(327));Sc();var e=de(t,0);if(0===(1&e))return ac(t,$t()),null;var n=bc(t,e);if(0!==t.tag&&2===n){var i=fe(t);0!==i&&(e=i,n=lc(t,i))}if(1===n)throw n=Bl,gc(t,0),uc(t,e),ac(t,$t()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ac(t,Hl,ql),ac(t,$t()),null}function dc(t,e){var n=Rl;Rl|=1;try{return t(e)}finally{0===(Rl=n)&&(Gl=$t()+500,Ur&&Gr())}}function pc(t){null!==$l&&0===$l.tag&&0===(6&Rl)&&Sc();var e=Rl;Rl|=1;var n=Pl.transition,i=be;try{if(Pl.transition=null,be=1,t)return t()}finally{be=i,Pl.transition=n,0===(6&(Rl=e))&&Gr()}}function fc(){Il=Fl.current,Mr(Fl)}function gc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,or(n)),null!==Ll)for(n=Ll.return;null!==n;){var i=n;switch(rs(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Fr();break;case 3:Zs(),Mr(Dr),Mr(Rr),sa();break;case 5:ea(i);break;case 4:Zs();break;case 13:case 19:Mr(na);break;case 10:Ps(i.type._context);break;case 22:case 23:fc()}n=n.return}if(Dl=t,Ll=t=Fc(t.current,null),Nl=Il=e,Ol=0,Bl=null,zl=jl=Wl=0,Hl=Ul=null,null!==Ns){for(e=0;e<Ns.length;e++)if(null!==(i=(n=Ns[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Ns=null}return t}function mc(t,e){for(;;){var n=Ll;try{if(Ts(),aa.current=to,da){for(var i=ca.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}da=!1}if(la=0,ha=ua=ca=null,pa=!1,fa=0,Tl.current=null,null===n||null===n.return){Ol=1,Bl=e,Ll=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=bo(o);if(null!==f){f.flags&=-257,wo(f,o,l,0,e),1&f.mode&&yo(a,u,e),c=u;var g=(e=f).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){yo(a,u,e),yc();break t}c=Error(s(426))}else if(os&&1&l.mode){var v=bo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),wo(v,o,l,0,e),vs(ho(c,l));break t}}a=c=ho(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Vs(a,mo(0,c,e));break t;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Vs(a,vo(a,l,e));break t}}a=a.return}while(null!==a)}kc(n)}catch(w){e=w,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function vc(){var t=Ml.current;return Ml.current=to,null===t?to:t}function yc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Dl||0===(268435455&Wl)&&0===(268435455&jl)||uc(Dl,Nl)}function bc(t,e){var n=Rl;Rl|=2;var i=vc();for(Dl===t&&Nl===e||(ql=null,gc(t,e));;)try{wc();break}catch(r){mc(t,r)}if(Ts(),Rl=n,Ml.current=i,null!==Ll)throw Error(s(261));return Dl=null,Nl=0,Ol}function wc(){for(;null!==Ll;)xc(Ll)}function _c(){for(;null!==Ll&&!Kt();)xc(Ll)}function xc(t){var e=El(t.alternate,t,Il);t.memoizedProps=t.pendingProps,null===e?kc(t):Ll=e,Tl.current=null}function kc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Qo(n,e,Il)))return void(Ll=n)}else{if(null!==(n=$o(n,e)))return n.flags&=32767,void(Ll=n);if(null===t)return Ol=6,void(Ll=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ll=e);Ll=e=t}while(null!==e);0===Ol&&(Ol=5)}function Ac(t,e,n){var i=be,r=Pl.transition;try{Pl.transition=null,be=1,function(t,e,n,i){do{Sc()}while(null!==$l);if(0!==(6&Rl))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ae(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,a),t===Dl&&(Ll=Dl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Dc(ee,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Pl.transition,Pl.transition=null;var o=be;be=1;var l=Rl;Rl|=4,Tl.current=null,function(t,e){if(ir=Ve,mi(t=gi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===n&&++u===r&&(l=o),p===a&&++h===i&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rr={focusedElem:t,selectionRange:n},Ve=!1,el=e;null!==el;)if(t=(e=el).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,el=t;else for(;null!==el;){e=el;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ro(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(_){Cc(e,e.return,_)}if(null!==(t=e.sibling)){t.return=e.return,el=t;break}el=e.return}g=rl,rl=!1}(t,n),bl(n,t),vi(rr),Ve=!!ir,rr=ir=null,t.current=n,_l(n,t,r),Qt(),Rl=l,be=o,Pl.transition=a}else t.current=n;if(Ql&&(Ql=!1,$l=t,Jl=r),a=t.pendingLanes,0===a&&(Kl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ac(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Xl)throw Xl=!1,t=Yl,Yl=null,t;0!==(1&Jl)&&0!==t.tag&&Sc(),a=t.pendingLanes,0!==(1&a)?t===tc?Zl++:(Zl=0,tc=t):Zl=0,Gr()}(t,e,n,i)}finally{Pl.transition=r,be=i}return null}function Sc(){if(null!==$l){var t=we(Jl),e=Pl.transition,n=be;try{if(Pl.transition=null,be=16>t?16:t,null===$l)var i=!1;else{if(t=$l,$l=null,Jl=0,0!==(6&Rl))throw Error(s(331));var r=Rl;for(Rl|=4,el=t.current;null!==el;){var a=el,o=a.child;if(0!==(16&el.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var h=el;switch(h.tag){case 0:case 11:case 15:sl(8,h,a)}var d=h.child;if(null!==d)d.return=h,el=d;else for(;null!==el;){var p=(h=el).sibling,f=h.return;if(ll(h),h===u){el=null;break}if(null!==p){p.return=f,el=p;break}el=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}el=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,el=o;else t:for(;null!==el;){if(0!==(2048&(a=el).flags))switch(a.tag){case 0:case 11:case 15:sl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,el=y;break t}el=a.return}}var b=t.current;for(el=b;null!==el;){var w=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,el=w;else t:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(x){Cc(l,l.return,x)}if(l===o){el=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,el=_;break t}el=l.return}}if(Rl=r,Gr(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(x){}i=!0}return i}finally{be=n,Pl.transition=e}}return!1}function Ec(t,e,n){t=Us(t,e=mo(0,e=ho(n,e),1),1),e=ic(),null!==t&&(ve(t,1,e),ac(t,e))}function Cc(t,e,n){if(3===t.tag)Ec(t,t,n);else for(;null!==e;){if(3===e.tag){Ec(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kl||!Kl.has(i))){e=Us(e,t=vo(e,t=ho(n,t),1),1),t=ic(),null!==e&&(ve(e,1,t),ac(e,t));break}}e=e.return}}function Mc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=ic(),t.pingedLanes|=t.suspendedLanes&n,Dl===t&&(Nl&n)===n&&(4===Ol||3===Ol&&(130023424&Nl)===Nl&&500>$t()-Vl?gc(t,0):zl|=n),ac(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ic();null!==(t=Os(t,e))&&(ve(t,e,n),ac(t,n))}function Pc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function Rc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Tc(t,n)}function Dc(t,e){return Xt(t,e)}function Lc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(t,e,n,i){return new Lc(t,e,n,i)}function Ic(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Fc(t,e){var n=t.alternate;return null===n?((n=Nc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oc(t,e,n,i,r,a){var o=2;if(i=t,"function"===typeof t)Ic(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case k:return Bc(n.children,r,a,e);case A:o=8,r|=8;break;case S:return(t=Nc(12,n,e,2|r)).elementType=S,t.lanes=a,t;case T:return(t=Nc(13,n,e,r)).elementType=T,t.lanes=a,t;case P:return(t=Nc(19,n,e,r)).elementType=P,t.lanes=a,t;case L:return Wc(n,r,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:o=10;break t;case C:o=9;break t;case M:o=11;break t;case R:o=14;break t;case D:o=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Nc(o,n,e,r)).elementType=t,e.type=i,e.lanes=a,e}function Bc(t,e,n,i){return(t=Nc(7,t,i,e)).lanes=n,t}function Wc(t,e,n,i){return(t=Nc(22,t,i,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function jc(t,e,n){return(t=Nc(6,t,null,e)).lanes=n,t}function zc(t,e,n){return(e=Nc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Hc(t,e,n,i,r,s,a,o,l){return t=new Uc(t,e,n,o,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Nc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ws(s),t}function Vc(t){if(!t)return Pr;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Ir(n))return Br(t,n,e)}return e}function Gc(t,e,n,i,r,s,a,o,l){return(t=Hc(n,i,!0,t,0,s,0,o,l)).context=Vc(null),n=t.current,(s=zs(i=ic(),r=rc(n))).callback=void 0!==e&&null!==e?e:null,Us(n,s,r),t.current.lanes=r,ve(t,r,i),ac(t,i),t}function qc(t,e,n,i){var r=e.current,s=ic(),a=rc(r);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=zs(s,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Us(r,e,a))&&(sc(t,r,a,s),Hs(t,r,a)),a}function Xc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Yc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Kc(t,e){Yc(t,e),(t=t.alternate)&&Yc(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Dr.current)xo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return xo=!1,function(t,e,n){switch(e.tag){case 3:Do(e),ms();break;case 5:ta(e);break;case 1:Ir(e.type)&&Wr(e);break;case 4:Js(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(Ss,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(na,1&na.current),e.flags|=128,null):0!==(n&e.child.childLanes)?jo(t,e,n):(Tr(na,1&na.current),null!==(t=Xo(t,e,n))?t.sibling:null);Tr(na,1&na.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Go(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(na,na.current),i)break;return null;case 22:case 23:return e.lanes=0,Co(t,e,n)}return Xo(t,e,n)}(t,e,n);xo=0!==(131072&t.flags)}else xo=!1,os&&0!==(1048576&e.flags)&&ns(e,Kr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;qo(t,e),t=e.pendingProps;var r=Nr(e,Rr.current);Ds(e,n),r=ya(null,e,i,t,r,n);var a=ba();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(i)?(a=!0,Wr(e)):a=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ws(e),r.updater=ao,e.stateNode=r,r._reactInternals=e,uo(e,i,t,n),e=Ro(null,e,i,!0,a,n)):(e.tag=0,os&&a&&is(e),ko(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(qo(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Ic(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===R)return 14}return 2}(i),t=ro(i,t),r){case 0:e=To(null,e,i,t,n);break t;case 1:e=Po(null,e,i,t,n);break t;case 11:e=Ao(null,e,i,t,n);break t;case 14:e=So(null,e,i,ro(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,To(t,e,i,r=e.elementType===i?r:ro(i,r),n);case 1:return i=e.type,r=e.pendingProps,Po(t,e,i,r=e.elementType===i?r:ro(i,r),n);case 3:t:{if(Do(e),null===t)throw Error(s(387));i=e.pendingProps,r=(a=e.memoizedState).element,js(t,e),Gs(e,i,null,n);var o=e.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Lo(t,e,i,n,r=ho(Error(s(423)),e));break t}if(i!==r){e=Lo(t,e,i,n,r=ho(Error(s(424)),e));break t}for(as=dr(e.stateNode.containerInfo.firstChild),ss=e,os=!0,ls=null,n=As(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),i===r){e=Xo(t,e,n);break t}ko(t,e,i,n)}e=e.child}return e;case 5:return ta(e),null===t&&ds(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,o=r.children,sr(i,r)?o=null:null!==a&&sr(i,a)&&(e.flags|=32),Mo(t,e),ko(t,e,o,n),e.child;case 6:return null===t&&ds(e),null;case 13:return jo(t,e,n);case 4:return Js(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=ks(e,null,i,n):ko(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,Ao(t,e,i,r=e.elementType===i?r:ro(i,r),n);case 7:return ko(t,e,e.pendingProps,n),e.child;case 8:case 12:return ko(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value,Tr(Ss,i._currentValue),i._currentValue=o,null!==a)if(ui(a.value,o)){if(a.children===r.children&&!Dr.current){e=Xo(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=zs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Rs(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Rs(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}ko(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ds(e,n),i=i(r=Ls(r)),e.flags|=1,ko(t,e,i,n),e.child;case 14:return r=ro(i=e.type,e.pendingProps),So(t,e,i,r=ro(i.type,r),n);case 15:return Eo(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ro(i,r),qo(t,e),e.tag=1,Ir(i)?(t=!0,Wr(e)):t=!1,Ds(e,n),lo(e,i,r),uo(e,i,r,n),Ro(null,e,i,!0,t,n);case 19:return Go(t,e,n);case 22:return Co(t,e,n)}throw Error(s(156,e.tag))};var Qc="function"===typeof reportError?reportError:function(t){console.error(t)};function $c(t){this._internalRoot=t}function Jc(t){this._internalRoot=t}function Zc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function tu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function eu(){}function nu(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var t=Xc(a);o.call(t)}}qc(e,a,t,r)}else a=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Xc(a);s.call(t)}}var a=Gc(e,i,t,0,null,!1,0,"",eu);return t._reactRootContainer=a,t[vr]=a.current,Gi(8===t.nodeType?t.parentNode:t),pc(),a}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var o=i;i=function(){var t=Xc(l);o.call(t)}}var l=Hc(t,0,!1,null,0,!1,0,"",eu);return t._reactRootContainer=l,t[vr]=l.current,Gi(8===t.nodeType?t.parentNode:t),pc(function(){qc(e,l,n,i)}),l}(n,e,t,r,i);return Xc(a)}Jc.prototype.render=$c.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));qc(t,e,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;pc(function(){qc(null,t,null,null)}),e[vr]=null}},Jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ae();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&Oe(t)}},_e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),ac(e,$t()),0===(6&Rl)&&(Gl=$t()+500,Gr()))}break;case 13:pc(function(){var e=Os(t,1);if(null!==e){var n=ic();sc(e,t,1,n)}}),Kc(t,1)}},xe=function(t){if(13===t.tag){var e=Os(t,134217728);if(null!==e)sc(e,t,134217728,ic());Kc(t,134217728)}},ke=function(t){if(13===t.tag){var e=rc(t),n=Os(t,e);if(null!==n)sc(n,t,e,ic());Kc(t,e)}},Ae=function(){return be},Se=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ar(i);if(!r)throw Error(s(90));X(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Mt=dc,Tt=pc;var iu={usingClientEntryPoint:!1,Events:[xr,kr,Ar,Et,Ct,dc]},ru={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},su={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{re=au.inject(su),se=au}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Zc(t))throw Error(s(299));var n=!1,i="",r=Qc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Hc(t,1,!1,null,0,n,0,i,r),t[vr]=e.current,Gi(8===t.nodeType?t.parentNode:t),new $c(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return pc(t)},e.hydrate=function(t,e,n){if(!tu(e))throw Error(s(200));return nu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Zc(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=Gc(e,null,t,1,null!=n?n:null,r,0,a,o),t[vr]=e.current,Gi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Jc(e)},e.render=function(t,e,n){if(!tu(e))throw Error(s(200));return nu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!tu(t))throw Error(s(40));return!!t._reactRootContainer&&(pc(function(){nu(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0)},e.unstable_batchedUpdates=dc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!tu(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return nu(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},749:(t,e,n)=>{t.exports=n.p+"static/media/pdf.worker.min.01ccd7eceb626d097c4c.mjs"},853:(t,e,n)=>{t.exports=n(234)},950:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/Resume-Reader/",n.b="undefined"!==typeof document&&document.baseURI||self.location.href;var i={};n.r(i),n.d(i,{dU:()=>km,ng:()=>ri,EA:()=>Gh,Tm:()=>kp,D6:()=>np,YE:()=>gp});var r=n(43),s=n(391);function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function c(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}const d=["sri"],p=["page"],f=["page","matches"],g=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],v=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var y="popstate";function b(){return E(function(t,e){let{pathname:n,search:i,hash:r}=t.location;return k("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")},function(t,e){return"string"===typeof e?e:A(e)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function w(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function _(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function x(t,e){return{usr:t.state,key:t.key,idx:e}}function k(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?S(e):e),{},{state:n,key:e&&e.key||i||Math.random().toString(36).substring(2,10)})}function A(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function S(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function E(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let t=u(),e=null==t?null:t-c;c=t,l&&l({action:o,location:f.location,delta:e})}function p(t){return C(t)}null==c&&(c=0,a.replaceState(h(h({},a.state),{},{idx:c}),""));let f={get action(){return o},get location(){return t(r,a)},listen(t){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(y,d),l=t,()=>{r.removeEventListener(y,d),l=null}},createHref:t=>e(r,t),createURL:p,encodeLocation(t){let e=p(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){o="PUSH";let i=k(f.location,t,e);n&&n(i,t),c=u()+1;let h=x(i,c),d=f.createHref(i);try{a.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;r.location.assign(d)}s&&l&&l({action:o,location:f.location,delta:1})},replace:function(t,e){o="REPLACE";let i=k(f.location,t,e);n&&n(i,t),c=u();let r=x(i,c),h=f.createHref(i);a.replaceState(r,"",h),s&&l&&l({action:o,location:f.location,delta:0})},go:t=>a.go(t)};return f}function C(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),w(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof t?t:A(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function M(t,e){return T(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function T(t,e,n,i){let r=V(("string"===typeof e?S(e):e).pathname||"/",n);if(null==r)return null;let s=P(t);!function(t){t.sort((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every((t,n)=>t===e[n]);return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let t=H(r);a=j(s[o],t,i)}return a}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&a)return;w(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=K([i,l.relativePath]),u=n.concat(l);t.children&&t.children.length>0&&(w(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(t.children,e,u,c,a)),(null!=t.path||t.index)&&e.push({path:c,score:W(c,t.index),routesMeta:u})};return t.forEach((t,e)=>{var n;if(""!==t.path&&null!==(n=t.path)&&void 0!==n&&n.includes("?"))for(let i of R(t.path))s(t,e,!0,i);else s(t,e)}),e}function R(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=R(i.join("/")),o=[];return o.push(...a.map(t=>""===t?s:[s,t].join("/"))),r&&o.push(...a),o.map(e=>t.startsWith("/")&&""===e?"/":e)}var D=/^:[\w-]+$/,L=3,N=2,I=1,F=10,O=-2,B=t=>"*"===t;function W(t,e){let n=t.split("/"),i=n.length;return n.some(B)&&(i+=O),e&&(i+=N),n.filter(t=>!B(t)).reduce((t,e)=>t+(D.test(e)?L:""===e?I:F),i)}function j(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let t=i[o],l=o===i.length-1,c="/"===s?e:e.slice(s.length)||"/",u=z({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},c),h=t.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=z({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:K([s,u.pathname]),pathnameBase:Q(K([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=K([s,u.pathnameBase]))}return a}function z(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=U(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=i.reduce((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=o[n]||"";a=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}const l=o[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t},{});return{params:l,pathname:s,pathnameBase:a,pattern:t}}function U(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'.concat(t,'" will be treated as if it were "').concat(t.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(t.replace(/\*$/,"/*"),'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function H(t){try{return t.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(e){return _(!1,'The URL path "'.concat(t,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(e,").")),t}}function V(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function G(t,e,n,i){return"Cannot include a '".concat(t,"' character in a manually specified `to.").concat(e,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function q(t){return t.filter((t,e)=>0===e||t.route.path&&t.route.path.length>0)}function X(t){let e=q(t);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Y(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof t?i=S(t):(i=h({},t),w(!i.pathname||!i.pathname.includes("?"),G("?","pathname","search",i)),w(!i.pathname||!i.pathname.includes("#"),G("#","pathname","hash",i)),w(!i.search||!i.search.includes("#"),G("#","search","hash",i)));let s,a=""===t||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let t=e.length-1;if(!r&&o.startsWith("..")){let e=o.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}s=t>=0?e[t]:"/"}let l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof t?S(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)}),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:$(i),hash:J(r)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var K=t=>t.join("/").replace(/\/\/+/g,"/"),Q=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",J=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";function Z(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tt=["POST","PUT","PATCH","DELETE"],et=(new Set(tt),["GET",...tt]);new Set(et),Symbol("ResetLoaderData");var nt=r.createContext(null);nt.displayName="DataRouter";var it=r.createContext(null);it.displayName="DataRouterState";var rt=r.createContext(!1);var st=r.createContext({isTransitioning:!1});st.displayName="ViewTransition";var at=r.createContext(new Map);at.displayName="Fetchers";var ot=r.createContext(null);ot.displayName="Await";var lt=r.createContext(null);lt.displayName="Navigation";var ct=r.createContext(null);ct.displayName="Location";var ut=r.createContext({outlet:null,matches:[],isDataRoute:!1});ut.displayName="Route";var ht=r.createContext(null);ht.displayName="RouteError";function dt(){return null!=r.useContext(ct)}function pt(){return w(dt(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ct).location}var ft="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gt(t){r.useContext(lt).static||r.useLayoutEffect(t)}function mt(){let{isDataRoute:t}=r.useContext(ut);return t?function(){let{router:t}=St("useNavigate"),e=Ct("useNavigate"),n=r.useRef(!1);gt(()=>{n.current=!0});let i=r.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(n.current,ft),n.current&&("number"===typeof i?t.navigate(i):await t.navigate(i,h({fromRouteId:e},r)))},[t,e]);return i}():function(){w(dt(),"useNavigate() may be used only in the context of a <Router> component.");let t=r.useContext(nt),{basename:e,navigator:n}=r.useContext(lt),{matches:i}=r.useContext(ut),{pathname:s}=pt(),a=JSON.stringify(X(i)),o=r.useRef(!1);gt(()=>{o.current=!0});let l=r.useCallback(function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_(o.current,ft),!o.current)return;if("number"===typeof i)return void n.go(i);let l=Y(i,JSON.parse(a),s,"path"===r.relative);null==t&&"/"!==e&&(l.pathname="/"===l.pathname?e:K([e,l.pathname])),(r.replace?n.replace:n.push)(l,r.state,r)},[e,n,a,s,t]);return l}()}r.createContext(null);function vt(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ut),{pathname:i}=pt(),s=JSON.stringify(X(n));return r.useMemo(()=>Y(t,JSON.parse(s),i,"path"===e),[t,s,i,e])}function yt(t,e,n,i,s){w(dt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=r.useContext(lt),{matches:o}=r.useContext(ut),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let t=p&&p.path||"";Pt(u,!p||t.endsWith("*")||t.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(t,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(t,'"> to <Route path="').concat("/"===t?"*":"".concat(t,"/*"),'">.'))}let f,g=pt();if(e){var m;let t="string"===typeof e?S(e):e;w("/"===d||(null===(m=t.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(t.pathname,'" was given in the `location` prop.')),f=t}else f=g;let v=f.pathname||"/",y=v;if("/"!==d){let t=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(t.length).join("/")}let b=M(t,{pathname:y});_(p||null!=b,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),_(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=kt(b&&b.map(t=>Object.assign({},t,{params:Object.assign({},c,t.params),pathname:K([d,a.encodeLocation?a.encodeLocation(t.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?d:K([d,a.encodeLocation?a.encodeLocation(t.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:t.pathnameBase])})),o,n,i,s);return e&&x?r.createElement(ct.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},x):x}function bt(){let t=Mt(),e=Z(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},e),n?r.createElement("pre",{style:s},n):null,o)}var wt=r.createElement(bt,null),_t=class extends r.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return void 0!==this.state.error?r.createElement(ut.Provider,{value:this.props.routeContext},r.createElement(ht.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xt(t){let{routeContext:e,match:n,children:i}=t,s=r.useContext(nt);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ut.Provider,{value:e},i)}function kt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!n)return null;if(n.errors)t=n.matches;else{if(0!==e.length||n.initialized||!(n.matches.length>0))return null;t=n.matches}}let s=t,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let t=s.findIndex(t=>t.route.id&&void 0!==(null===a||void 0===a?void 0:a[t.route.id]));w(t>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),s=s.slice(0,Math.min(s.length,t+1))}let o=!1,l=-1;if(n)for(let r=0;r<s.length;r++){let t=s[r];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=r),t.route.id){let{loaderData:e,errors:i}=n,r=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!i||void 0===i[t.route.id]);if(t.route.lazy||r){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((t,c,u)=>{let h,d=!1,p=null,f=null;n&&(h=a&&c.route.id?a[c.route.id]:void 0,p=c.route.errorElement||wt,o&&(l<0&&0===u?(Pt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===u&&(d=!0,f=c.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,u+1)),m=()=>{let e;return e=h?p:d?f:c.route.Component?r.createElement(c.route.Component,null):c.route.element?c.route.element:t,r.createElement(xt,{match:c,routeContext:{outlet:t,matches:g,isDataRoute:null!=n},children:e})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?r.createElement(_t,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:i}):m()},null)}function At(t){return"".concat(t," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function St(t){let e=r.useContext(nt);return w(e,At(t)),e}function Et(t){let e=r.useContext(it);return w(e,At(t)),e}function Ct(t){let e=function(t){let e=r.useContext(ut);return w(e,At(t)),e}(t),n=e.matches[e.matches.length-1];return w(n.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),n.route.id}function Mt(){var t;let e=r.useContext(ht),n=Et("useRouteError"),i=Ct("useRouteError");return void 0!==e?e:null===(t=n.errors)||void 0===t?void 0:t[i]}var Tt={};function Pt(t,e,n){e||Tt[t]||(Tt[t]=!0,_(!1,n))}var Rt={};function Dt(t,e){t||Rt[e]||(Rt[e]=!0,console.warn(e))}r.memo(function(t){let{routes:e,future:n,state:i,unstable_onError:r}=t;return yt(e,void 0,i,r,n)});function Lt(t){w(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Nt(t){let{basename:e="/",children:n=null,location:i,navigationType:s="POP",navigator:a,static:o=!1}=t;w(!dt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=r.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof i&&(i=S(i));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=i,g=r.useMemo(()=>{let t=V(u,l);return null==t?null:{location:{pathname:t,search:h,hash:d,state:p,key:f},navigationType:s}},[l,u,h,d,p,f,s]);return _(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:r.createElement(lt.Provider,{value:c},r.createElement(ct.Provider,{children:n,value:g}))}function It(t){let{children:e,location:n}=t;return yt(Ft(e),n)}r.Component;function Ft(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(t,(t,i)=>{if(!r.isValidElement(t))return;let s=[...e,i];if(t.type===r.Fragment)return void n.push.apply(n,Ft(t.props.children,s));w(t.type===Lt,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),w(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Ft(t.props.children,s)),n.push(a)}),n}var Ot="get",Bt="application/x-www-form-urlencoded";function Wt(t){return null!=t&&"string"===typeof t.tagName}var jt=null;var zt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ut(t){return null==t||zt.has(t)?t:(_(!1,'"'.concat(t,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Bt,'"')),null)}function Ht(t,e){let n,i,r,s,a;if(Wt(o=t)&&"form"===o.tagName.toLowerCase()){let a=t.getAttribute("action");i=a?V(a,e):null,n=t.getAttribute("method")||Ot,r=Ut(t.getAttribute("enctype"))||Bt,s=new FormData(t)}else if(function(t){return Wt(t)&&"button"===t.tagName.toLowerCase()}(t)||function(t){return Wt(t)&&"input"===t.tagName.toLowerCase()}(t)&&("submit"===t.type||"image"===t.type)){let a=t.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=t.getAttribute("formaction")||a.getAttribute("action");if(i=o?V(o,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Ot,r=Ut(t.getAttribute("formenctype"))||Ut(a.getAttribute("enctype"))||Bt,s=new FormData(a,t),!function(){if(null===jt)try{new FormData(document.createElement("form"),0),jt=!1}catch(t){jt=!0}return jt}()){let{name:e,type:n,value:i}=t;if("image"===n){let t=e?"".concat(e,"."):"";s.append("".concat(t,"x"),"0"),s.append("".concat(t,"y"),"0")}else e&&s.append(e,i)}}else{if(Wt(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ot,i=null,r=Bt,a=t}var o;return s&&"text/plain"===r&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Vt(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}Symbol("SingleFetchRedirect");function Gt(t,e,n){let i="string"===typeof t?new URL(t,"undefined"===typeof window?"server://singlefetch/":window.location.origin):t;return"/"===i.pathname?i.pathname="_root.".concat(n):e&&"/"===V(i.pathname,e)?i.pathname="".concat(e.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function qt(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error("Error loading route module `".concat(t.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xt(t){return null!=t&&"string"===typeof t.page}function Yt(t){return null!=t&&(null==t.href?"preload"===t.rel&&"string"===typeof t.imageSrcSet&&"string"===typeof t.imageSizes:"string"===typeof t.rel&&"string"===typeof t.href)}function Kt(t,e,n,i,r,s){let a=(t,e)=>!n[e]||t.route.id!==n[e].route.id,o=(t,e)=>{var i;return n[e].pathname!==t.pathname||(null===(i=n[e].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[e].params["*"]!==t.params["*"]};return"assets"===s?e.filter((t,e)=>a(t,e)||o(t,e)):"data"===s?e.filter((e,s)=>{let l=i.routes[e.route.id];if(!l||!l.hasLoader)return!1;if(a(e,s)||o(e,s))return!0;if(e.route.shouldRevalidate){var c;let i=e.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(t,window.origin),nextParams:e.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Qt(t,e){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=t.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function $t(t,e){let n=new Set,i=new Set(e);return t.reduce((t,r)=>{if(e&&!Xt(r)&&"script"===r.as&&r.href&&i.has(r.href))return t;let s=JSON.stringify(function(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}(r));return n.has(s)||(n.add(s),t.push({key:s,link:r})),t},[])}function Jt(t,e){return"lazy"===t.mode&&!0===e}function Zt(){let t=r.useContext(nt);return Vt(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function te(){let t=r.useContext(it);return Vt(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ee=r.createContext(void 0);function ne(){let t=r.useContext(ee);return Vt(t,"You must render this element inside a <HydratedRouter> element"),t}function ie(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function re(t,e,n){if(n&&!le)return[t[0]];if(e){let n=t.findIndex(t=>void 0!==e[t.route.id]);return t.slice(0,n+1)}return t}ee.displayName="FrameworkContext";function se(t){let{page:e}=t,n=a(t,p),{router:i}=Zt(),s=r.useMemo(()=>M(i.routes,e,i.basename),[i.routes,e,i.basename]);return s?r.createElement(oe,h({page:e,matches:s},n)):null}function ae(t){let{manifest:e,routeModules:n}=ne(),[i,s]=r.useState([]);return r.useEffect(()=>{let i=!1;return async function(t,e,n){return $t((await Promise.all(t.map(async t=>{let i=e.routes[t.route.id];if(i){let t=await qt(i,n);return t.links?t.links():[]}return[]}))).flat(1).filter(Yt).filter(t=>"stylesheet"===t.rel||"preload"===t.rel).map(t=>"stylesheet"===t.rel?h(h({},t),{},{rel:"prefetch",as:"style"}):h(h({},t),{},{rel:"prefetch"})))}(t,e,n).then(t=>{i||s(t)}),()=>{i=!0}},[t,e,n]),i}function oe(t){let{page:e,matches:n}=t,i=a(t,f),s=pt(),{manifest:o,routeModules:l}=ne(),{basename:c}=Zt(),{loaderData:u,matches:d}=te(),p=r.useMemo(()=>Kt(e,n,d,o,s,"data"),[e,n,d,o,s]),g=r.useMemo(()=>Kt(e,n,d,o,s,"assets"),[e,n,d,o,s]),m=r.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let t=new Set,i=!1;if(n.forEach(e=>{var n;let r=o.routes[e.route.id];r&&r.hasLoader&&(!p.some(t=>t.route.id===e.route.id)&&e.route.id in u&&null!==(n=l[e.route.id])&&void 0!==n&&n.shouldRevalidate||r.hasClientLoader?i=!0:t.add(e.route.id))}),0===t.size)return[];let r=Gt(e,c,"data");return i&&t.size>0&&r.searchParams.set("_routes",n.filter(e=>t.has(e.route.id)).map(t=>t.route.id).join(",")),[r.pathname+r.search]},[c,u,s,o,p,n,e,l]),v=r.useMemo(()=>Qt(g,o),[g,o]),y=ae(g);return r.createElement(r.Fragment,null,m.map(t=>r.createElement("link",h({key:t,rel:"prefetch",as:"fetch",href:t},i))),v.map(t=>r.createElement("link",h({key:t,rel:"modulepreload",href:t},i))),y.map(t=>{let{key:e,link:n}=t;return r.createElement("link",h({key:e,nonce:i.nonce},n))}))}var le=!1;function ce(t){let{manifest:e,serverHandoffString:n,isSpaMode:i,renderMeta:s,routeDiscovery:o,ssr:l}=ne(),{router:c,static:u,staticContext:p}=Zt(),{matches:f}=te(),g=r.useContext(rt),m=Jt(o,l);s&&(s.didRenderScripts=!0);let v=re(f,null,i);r.useEffect(()=>{le=!0},[]);let y=r.useMemo(()=>{var i;if(g)return null;let s=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=u?"".concat(null!==(i=e.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(e.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(e.url)),";\n").concat(v.map((t,n)=>{let i="route".concat(n),r=e.routes[t.route.id];Vt(r,"Route ".concat(t.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,u=[...s?[{module:s,varName:"".concat(i,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===u.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[u.map(t=>"import * as ".concat(t.varName,' from "').concat(t.module,'";')).join("\n"),"const ".concat(i," = {").concat(u.map(t=>"...".concat(t.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(t,e){let{sri:n}=t,i=a(t,d),r=new Set(e.state.matches.map(t=>t.route.id)),s=e.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push("/".concat(s.join("/"))),s.pop();o.forEach(t=>{let n=M(e.routes,t,e.basename);n&&n.forEach(t=>r.add(t.route.id))});let l=[...r].reduce((t,e)=>Object.assign(t,{[e]:i.routes[e]}),{});return h(h({},i),{},{routes:l,sri:!!n||void 0})}(e,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((t,e)=>"".concat(JSON.stringify(t.route.id),":route").concat(e)).join(","),"};\n\nimport(").concat(JSON.stringify(e.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",h(h({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),r.createElement("script",h(h({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),b=le||g?[]:(w=e.entry.imports.concat(Qt(v,e,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let _="object"===typeof e.sri?e.sri:{};return Dt(!g,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),le||g?null:r.createElement(r.Fragment,null,"object"===typeof e.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:_})}}):null,m?null:r.createElement("link",{rel:"modulepreload",href:e.url,crossOrigin:t.crossOrigin,integrity:_[e.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:e.entry.module,crossOrigin:t.crossOrigin,integrity:_[e.entry.module],suppressHydrationWarning:!0}),b.map(e=>r.createElement("link",{key:e,rel:"modulepreload",href:e,crossOrigin:t.crossOrigin,integrity:_[e],suppressHydrationWarning:!0})),y)}function ue(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>{e.forEach(e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)})}}r.Component;function he(t){let{error:e,isOutsideRemixApp:n}=t;console.error(e);let i,s=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Z(e))return r.createElement(de,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},e.status," ",e.statusText),s);if(e instanceof Error)i=e;else{let t=null==e?"Unknown Error":"object"===typeof e&&"toString"in e?e.toString():JSON.stringify(e);i=new Error(t)}return r.createElement(de,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function de(t){var e;let{title:n,renderScripts:i,isOutsideRemixApp:s,children:a}=t,{routeModules:o}=ne();return null!==(e=o.root)&&void 0!==e&&e.Layout&&!s?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?r.createElement(ce,null):null)))}var pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{pe&&(window.__reactRouterVersion="7.9.5")}catch(K_){}function fe(t){let{basename:e,children:n,window:i}=t,s=r.useRef();null==s.current&&(s.current=b({window:i,v5Compat:!0}));let a=s.current,[o,l]=r.useState({action:a.action,location:a.location}),c=r.useCallback(t=>{r.startTransition(()=>l(t))},[l]);return r.useLayoutEffect(()=>a.listen(c),[a,c]),r.createElement(Nt,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a})}var ge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=r.forwardRef(function(t,e){let n,{onClick:i,discover:s="render",prefetch:o="none",relative:l,reloadDocument:c,replace:u,state:d,target:p,to:f,preventScrollReset:m,viewTransition:v}=t,y=a(t,g),{basename:b}=r.useContext(lt),x="string"===typeof f&&ge.test(f),k=!1;if("string"===typeof f&&x&&(n=f,pe))try{let t=new URL(window.location.href),e=f.startsWith("//")?new URL(t.protocol+f):new URL(f),n=V(e.pathname,b);e.origin===t.origin&&null!=n?f=n+e.search+e.hash:k=!0}catch(K_){_(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(dt(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(lt),{hash:s,pathname:a,search:o}=vt(t,{relative:e}),l=a;return"/"!==n&&(l="/"===a?n:K([n,a])),i.createHref({pathname:l,search:o,hash:s})}(f,{relative:l}),[E,C,M]=function(t,e){let n=r.useContext(ee),[i,s]=r.useState(!1),[a,o]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,p=r.useRef(null);r.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let t=new IntersectionObserver(t=>{t.forEach(t=>{o(t.isIntersecting)})},{threshold:.5});return p.current&&t.observe(p.current),()=>{t.disconnect()}}},[t]),r.useEffect(()=>{if(i){let t=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(t)}}},[i]);let f=()=>{s(!0)},g=()=>{s(!1),o(!1)};return n?"intent"!==t?[a,p,{}]:[a,p,{onFocus:ie(l,f),onBlur:ie(c,g),onMouseEnter:ie(u,f),onMouseLeave:ie(h,g),onTouchStart:ie(d,f)}]:[!1,p,{}]}(o,y),T=function(t){let{target:e,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=mt(),c=pt(),u=vt(t,{relative:a});return r.useCallback(r=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(r,e)){r.preventDefault();let e=void 0!==n?n:A(c)===A(u);l(t,{replace:e,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,n,i,e,t,s,a,o])}(f,{replace:u,state:d,target:p,preventScrollReset:m,relative:l,viewTransition:v});let P=r.createElement("a",h(h(h({},y),M),{},{href:n||S,onClick:k||c?i:function(t){i&&i(t),t.defaultPrevented||T(t)},ref:ue(e,C),target:p,"data-discover":x||"render"!==s?void 0:"true"}));return E&&!x?r.createElement(r.Fragment,null,P,r.createElement(se,{page:S})):P});me.displayName="Link",r.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,p=a(t,m),f=vt(c,{relative:p.relative}),g=pt(),v=r.useContext(it),{navigator:y,basename:b}=r.useContext(lt),_=null!=v&&function(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(st);w(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=be("useViewTransitionState"),s=vt(t,{relative:e});if(!n.isTransitioning)return!1;let a=V(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=V(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=z(s.pathname,o)||null!=z(s.pathname,a)}(f)&&!0===u,x=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,k=g.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(k=k.toLowerCase(),A=A?A.toLowerCase():null,x=x.toLowerCase()),A&&b&&(A=V(A,b)||A);const S="/"!==x&&x.endsWith("/")?x.length-1:x.length;let E,C=k===x||!o&&k.startsWith(x)&&"/"===k.charAt(S),M=null!=A&&(A===x||!o&&A.startsWith(x)&&"/"===A.charAt(x.length)),T={isActive:C,isPending:M,isTransitioning:_},P=C?n:void 0;E="function"===typeof s?s(T):[s,C?"active":null,M?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof l?l(T):l;return r.createElement(me,h(h({},p),{},{"aria-current":P,className:E,ref:e,style:R,to:c,viewTransition:u}),"function"===typeof d?d(T):d)}).displayName="NavLink";var ve=r.forwardRef((t,e)=>{let{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:o,replace:l,state:c,method:u=Ot,action:d,onSubmit:p,relative:f,preventScrollReset:g,viewTransition:m}=t,y=a(t,v),b=xe(),_=function(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(lt),i=r.useContext(ut);w(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a=h({},vt(t||".",{relative:e})),o=pt();if(null==t){a.search=o.search;let t=new URLSearchParams(a.search),e=t.getAll("index"),n=e.some(t=>""===t);if(n){t.delete("index"),e.filter(t=>t).forEach(e=>t.append("index",e));let n=t.toString();a.search=n?"?".concat(n):""}}t&&"."!==t||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:K([n,a.pathname]));return A(a)}(d,{relative:f}),x="get"===u.toLowerCase()?"get":"post",k="string"===typeof d&&ge.test(d);return r.createElement("form",h(h({ref:e,method:x,action:_,onSubmit:o?p:t=>{if(p&&p(t),t.defaultPrevented)return;t.preventDefault();let e=t.nativeEvent.submitter,n=(null===e||void 0===e?void 0:e.getAttribute("formmethod"))||u;b(e||t.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:l,state:c,relative:f,preventScrollReset:g,viewTransition:m})}},y),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function ye(t){return"".concat(t," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function be(t){let e=r.useContext(nt);return w(e,ye(t)),e}ve.displayName="Form";var we=0,_e=()=>"__".concat(String(++we),"__");function xe(){let{router:t}=be("useSubmit"),{basename:e}=r.useContext(lt),n=Ct("useRouteId");return r.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Ht(i,e);if(!1===r.navigate){let e=r.fetcherKey||_e();await t.fetch(e,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}var ke=n(579);const Ae=()=>{const t=mt(),[e,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)({job_title:"",job_description:"",company_url:"",file:null}),u=(0,r.useRef)(null),d=t=>{const{name:e,value:n}=t.target;c(t=>h(h({},t),{},{[e]:n}))};return(0,ke.jsxs)("div",{className:"App",children:[(0,ke.jsx)("header",{className:"App-header",children:(0,ke.jsx)("h1",{children:"Resume Analyzer"})}),(0,ke.jsx)("main",{children:(0,ke.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n(!0),s(null),o("Preparing your resume..."),u.current&&(URL.revokeObjectURL(u.current),u.current=null);try{if(!l.file)throw new Error("Please attach a PDF file.");const e=()=>{const t=new FormData;return t.append("job_title",l.job_title),t.append("job_description",l.job_description),t.append("company_url",l.company_url),t.append("file",l.file),t};console.log("Sending to both webhooks..."),o("Analyzing resume and generating improvements...");const[n,r]=await Promise.all([fetch("https://shreyahubcredo.app.n8n.cloud/webhook-test/2227bd6f-2f86-470d-a2d0-d8ff386eb788",{method:"POST",body:e(),headers:{Accept:"application/json"}}),fetch("https://shreyahubcredo.app.n8n.cloud/webhook-test/20db4528-631d-42c0-858d-930ba828178d",{method:"POST",body:e(),headers:{Accept:"application/pdf"}})]);console.log("Received responses from both webhooks");let s=null;if(!n.ok)throw new Error("Analysis webhook failed (".concat(n.status,")"));o("Processing analysis results...");const a=n.headers.get("content-type")||"";if(!a.includes("json"))throw new Error("Expected JSON from analysis webhook, got ".concat(a));{const t=await n.json();if(console.log("Received analysis JSON:",t),Array.isArray(t)&&t.length>0&&t[0].output)try{s=JSON.parse(t[0].output),console.log("Parsed analysis from array format:",s)}catch(i){throw console.error("Failed to parse output field:",i),new Error("Failed to parse analysis JSON")}else if(t&&"object"===typeof t&&!Array.isArray(t))s=t,console.log("Using direct object format:",s);else{if(!(Array.isArray(t)&&t.length>0&&void 0!==t[0].overall_score))throw console.error("Unrecognized analysis format:",t),new Error("Unexpected analysis response format");s=t[0],console.log("Using first array item as analysis:",s)}}let c=null;if(r.ok){o("Loading improved resume...");const t=r.headers.get("content-type")||"";if(t.includes("pdf")){const t=await r.arrayBuffer(),e=new Blob([t],{type:"application/pdf"});c=URL.createObjectURL(e),u.current=c,console.log("Created PDF blob URL:",c)}else console.warn("Expected PDF, got ".concat(t))}else console.warn("PDF webhook failed (".concat(r.status,") - continuing without PDF"));console.log("Analysis and PDF processing complete"),t("/analysis",{state:{analysisData:s,pdfUrl:c,hasPdf:!!c}})}catch(r){console.error("Error during submission:",r),s((null===r||void 0===r?void 0:r.message)||"Something went wrong!"),o("")}finally{n(!1)}},className:"card",encType:"multipart/form-data",children:[i&&(0,ke.jsx)("div",{className:"error",children:i}),e&&a&&(0,ke.jsxs)("div",{className:"loading-progress",children:[(0,ke.jsx)("div",{className:"loading-spinner"}),(0,ke.jsx)("p",{children:a})]}),(0,ke.jsxs)("div",{className:"form-group",children:[(0,ke.jsx)("label",{htmlFor:"job_title",children:"Job Title"}),(0,ke.jsx)("input",{type:"text",id:"job_title",name:"job_title",value:l.job_title,onChange:d,required:!0,disabled:e})]}),(0,ke.jsxs)("div",{className:"form-group",children:[(0,ke.jsx)("label",{htmlFor:"company_url",children:"Company URL (Optional)"}),(0,ke.jsx)("input",{type:"url",id:"company_url",name:"company_url",placeholder:"https://example.com",value:l.company_url,onChange:d,disabled:e})]}),(0,ke.jsxs)("div",{className:"form-group",children:[(0,ke.jsx)("label",{htmlFor:"job_description",children:"Job Description"}),(0,ke.jsx)("textarea",{id:"job_description",name:"job_description",value:l.job_description,onChange:d,required:!0,disabled:e})]}),(0,ke.jsxs)("div",{className:"form-group",children:[(0,ke.jsx)("label",{htmlFor:"file",children:"Resume (PDF)"}),(0,ke.jsx)("input",{type:"file",id:"file",name:"file",accept:"application/pdf,.pdf",onChange:t=>{var e,n;const i=null!==(e=null===(n=t.target.files)||void 0===n?void 0:n[0])&&void 0!==e?e:null;c(t=>h(h({},t),{},{file:i}))},required:!0,disabled:e})]}),(0,ke.jsx)("button",{type:"submit",className:"submit-btn",disabled:e,children:e?"Analyzing...":"Analyze Resume"})]})})]})};function Se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ee(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach(function(e){Ee(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach(function(e){Te(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function De(t){return function e(){for(var n=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return r.length>=t.length?t.apply(this,r):function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.apply(n,[].concat(r,i))}}}function Le(t){return{}.toString.call(t).includes("Object")}function Ne(t){return"function"===typeof t}var Ie=De(function(t,e){throw new Error(t[e]||t.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),Fe={changes:function(t,e){return Le(e)||Ie("changeType"),Object.keys(e).some(function(e){return n=t,i=e,!Object.prototype.hasOwnProperty.call(n,i);var n,i})&&Ie("changeField"),e},selector:function(t){Ne(t)||Ie("selectorType")},handler:function(t){Ne(t)||Le(t)||Ie("handlerType"),Le(t)&&Object.values(t).some(function(t){return!Ne(t)})&&Ie("handlersType")},initial:function(t){var e;t||Ie("initialIsRequired"),Le(t)||Ie("initialType"),e=t,Object.keys(e).length||Ie("initialContent")}};function Oe(t,e){return Ne(e)?e(t.current):e}function Be(t,e){return t.current=Re(Re({},t.current),e),e}function We(t,e,n){return Ne(e)?e(t.current):Object.keys(n).forEach(function(n){var i;return null===(i=e[n])||void 0===i?void 0:i.call(e,t.current[n])}),n}const je={create:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fe.initial(t),Fe.handler(e);var n={current:t},i=De(We)(n,e),r=De(Be)(n),s=De(Fe.changes)(t),a=De(Oe)(n);return[function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return Fe.selector(t),t(n.current)},function(t){!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight(function(t,e){return e(t)},t)}}(i,r,s,a)(t)}]}};var ze,Ue={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},He=(ze=function(t,e){throw new Error(t[e]||t.default)},function t(){for(var e=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.length>=ze.length?ze.apply(this,i):function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.apply(e,[].concat(i,r))}})(Ue),Ve={config:function(t){var e;return t||He("configIsRequired"),e=t,{}.toString.call(e).includes("Object")||He("configType"),t.urls?(console.warn(Ue.deprecation),{paths:{vs:t.urls.monacoBase}}):t}};function Ge(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],Ge(t[n],e[n]))}),Me(Me({},t),e)}var qe={type:"cancelation",msg:"operation is manually canceled"};function Xe(t){var e=!1,n=new Promise(function(n,i){t.then(function(t){return e?i(qe):n(t)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var Ye=["monaco"],Ke=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e);else for(;!(l=(i=s.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Se(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(je.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),2),Qe=Ke[0],$e=Ke[1];function Je(t){return document.body.appendChild(t)}function Ze(t){var e=Qe(function(t){return{config:t.config,reject:t.reject}}),n=function(t){var e=document.createElement("script");return t&&(e.src=t),e}("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function tn(){var t=Qe(function(t){return{config:t.config,resolve:t.resolve,reject:t.reject}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(e){var n=e.m;en(n),t.resolve(n)},function(e){t.reject(e)})}function en(t){Qe().monaco||$e({monaco:t})}var nn=new Promise(function(t,e){return $e({resolve:t,reject:e})}),rn={config:function(t){var e=Ve.config(t),n=e.monaco,i=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(e,Ye);$e(function(t){return{config:Ge(t.config,i),monaco:n}})},init:function(){var t=Qe(function(t){return{monaco:t.monaco,isInitialized:t.isInitialized,resolve:t.resolve}});if(!t.isInitialized){if($e({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Xe(nn);if(window.monaco&&window.monaco.editor)return en(window.monaco),t.resolve(window.monaco),Xe(nn);!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight(function(t,e){return e(t)},t)}}(Je,Ze)(tn)}return Xe(nn)},__getMonacoInstance:function(){return Qe(function(t){return t.monaco})}},sn={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},an={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var on=function(t){let{children:e}=t;return r.createElement("div",{style:an.container},e)};var ln=function(t){let{width:e,height:n,isEditorReady:i,loading:s,_ref:a,className:o,wrapperProps:l}=t;return r.createElement("section",h({style:h(h({},sn.wrapper),{},{width:e,height:n})},l),!i&&r.createElement(on,null,s),r.createElement("div",{ref:a,style:h(h({},sn.fullWidth),!i&&sn.hide),className:o}))},cn=(0,r.memo)(ln);var un=function(t){(0,r.useEffect)(t,[])};var hn=function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(0,r.useRef)(!0);(0,r.useEffect)(i.current||!n?()=>{i.current=!1}:t,e)};function dn(){}function pn(t,e,n,i){return function(t,e){return t.editor.getModel(fn(t,e))}(t,i)||function(t,e,n,i){return t.editor.createModel(e,n,i?fn(t,i):void 0)}(t,e,n,i)}function fn(t,e){return t.Uri.parse(e)}var gn=function(t){let{original:e,modified:n,language:i,originalLanguage:s,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:u=!1,theme:d="light",loading:p="Loading...",options:f={},height:g="100%",width:m="100%",className:v,wrapperProps:y={},beforeMount:b=dn,onMount:w=dn}=t,[_,x]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!0),S=(0,r.useRef)(null),E=(0,r.useRef)(null),C=(0,r.useRef)(null),M=(0,r.useRef)(w),T=(0,r.useRef)(b),P=(0,r.useRef)(!1);un(()=>{let t=rn.init();return t.then(t=>(E.current=t)&&A(!1)).catch(t=>"cancelation"!==(null===t||void 0===t?void 0:t.type)&&console.error("Monaco initialization: error:",t)),()=>S.current?function(){var t,e,n,i;let r=null===(t=S.current)||void 0===t?void 0:t.getModel();c||null!==r&&void 0!==r&&null!==(e=r.original)&&void 0!==e&&e.dispose(),u||null!==r&&void 0!==r&&null!==(n=r.modified)&&void 0!==n&&n.dispose(),null===(i=S.current)||void 0===i||i.dispose()}():t.cancel()}),hn(()=>{if(S.current&&E.current){let t=S.current.getOriginalEditor(),n=pn(E.current,e||"",s||i||"text",o||"");n!==t.getModel()&&t.setModel(n)}},[o],_),hn(()=>{if(S.current&&E.current){let t=S.current.getModifiedEditor(),e=pn(E.current,n||"",a||i||"text",l||"");e!==t.getModel()&&t.setModel(e)}},[l],_),hn(()=>{let t=S.current.getModifiedEditor();t.getOption(E.current.editor.EditorOption.readOnly)?t.setValue(n||""):n!==t.getValue()&&(t.executeEdits("",[{range:t.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),t.pushUndoStop())},[n],_),hn(()=>{var t;null===(t=S.current)||void 0===t||null===(t=t.getModel())||void 0===t||t.original.setValue(e||"")},[e],_),hn(()=>{let{original:t,modified:e}=S.current.getModel();E.current.editor.setModelLanguage(t,s||i||"text"),E.current.editor.setModelLanguage(e,a||i||"text")},[i,s,a],_),hn(()=>{var t;null===(t=E.current)||void 0===t||t.editor.setTheme(d)},[d],_),hn(()=>{var t;null===(t=S.current)||void 0===t||t.updateOptions(f)},[f],_);let R=(0,r.useCallback)(()=>{var t;if(!E.current)return;T.current(E.current);let r=pn(E.current,e||"",s||i||"text",o||""),c=pn(E.current,n||"",a||i||"text",l||"");null===(t=S.current)||void 0===t||t.setModel({original:r,modified:c})},[i,n,a,e,s,o,l]),D=(0,r.useCallback)(()=>{var t;!P.current&&C.current&&(S.current=E.current.editor.createDiffEditor(C.current,h({automaticLayout:!0},f)),R(),null!==(t=E.current)&&void 0!==t&&t.editor.setTheme(d),x(!0),P.current=!0)},[f,d,R]);return(0,r.useEffect)(()=>{_&&M.current(S.current,E.current)},[_]),(0,r.useEffect)(()=>{!k&&!_&&D()},[k,_,D]),r.createElement(cn,{width:m,height:g,isEditorReady:_,loading:p,_ref:C,className:v,wrapperProps:y})};(0,r.memo)(gn);var mn=function(t){let e=(0,r.useRef)();return(0,r.useEffect)(()=>{e.current=t},[t]),e.current},vn=new Map;var yn,bn,wn,_n,xn,kn,An,Sn,En,Cn,Mn,Tn,Pn,Rn,Dn,Ln,Nn,In,Fn=function(t){let{defaultValue:e,defaultLanguage:n,defaultPath:i,value:s,language:a,path:o,theme:l="light",line:c,loading:u="Loading...",options:d={},overrideServices:p={},saveViewState:f=!0,keepCurrentModel:g=!1,width:m="100%",height:v="100%",className:y,wrapperProps:b={},beforeMount:w=dn,onMount:_=dn,onChange:x,onValidate:k=dn}=t,[A,S]=(0,r.useState)(!1),[E,C]=(0,r.useState)(!0),M=(0,r.useRef)(null),T=(0,r.useRef)(null),P=(0,r.useRef)(null),R=(0,r.useRef)(_),D=(0,r.useRef)(w),L=(0,r.useRef)(),N=(0,r.useRef)(s),I=mn(o),F=(0,r.useRef)(!1),O=(0,r.useRef)(!1);un(()=>{let t=rn.init();return t.then(t=>(M.current=t)&&C(!1)).catch(t=>"cancelation"!==(null===t||void 0===t?void 0:t.type)&&console.error("Monaco initialization: error:",t)),()=>T.current?function(){var t,e;null!==(t=L.current)&&void 0!==t&&t.dispose(),g?f&&vn.set(o,T.current.saveViewState()):null===(e=T.current.getModel())||void 0===e||e.dispose(),T.current.dispose()}():t.cancel()}),hn(()=>{var t,r,l,c;let u=pn(M.current,e||s||"",n||a||"",o||i||"");u!==(null===(t=T.current)||void 0===t?void 0:t.getModel())&&(f&&vn.set(I,null===(r=T.current)||void 0===r?void 0:r.saveViewState()),null!==(l=T.current)&&void 0!==l&&l.setModel(u),f&&(null===(c=T.current)||void 0===c||c.restoreViewState(vn.get(o))))},[o],A),hn(()=>{var t;null===(t=T.current)||void 0===t||t.updateOptions(d)},[d],A),hn(()=>{!T.current||void 0===s||(T.current.getOption(M.current.editor.EditorOption.readOnly)?T.current.setValue(s):s!==T.current.getValue()&&(O.current=!0,T.current.executeEdits("",[{range:T.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),T.current.pushUndoStop(),O.current=!1))},[s],A),hn(()=>{var t,e;let n=null===(t=T.current)||void 0===t?void 0:t.getModel();n&&a&&(null===(e=M.current)||void 0===e||e.editor.setModelLanguage(n,a))},[a],A),hn(()=>{var t;void 0!==c&&(null===(t=T.current)||void 0===t||t.revealLine(c))},[c],A),hn(()=>{var t;null===(t=M.current)||void 0===t||t.editor.setTheme(l)},[l],A);let B=(0,r.useCallback)(()=>{if(P.current&&M.current&&!F.current){var t;D.current(M.current);let r=o||i,u=pn(M.current,s||e||"",n||a||"",r||"");T.current=null===(t=M.current)||void 0===t?void 0:t.editor.create(P.current,h({model:u,automaticLayout:!0},d),p),f&&T.current.restoreViewState(vn.get(r)),M.current.editor.setTheme(l),void 0!==c&&T.current.revealLine(c),S(!0),F.current=!0}},[e,n,i,s,a,o,d,p,f,l,c]);return(0,r.useEffect)(()=>{A&&R.current(T.current,M.current)},[A]),(0,r.useEffect)(()=>{!E&&!A&&B()},[E,A,B]),N.current=s,(0,r.useEffect)(()=>{var t,e;A&&x&&(null!==(t=L.current)&&void 0!==t&&t.dispose(),L.current=null===(e=T.current)||void 0===e?void 0:e.onDidChangeModelContent(t=>{O.current||x(T.current.getValue(),t)}))},[A,x]),(0,r.useEffect)(()=>{if(A){let t=M.current.editor.onDidChangeMarkers(t=>{var e;let n=null===(e=T.current.getModel())||void 0===e?void 0:e.uri;if(n&&t.find(t=>t.path===n.path)){let t=M.current.editor.getModelMarkers({resource:n});null===k||void 0===k||k(t)}});return()=>{null===t||void 0===t||t.dispose()}}return()=>{}},[A,k]),r.createElement(cn,{width:m,height:v,isEditorReady:A,loading:u,_ref:P,className:y,wrapperProps:b})},On=(0,r.memo)(Fn);function Bn(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(r){e[i]=r,t.apply(n,e)}})}function Wn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jn(t,e){Wn(t,e),e.add(t)}function zn(t,e,n){Wn(t,e),e.set(t,n)}function Un(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Hn(t,e,n){return n(Un(t,e))}function Vn(t,e){return t.get(Un(t,e))}function Gn(t,e,n){return t.set(Un(t,e),n),n}function qn(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return qn=function(t){this.s=t,this.n=t.next},qn.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new qn(t)}const Xn="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Yn=[.001,0,0,.001,0,0],Kn=1.35,Qn=1,$n=2,Jn=4,Zn=16,ti=32,ei=64,ni=128,ii=256,ri={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},si="pdfjs_internal_editor_",ai={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},oi={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},li=0,ci=1,ui=2,hi=3,di=3,pi=4,fi={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},mi=1,vi=2,yi=3,bi=4,wi=5,_i={ERRORS:0,WARNINGS:1,INFOS:5},xi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ki=0,Ai=1,Si=2,Ei=3;let Ci=_i.WARNINGS;function Mi(t){Number.isInteger(t)&&(Ci=t)}function Ti(){return Ci}function Pi(t){Ci>=_i.INFOS&&console.info("Info: ".concat(t))}function Ri(t){Ci>=_i.WARNINGS&&console.warn("Warning: ".concat(t))}function Di(t){throw new Error(t)}function Li(t,e){t||Di(e)}function Ni(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;if(n&&"string"===typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null===e||void 0===e?void 0:e.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch(r){}}const i=e?URL.parse(t,e):URL.parse(t);return function(t){switch(null===t||void 0===t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function Ii(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(t);return i?(i.hash=e,i.href):n&&Ni(t,"http://example.com")?t.split("#",1)[0]+"".concat(e?"#".concat(e):""):""}function Fi(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Oi=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class Bi extends Oi{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Wi extends Oi{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ji extends Oi{constructor(t){super(t,"InvalidPDFException")}}class zi extends Oi{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Ui extends Oi{constructor(t){super(t,"FormatError")}}class Hi extends Oi{constructor(t){super(t,"AbortException")}}function Vi(t){"object"===typeof t&&void 0!==(null===t||void 0===t?void 0:t.length)||Di("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),a=t.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Gi(t){"string"!==typeof t&&Di("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}class qi{static get isLittleEndian(){return Fi(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return Fi(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return Fi(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return Fi(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:t,userAgent:e}=navigator;return Fi(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Fi(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Xi=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Yi{static makeHexColor(t,e,n){return"#".concat(Xi[t]).concat(Xi[e]).concat(Xi[n])}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5];for(let c=0;c<6;c+=2){const e=t[n+c],u=t[n+c+1];t[n+c]=e*i+u*s+o,t[n+c+1]=e*r+u*a+l}}static applyInverseTransform(t,e){const n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=t[0],u=t[1],h=t[2],d=t[3];let p=i*c+o,f=p,g=i*h+o,m=g,v=a*u+l,y=v,b=a*d+l,w=b;if(0!==r||0!==s){const t=r*c,e=r*h,n=s*u,i=s*d;p+=n,m+=n,g+=i,f+=i,v+=t,w+=t,b+=e,y+=e}n[0]=Math.min(n[0],p,g,f,m),n[1]=Math.min(n[1],v,b,y,w),n[2]=Math.max(n[2],p,g,f,m),n[3]=Math.max(n[3],v,b,y,w)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],a=n**2+i**2,o=n*r+i*s,l=r**2+s**2,c=(a+l)/2,u=Math.sqrt(c**2-(a*l-o**2));e[0]=Math.sqrt(c+u||1),e[1]=Math.sqrt(c-u||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>s?null:[n,r,i,s]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,n,i,r,s,a,o,l){l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o),Un(Yi,this,Qi).call(this,t,n,r,a,e,i,s,o,3*(3*(n-r)-t+a),6*(t-2*n+r),3*(n-t),l),Un(Yi,this,Qi).call(this,t,n,r,a,e,i,s,o,3*(3*(i-s)-e+o),6*(e-2*i+s),3*(i-e),l)}}function Ki(t,e,n,i,r,s,a,o,l,c){if(l<=0||l>=1)return;const u=1-l,h=l*l,d=h*l,p=u*(u*(u*t+3*l*e)+3*h*n)+d*i,f=u*(u*(u*r+3*l*s)+3*h*a)+d*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function Qi(t,e,n,i,r,s,a,o,l,c,u,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&Un(yn,this,Ki).call(this,t,e,n,i,r,s,a,o,-u/c,h));const d=c**2-4*u*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;Un(yn,this,Ki).call(this,t,e,n,i,r,s,a,o,(-c+p)/f,h),Un(yn,this,Ki).call(this,t,e,n,i,r,s,a,o,(-c-p)/f,h)}yn=Yi;let $i=null,Ji=null;function Zi(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),Vi(t)}const tr="pdfjs_internal_id_";function er(t,e,n){return Math.min(Math.max(t,e),n)}function nr(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(Vi(t))}"function"!==typeof Promise.try&&(Promise.try=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new Promise(e=>{e(t(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(t){return t.reduce((t,e)=>t+e,0)});class ir{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};return function t(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!ir.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&e.push({str:r}),n.children)for(const e of n.children)t(e)}(t),n}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}class rr{static setupStorage(t,e,n,i,r){const s=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===r)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?t.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===r)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})})}break;case"select":if(null!==s.value){t.setAttribute("value",s.value);for(const t of n.children)t.attributes.value===s.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",t=>{const n=t.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:r})})}}static setAttributes(t){let{html:e,element:n,storage:i=null,intent:r,linkService:s}=t;const{attributes:a}=n,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const a="richText"!==r,o=t.div;if(o.append(s),t.viewport){const e="matrix(".concat(t.viewport.transform.join(","),")");o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const t=document.createTextNode(i.value);s.append(t),a&&ir.shouldBuildText(i.name)&&l.push(t)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var u,h;const[t,i,s]=c.at(-1);if(i+1===t.children.length){c.pop();continue}const o=t.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const t=document.createTextNode(o.value);l.push(t),s.append(t);continue}const p=null!==o&&void 0!==o&&null!==(u=o.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(s.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:e,intent:r,linkService:n}),(null===(h=o.children)||void 0===h?void 0:h.length)>0)c.push([o,-1,p]);else if(o.value){const t=document.createTextNode(o.value);a&&ir.shouldBuildText(d)&&l.push(t),p.append(t)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}const sr="http://www.w3.org/2000/svg";class ar{}async function or(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(pr(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}bn=ar,c(ar,"CSS",96),c(ar,"PDF",72),c(ar,"PDF_TO_CSS_UNITS",bn.CSS/bn.PDF);class lr{constructor(t){let{viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}=t;this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,p,f,g,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,d=0,p=1;break;case 90:u=0,h=1,d=1,p=0;break;case 270:u=0,h=-1,d=-1,p=0;break;case 0:u=1,h=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,p=-p),0===u?(f=Math.abs(c-e[1])*i+s,g=Math.abs(l-e[0])*i+a,m=(e[3]-e[1])*i,v=(e[2]-e[0])*i):(f=Math.abs(l-e[0])*i+s,g=Math.abs(c-e[1])*i+a,m=(e[2]-e[0])*i,v=(e[3]-e[1])*i),this.transform=[u*i,h*i,d*i,p*i,f-u*i*l-d*i*c,g-h*i*l-p*i*c],this.width=m,this.height=v}get rawDims(){const t=this.viewBox;return Fi(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new lr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return Yi.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Yi.applyTransform(e,this.transform);const n=[t[2],t[3]];return Yi.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Yi.applyInverseTransform(n,this.transform),n}}class cr extends Oi{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function ur(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function hr(t){return"string"===typeof t&&/\.pdf$/i.test(t)}class dr{constructor(){c(this,"started",Object.create(null)),c(this,"times",[])}time(t){t in this.started&&Ri("Timer is already running for ".concat(t)),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ri("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push("".concat(n.padEnd(e)," ").concat(r-i,"ms\n"));return t.join("")}}function pr(t,e){const n=e?URL.parse(t,e):URL.parse(t);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function fr(t){t.preventDefault()}function gr(t){t.preventDefault(),t.stopPropagation()}class mr{static toDateObject(t){if(t instanceof Date)return t;if(!t||"string"!==typeof t)return null;Un(mr,this,vr)._||(vr._=Un(mr,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const e=Un(mr,this,vr)._.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,a+=u):"+"===l&&(s-=c,a-=u),new Date(Date.UTC(n,i,r,s,a,o))}}var vr={_:void 0};function yr(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(t=>parseInt(t)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ri('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function br(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform();return[e,n,i,r,s,a]}function wr(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,n,i,r,s,a]}function _r(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof lr){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:s}=t,a=qi.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),u=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&e.rotation%180!==0?(s.width=u,s.height=c):(s.width=c,s.height=u)}i&&t.setAttribute("data-main-rotation",e.rotation)}class xr{constructor(){const{pixelRatio:t}=xr;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,a=1/0,o=1/0;(n=xr.capPixels(n,r))>0&&(s=Math.sqrt(n/(t*e))),-1!==i&&(a=i/t,o=i/e);const l=Math.min(s,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const kr=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Ar{static get isDarkMode(){var t,e;return Fi(this,"isDarkMode",!(null===(t=window)||void 0===t||null===(e=t.matchMedia)||void 0===e||!e.call(t,"(prefers-color-scheme: dark)").matches))}}function Sr(t,e){const n=t[0]/255,i=t[1]/255,r=t[2]/255,s=Math.max(n,i,r),a=Math.min(n,i,r),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const t=s-a;switch(e[1]=o<.5?t/(s+a):t/(2-s-a),s){case n:e[0]=60*((i-r)/t+(i<r?6:0));break;case i:e[0]=60*((r-n)/t+2);break;case r:e[0]=60*((n-i)/t+4)}}e[2]=o}function Er(t,e){const n=t[0],i=t[1],r=t[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(n/60%2-1)),o=r-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o}}function Cr(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function Mr(t,e,n){Er(t,n),n.map(Cr);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];Er(e,n),n.map(Cr);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const Tr=new Map;function Pr(t,e){let{html:n,dir:i,className:r}=t;const s=document.createDocumentFragment();if("string"===typeof n){const t=document.createElement("p");t.dir=i||"auto";const e=n.split(/(?:\r\n?|\n)/);for(let n=0,i=e.length;n<i;++n){const r=e[n];t.append(document.createTextNode(r)),n<i-1&&t.append(document.createElement("br"))}s.append(t)}else rr.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",r),e.append(s)}var Rr=new WeakMap,Dr=new WeakMap,Lr=new WeakMap,Nr=new WeakMap,Ir=new WeakMap,Fr=new WeakMap,Or=new WeakMap,Br=new WeakMap,Wr=new WeakSet;class jr{constructor(t){jn(this,Wr),zn(this,Rr,null),zn(this,Dr,null),zn(this,Lr,void 0),zn(this,Nr,null),zn(this,Ir,null),zn(this,Fr,null),zn(this,Or,null),zn(this,Br,null),Gn(Lr,this,t),qr._||(qr._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=Gn(Rr,this,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=Vn(Lr,this)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",fr,{signal:e}),t.addEventListener("pointerdown",zr,{signal:e}));const n=Gn(Nr,this,document.createElement("div"));n.className="buttons",t.append(n);const i=Vn(Lr,this).toolbarPosition;if(i){const{style:e}=t,n="ltr"===Vn(Lr,this)._uiManager.direction?1-i[0]:i[0];e.insetInlineEnd="".concat(100*n,"%"),e.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return t}get div(){return Vn(Rr,this)}hide(){var t;Vn(Rr,this).classList.add("hidden"),null===(t=Vn(Dr,this))||void 0===t||t.hideDropdown()}show(){var t,e;Vn(Rr,this).classList.remove("hidden"),null===(t=Vn(Ir,this))||void 0===t||t.shown(),null===(e=Vn(Fr,this))||void 0===e||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=Vn(Lr,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",qr._[t]),Un(Wr,this,Vr).call(this,n)&&n.addEventListener("click",t=>{e.delete()},{signal:e._signal}),Vn(Nr,this).append(n)}async addAltText(t){const e=await t.render();Un(Wr,this,Vr).call(this,e),Vn(Nr,this).append(e,Hn(Wr,this,Gr)),Gn(Ir,this,t)}addComment(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Vn(Fr,this))return;const n=t.renderForToolbar();if(!n)return;Un(Wr,this,Vr).call(this,n);const i=Gn(Or,this,Hn(Wr,this,Gr));e?(Vn(Nr,this).insertBefore(n,e),Vn(Nr,this).insertBefore(i,e)):Vn(Nr,this).append(n,i),Gn(Fr,this,t),t.toolbar=this}addColorPicker(t){if(Vn(Dr,this))return;Gn(Dr,this,t);const e=t.renderButton();Un(Wr,this,Vr).call(this,e),Vn(Nr,this).append(e,Hn(Wr,this,Gr))}async addEditSignatureButton(t){const e=Gn(Br,this,await t.renderEditButton(Vn(Lr,this)));Un(Wr,this,Vr).call(this,e),Vn(Nr,this).append(e,Hn(Wr,this,Gr))}removeButton(t){var e,n;if("comment"===t)null===(e=Vn(Fr,this))||void 0===e||e.removeToolbarCommentButton(),Gn(Fr,this,null),null===(n=Vn(Or,this))||void 0===n||n.remove(),Gn(Or,this,null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e)}}async addButtonBefore(t,e,n){const i=Vn(Nr,this).querySelector(n);i&&"comment"===t&&this.addComment(e,i)}updateEditSignatureButton(t){Vn(Br,this)&&(Vn(Br,this).title=t)}remove(){var t;Vn(Rr,this).remove(),null===(t=Vn(Dr,this))||void 0===t||t.destroy(),Gn(Dr,this,null)}}function zr(t){t.stopPropagation()}function Ur(t){Vn(Lr,this)._focusEventsAllowed=!1,gr(t)}function Hr(t){Vn(Lr,this)._focusEventsAllowed=!0,gr(t)}function Vr(t){const e=Vn(Lr,this)._uiManager._signal;return e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("focusin",Un(Wr,this,Ur).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",Un(Wr,this,Hr).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",fr,{signal:e}),!0)}function Gr(t){const e=document.createElement("div");return e.className="divider",e}var qr={_:null},Xr=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Qr=new WeakSet;class $r{constructor(t){jn(this,Qr),zn(this,Xr,null),zn(this,Yr,null),zn(this,Kr,void 0),Gn(Kr,this,t)}show(t,e,n){const[i,r]=Un(Qr,this,Zr).call(this,e,n),{style:s}=Vn(Yr,this)||Gn(Yr,this,Un(Qr,this,Jr).call(this));t.append(Vn(Yr,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){Vn(Yr,this).remove()}}function Jr(){const t=Gn(Yr,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=Vn(Kr,this)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",fr,{signal:e});const n=Gn(Xr,this,document.createElement("div"));return n.className="buttons",t.append(n),Vn(Kr,this).hasCommentManager()&&Un(Qr,this,ts).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Vn(Kr,this).commentSelection("floating_button")}),Un(Qr,this,ts).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Vn(Kr,this).highlightSelection("floating_button")}),t}function Zr(t,e){let n=0,i=0;for(const r of t){const t=r.y+r.height;if(t<n)continue;const s=r.x+(e?r.width:0);t>n?(i=s,n=t):e?s>i&&(i=s):s<i&&(i=s)}return[e?1-i:i,n]}function ts(t,e,n,i){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const s=document.createElement("span");r.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const a=Vn(Kr,this)._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",fr,{signal:a}),r.addEventListener("click",i,{signal:a})),Vn(Xr,this).append(r)}function es(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}var ns=new WeakMap;class is{constructor(){zn(this,ns,0)}get id(){var t,e;return"".concat(si).concat((Gn(ns,this,(t=Vn(ns,this),e=t++,t)),e))}}var rs=new WeakMap,ss=new WeakMap,as=new WeakMap,os=new WeakSet;class ls{constructor(){jn(this,os),zn(this,rs,Zi()),zn(this,ss,0),zn(this,as,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Fi(this,"_isSVGFittingCanvas",e.decode().then(()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return Un(os,this,cs).call(this,"".concat(e,"_").concat(n,"_").concat(i,"_").concat(r),t)}async getFromUrl(t){return Un(os,this,cs).call(this,t,t)}async getFromBlob(t,e){const n=await e;return Un(os,this,cs).call(this,t,n)}async getFromId(t){Vn(as,this)||Gn(as,this,new Map);const e=Vn(as,this).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){var n,i,r;Vn(as,this)||Gn(as,this,new Map);let s=Vn(as,this).get(t);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(Vn(rs,this),"_").concat((Gn(ss,this,(n=Vn(ss,this),i=n++,n)),i)),refCounter:1,isSvg:!1},Vn(as,this).set(t,s),Vn(as,this).set(s.id,s),s}getSvgUrl(t){const e=Vn(as,this).get(t);return null!==e&&void 0!==e&&e.isSvg?e.svgUrl:null}deleteId(t){var e;Vn(as,this)||Gn(as,this,new Map);const n=Vn(as,this).get(t);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const t=new OffscreenCanvas(i.width,i.height);t.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=t.convertToBlob()}null===(e=i.close)||void 0===e||e.call(i),n.bitmap=null}isValidId(t){return t.startsWith("image_".concat(Vn(rs,this),"_"))}}async function cs(t,e){var n;Vn(as,this)||Gn(as,this,new Map);let i=Vn(as,this).get(t);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let t;if(i||(i={bitmap:null,id:"image_".concat(Vn(rs,this),"_").concat((Gn(ss,this,(r=Vn(ss,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof e?(i.url=e,t=await or(e,"blob")):e instanceof File?t=i.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=wn._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((t,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;r.src=await e?"".concat(t,"#svgView(preserveAspectRatio(none))"):t},r.onerror=n.onerror=s});n.readAsDataURL(t),await s}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(K_){Ri(K_),i=null}return Vn(as,this).set(t,i),i&&Vn(as,this).set(i.id,i),i}wn=ls;var us=new WeakMap,hs=new WeakMap,ds=new WeakMap,ps=new WeakMap;class fs{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;zn(this,us,[]),zn(this,hs,!1),zn(this,ds,void 0),zn(this,ps,-1),Gn(ds,this,t)}add(t){let{cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(r&&e(),Vn(hs,this))return;const l={cmd:e,undo:n,post:i,type:s};if(-1===Vn(ps,this))return Vn(us,this).length>0&&(Vn(us,this).length=0),Gn(ps,this,0),void Vn(us,this).push(l);if(a&&Vn(us,this)[Vn(ps,this)].type===s)return o&&(l.undo=Vn(us,this)[Vn(ps,this)].undo),void(Vn(us,this)[Vn(ps,this)]=l);const c=Vn(ps,this)+1;c===Vn(ds,this)?Vn(us,this).splice(0,1):(Gn(ps,this,c),c<Vn(us,this).length&&Vn(us,this).splice(c)),Vn(us,this).push(l)}undo(){if(-1===Vn(ps,this))return;Gn(hs,this,!0);const{undo:t,post:e}=Vn(us,this)[Vn(ps,this)];t(),null===e||void 0===e||e(),Gn(hs,this,!1),Gn(ps,this,Vn(ps,this)-1)}redo(){if(Vn(ps,this)<Vn(us,this).length-1){Gn(ps,this,Vn(ps,this)+1),Gn(hs,this,!0);const{cmd:t,post:e}=Vn(us,this)[Vn(ps,this)];t(),null===e||void 0===e||e(),Gn(hs,this,!1)}}hasSomethingToUndo(){return-1!==Vn(ps,this)}hasSomethingToRedo(){return Vn(ps,this)<Vn(us,this).length-1}cleanType(t){if(-1!==Vn(ps,this)){for(let e=Vn(ps,this);e>=0;e--)if(Vn(us,this)[e].type!==t)return Vn(us,this).splice(e+1,Vn(ps,this)-e),void Gn(ps,this,e);Vn(us,this).length=0,Gn(ps,this,-1)}}destroy(){Gn(us,this,null)}}var gs=new WeakSet;class ms{constructor(t){jn(this,gs),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=qi.platform;for(const[n,i,r={}]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(Un(gs,this,vs).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...s,e)(),r||gr(e))}}function vs(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}class ys{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,yr(i))}e.remove()}(t),Fi(this,"_colors",t)}convert(t){const e=yr(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((t,n)=>t===e[n]))return ys._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Yi.makeHexColor(...e):t}}c(ys,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var bs=new WeakMap,ws=new WeakMap,_s=new WeakMap,xs=new WeakMap,ks=new WeakMap,As=new WeakMap,Ss=new WeakMap,Es=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Ts=new WeakMap,Ps=new WeakMap,Rs=new WeakMap,Ds=new WeakMap,Ls=new WeakMap,Ns=new WeakMap,Is=new WeakMap,Fs=new WeakMap,Os=new WeakMap,Bs=new WeakMap,Ws=new WeakMap,js=new WeakMap,zs=new WeakMap,Us=new WeakMap,Hs=new WeakMap,Vs=new WeakMap,Gs=new WeakMap,qs=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,$s=new WeakMap,Js=new WeakMap,Zs=new WeakMap,ta=new WeakMap,ea=new WeakMap,na=new WeakMap,ia=new WeakMap,ra=new WeakMap,sa=new WeakMap,aa=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,ha=new WeakMap,da=new WeakMap,pa=new WeakMap,fa=new WeakSet;class ga{static get _keyboardManager(){const t=ga.prototype,e=t=>Vn(ua,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),n=(t,e)=>{let{target:n}=e;if(n instanceof HTMLInputElement){const{type:t}=n;return"text"!==t&&"number"!==t}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Fi(this,"_keyboardManager",new ms([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&Vn(ua,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&Vn(ua,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,n,i,r,s,a,o,l,u,h,d,p,f,g,m){jn(this,fa),zn(this,bs,new AbortController),zn(this,ws,null),zn(this,_s,null),zn(this,xs,new Map),zn(this,ks,new Map),zn(this,As,null),zn(this,Ss,null),zn(this,Es,null),zn(this,Cs,new fs),zn(this,Ms,null),zn(this,Ts,null),zn(this,Ps,null),zn(this,Rs,0),zn(this,Ds,new Set),zn(this,Ls,null),zn(this,Ns,null),zn(this,Is,new Set),c(this,"_editorUndoBar",null),zn(this,Fs,!1),zn(this,Os,!1),zn(this,Bs,!1),zn(this,Ws,null),zn(this,js,null),zn(this,zs,null),zn(this,Us,null),zn(this,Hs,!1),zn(this,Vs,null),zn(this,Gs,new is),zn(this,qs,!1),zn(this,Xs,!1),zn(this,Ys,!1),zn(this,Ks,null),zn(this,Qs,null),zn(this,$s,null),zn(this,Js,null),zn(this,Zs,null),zn(this,ta,ai.NONE),zn(this,ea,new Set),zn(this,na,null),zn(this,ia,null),zn(this,ra,null),zn(this,sa,null),zn(this,aa,null),zn(this,oa,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),zn(this,la,[0,0]),zn(this,ca,null),zn(this,ua,null),zn(this,ha,null),zn(this,da,null),zn(this,pa,null);const v=this._signal=Vn(bs,this).signal;Gn(ua,this,t),Gn(ha,this,e),Gn(da,this,n),Gn(As,this,i),Gn(Ms,this,r),Gn(ia,this,s),Gn(aa,this,o),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",t=>this.updateParams(t.type,t.value),{signal:v}),window.addEventListener("pointerdown",()=>{Gn(Xs,this,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{Gn(Xs,this,!1)},{capture:!0,signal:v}),Un(fa,this,_a).call(this),Un(fa,this,Ma).call(this),Un(fa,this,Aa).call(this),Gn(Ss,this,o.annotationStorage),Gn(Ws,this,o.filterFactory),Gn(ra,this,l),Gn(Us,this,u||null),Gn(Fs,this,h),Gn(Os,this,d),Gn(Bs,this,p),Gn(Zs,this,f||null),this.viewParameters={realScale:ar.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=!1!==m,null===r||void 0===r||r.setSidebarUiManager(this)}destroy(){var t,e,n,i,r,s,a,o,l;null===(t=Vn(pa,this))||void 0===t||t.resolve(),Gn(pa,this,null),null===(e=Vn(bs,this))||void 0===e||e.abort(),Gn(bs,this,null),this._signal=null;for(const c of Vn(ks,this).values())c.destroy();Vn(ks,this).clear(),Vn(xs,this).clear(),Vn(Is,this).clear(),null===(n=Vn(Js,this))||void 0===n||n.clear(),Gn(ws,this,null),Vn(ea,this).clear(),Vn(Cs,this).destroy(),null===(i=Vn(As,this))||void 0===i||i.destroy(),null===(r=Vn(Ms,this))||void 0===r||r.destroy(),null===(s=Vn(ia,this))||void 0===s||s.destroy(),null===(a=Vn(Vs,this))||void 0===a||a.hide(),Gn(Vs,this,null),null===(o=Vn($s,this))||void 0===o||o.destroy(),Gn($s,this,null),Gn(_s,this,null),Vn(js,this)&&(clearTimeout(Vn(js,this)),Gn(js,this,null)),Vn(ca,this)&&(clearTimeout(Vn(ca,this)),Gn(ca,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),Gn(aa,this,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return Vn(Zs,this)}get useNewAltTextFlow(){return Vn(Os,this)}get useNewAltTextWhenAddingImage(){return Vn(Bs,this)}get hcmFilter(){return Fi(this,"hcmFilter",Vn(ra,this)?Vn(Ws,this).addHCMFilter(Vn(ra,this).foreground,Vn(ra,this).background):"none")}get direction(){return Fi(this,"direction",getComputedStyle(Vn(ua,this)).direction)}get _highlightColors(){return Fi(this,"_highlightColors",Vn(Us,this)?new Map(Vn(Us,this).split(",").map(t=>((t=t.split("=").map(t=>t.trim()))[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Fi(this,"highlightColors",null);const e=new Map,n=!!Vn(ra,this);for(const[i,r]of t){const t=i.endsWith("_HCM");n&&t?e.set(i.replace("_HCM",""),r):n||t||e.set(i,r)}return Fi(this,"highlightColors",e)}get highlightColorNames(){return Fi(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Gn(Ps,this,t)}setMainHighlightColorPicker(t){Gn($s,this,t)}editAltText(t){var e;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=Vn(As,this))||void 0===e||e.editAltText(this,t,n)}hasCommentManager(){return!!Vn(Ms,this)}editComment(t,e,n,i){var r;null===(r=Vn(Ms,this))||void 0===r||r.showDialog(this,t,e,n,i)}selectComment(t,e){const n=Vn(ks,this).get(t),i=null===n||void 0===n?void 0:n.getEditorByUID(e);null===i||void 0===i||i.toggleComment(!0,!0)}updateComment(t){var e;null===(e=Vn(Ms,this))||void 0===e||e.updateComment(t.getData())}updatePopupColor(t){var e;null===(e=Vn(Ms,this))||void 0===e||e.updatePopupColor(t)}removeComment(t){var e;null===(e=Vn(Ms,this))||void 0===e||e.removeComments([t.uid])}toggleComment(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===(n=Vn(Ms,this))||void 0===n||n.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){var n;return t&&(null===(n=Vn(Ms,this))||void 0===n?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return(null===(t=Vn(Ms,this))||void 0===t?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(Vn(ks,this).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=n=>{n.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){var e;null===(e=Vn(ia,this))||void 0===e||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return Vn(ia,this)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference(t){let{name:e,value:n}=t;if("enableNewAltTextWhenAddingImage"===e)Gn(Bs,this,n)}onPageChanging(t){let{pageNumber:e}=t;Gn(Rs,this,e-1)}focusMainContainer(){Vn(ua,this).focus()}findParent(t,e){for(const n of Vn(ks,this).values()){const{x:i,y:r,width:s,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+s&&e>=r&&e<=r+a)return n}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Vn(ha,this).classList.toggle("noUserSelect",t)}addShouldRescale(t){Vn(Is,this).add(t)}removeShouldRescale(t){Vn(Is,this).delete(t)}onScaleChanging(t){var e;let{scale:n}=t;this.commitOrRemove(),this.viewParameters.realScale=n*ar.PDF_TO_CSS_UNITS;for(const i of Vn(Is,this))i.onScaleChanging();null===(e=Vn(Ps,this))||void 0===e||e.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=n,o=n.toString(),l=Un(fa,this,ma).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const u=Un(fa,this,va).call(this,l),h=Vn(ta,this)===ai.NONE,d=()=>{const n=null===u||void 0===u?void 0:u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:c,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o});h&&this.showAllEditors("highlight",!0,!0),e&&(null===n||void 0===n||n.editComment())};h?this.switchToMode(ai.HIGHLIGHT,d):d()}commentSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!Vn(Ss,this))return null;const e="".concat(si).concat(t),n=Vn(Ss,this).getRawValue(e);return n&&Vn(Ss,this).remove(e),n}addToAnnotationStorage(t){t.isEmpty()||!Vn(Ss,this)||Vn(Ss,this).has(t.id)||Vn(Ss,this).setValue(t.id,t)}a11yAlert(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Vn(da,this);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Vn(Hs,this)&&(Gn(Hs,this,!1),Un(fa,this,wa).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of Vn(ea,this))if(e.div.contains(t)){Gn(Qs,this,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!Vn(Qs,this))return;const[t,e]=Vn(Qs,this);Gn(Qs,this,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){Un(fa,this,Aa).call(this),Un(fa,this,Ea).call(this)}removeEditListeners(){Un(fa,this,Sa).call(this),Un(fa,this,Ca).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of Vn(Ns,this))if(n.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const n of Vn(Ns,this))if(n.isHandlingMimeForPasting(e.type))return n.paste(e,this.currentLayer),void t.preventDefault()}copy(t){var e;if(t.preventDefault(),null===(e=Vn(ws,this))||void 0===e||e.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of Vn(ea,this)){const t=i.serialize(!0);t&&n.push(t)}0!==n.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const t of Vn(Ns,this))if(t.isHandlingMimeForPasting(s.type))return void t.paste(s,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void Ri('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const t=[];for(const s of n){const e=await i.deserialize(s);if(!e)return;t.push(e)}const e=()=>{for(const e of t)Un(fa,this,La).call(this,e);Un(fa,this,Fa).call(this,t)},r=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:r,mustExec:!0})}catch(r){Ri('paste: "'.concat(r.message,'".'))}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),Vn(ta,this)===ai.NONE||this.isEditorHandlingKeyboard||ga._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,Vn(Hs,this)&&(Gn(Hs,this,!1),Un(fa,this,wa).call(this,"main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(t){t?(Un(fa,this,xa).call(this),Un(fa,this,Ea).call(this),Un(fa,this,Ta).call(this,{isEditing:Vn(ta,this)!==ai.NONE,isEmpty:Un(fa,this,Ia).call(this),hasSomethingToUndo:Vn(Cs,this).hasSomethingToUndo(),hasSomethingToRedo:Vn(Cs,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(Un(fa,this,ka).call(this),Un(fa,this,Ca).call(this),Un(fa,this,Ta).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!Vn(Ns,this)){Gn(Ns,this,t);for(const t of Vn(Ns,this))Un(fa,this,Pa).call(this,t.defaultPropertiesToUpdate)}}getId(){return Vn(Gs,this).id}get currentLayer(){return Vn(ks,this).get(Vn(Rs,this))}getLayer(t){return Vn(ks,this).get(t)}get currentPageIndex(){return Vn(Rs,this)}addLayer(t){Vn(ks,this).set(t.pageIndex,t),Vn(qs,this)?t.enable():t.disable()}removeLayer(t){Vn(ks,this).delete(t.pageIndex)}async updateMode(t){var e,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Vn(ta,this)!==t&&(!Vn(pa,this)||(await Vn(pa,this).promise,Vn(pa,this)))){var o,l;if(Gn(pa,this,Promise.withResolvers()),null===(e=Vn(Ps,this))||void 0===e||e.commitOrRemove(),Vn(ta,this)===ai.POPUP)null===(o=Vn(Ms,this))||void 0===o||o.hideSidebar();if(null===(n=Vn(Ms,this))||void 0===n||n.destroyPopup(),Gn(ta,this,t),t===ai.NONE){var c;this.setEditingState(!1),Un(fa,this,Da).call(this);for(const t of Vn(xs,this).values())t.hideStandaloneCommentButton();return null===(c=this._editorUndoBar)||void 0===c||c.hide(),this.toggleComment(null),void Vn(pa,this).resolve()}for(const t of Vn(xs,this).values())t.addStandaloneCommentButton();if(t===ai.SIGNATURE)await(null===(l=Vn(ia,this))||void 0===l?void 0:l.loadSignatures());this.setEditingState(!0),await Un(fa,this,Ra).call(this),this.unselectAll();for(const e of Vn(ks,this).values())e.updateMode(t);if(t===ai.POPUP){var u;Vn(_s,this)||Gn(_s,this,await Vn(aa,this).getAnnotationsByType(new Set(Vn(Ns,this).map(t=>t._editorType))));const t=new Set,e=[];for(const n of Vn(xs,this).values()){const{annotationElementId:i,hasComment:r,deleted:s}=n;i&&t.add(i),r&&!s&&e.push(n.getData())}for(const n of Vn(_s,this)){const{id:i,popupRef:r,contentsObj:s}=n;r&&null!==s&&void 0!==s&&s.str&&!t.has(i)&&!Vn(Ds,this).has(i)&&e.push(n)}null===(u=Vn(Ms,this))||void 0===u||u.showSidebar(e)}if(!i)return r&&this.addNewEditorFromKeyboard(),void Vn(pa,this).resolve();for(const t of Vn(xs,this).values())t.uid===i?(this.setSelected(t),a?t.editComment():s?t.enterInEditMode():t.focus()):t.unselect();Vn(pa,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==Vn(ta,this)&&this._eventBus.dispatch("switchannotationeditormode",h({source:this},t))}updateParams(t,e){if(Vn(Ns,this)){switch(t){case oi.CREATE:return void this.currentLayer.addNewEditor(e);case oi.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Vn(sa,this)||Gn(sa,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}if(this.hasSelection)for(const n of Vn(ea,this))n.updateParams(t,e);else for(const n of Vn(Ns,this))n.updateDefaultParams(t,e)}}showAllEditors(t,e){var n,i;for(const r of Vn(xs,this).values())r.editorType===t&&r.show(e);(null===(n=null===(i=Vn(sa,this))||void 0===i?void 0:i.get(oi.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&Un(fa,this,Pa).call(this,[[oi.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Vn(Ys,this)!==t){Gn(Ys,this,t);for(const e of Vn(ks,this).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of Vn(xs,this).values())e.pageIndex===t&&(yield e)}getEditor(t){return Vn(xs,this).get(t)}addEditor(t){Vn(xs,this).set(t.id,t)}removeEditor(t){var e,n;(t.div.contains(document.activeElement)&&(Vn(js,this)&&clearTimeout(Vn(js,this)),Gn(js,this,setTimeout(()=>{this.focusMainContainer(),Gn(js,this,null)},0))),Vn(xs,this).delete(t.id),t.annotationElementId)&&(null===(e=Vn(Js,this))||void 0===e||e.delete(t.annotationElementId));(this.unselect(t),t.annotationElementId&&Vn(Ds,this).has(t.annotationElementId))||(null===(n=Vn(Ss,this))||void 0===n||n.remove(t.id))}addDeletedAnnotationElement(t){Vn(Ds,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return Vn(Ds,this).has(t)}removeDeletedAnnotationElement(t){Vn(Ds,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){Vn(ws,this)!==t&&(Gn(ws,this,t),t&&Un(fa,this,Pa).call(this,t.propertiesToUpdate))}updateUI(t){Hn(fa,this,Na)===t&&Un(fa,this,Pa).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){Un(fa,this,Pa).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(Vn(ea,this).has(t))return Vn(ea,this).delete(t),t.unselect(),void Un(fa,this,Ta).call(this,{hasSelectedEditor:this.hasSelection});Vn(ea,this).add(t),t.select(),Un(fa,this,Pa).call(this,t.propertiesToUpdate),Un(fa,this,Ta).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),null===(e=Vn(Ps,this))||void 0===e||e.commitOrRemove();for(const n of Vn(ea,this))n!==t&&n.unselect();Vn(ea,this).clear(),Vn(ea,this).add(t),t.select(),Un(fa,this,Pa).call(this,t.propertiesToUpdate),Un(fa,this,Ta).call(this,{hasSelectedEditor:!0})}isSelected(t){return Vn(ea,this).has(t)}get firstSelectedEditor(){return Vn(ea,this).values().next().value}unselect(t){t.unselect(),Vn(ea,this).delete(t),Un(fa,this,Ta).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Vn(ea,this).size}get isEnterHandled(){return 1===Vn(ea,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var t;Vn(Cs,this).undo(),Un(fa,this,Ta).call(this,{hasSomethingToUndo:Vn(Cs,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Un(fa,this,Ia).call(this)}),null===(t=this._editorUndoBar)||void 0===t||t.hide()}redo(){Vn(Cs,this).redo(),Un(fa,this,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Vn(Cs,this).hasSomethingToRedo(),isEmpty:Un(fa,this,Ia).call(this)})}addCommands(t){Vn(Cs,this).add(t),Un(fa,this,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Un(fa,this,Ia).call(this)})}cleanUndoStack(t){Vn(Cs,this).cleanType(t)}delete(){var t;this.commitOrRemove();const e=null===(t=this.currentLayer)||void 0===t?void 0:t.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...Vn(ea,this)],i=()=>{for(const t of n)Un(fa,this,La).call(this,t)};this.addCommands({cmd:()=>{var t;null===(t=this._editorUndoBar)||void 0===t||t.show(i,1===n.length?n[0].editorType:n.length);for(const e of n)e.remove()},undo:i,mustExec:!0})}commitOrRemove(){var t;null===(t=Vn(ws,this))||void 0===t||t.commitOrRemove()}hasSomethingToControl(){return Vn(ws,this)||this.hasSelection}selectAll(){for(const t of Vn(ea,this))t.commit();Un(fa,this,Fa).call(this,Vn(xs,this).values())}unselectAll(){var t;if((!Vn(ws,this)||(Vn(ws,this).commitOrRemove(),Vn(ta,this)===ai.NONE))&&(null===(t=Vn(Ps,this))||void 0===t||!t.commitOrRemove())&&this.hasSelection){for(const t of Vn(ea,this))t.unselect();Vn(ea,this).clear(),Un(fa,this,Ta).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;Vn(la,this)[0]+=t,Vn(la,this)[1]+=e;const[n,i]=Vn(la,this),r=[...Vn(ea,this)];Vn(ca,this)&&clearTimeout(Vn(ca,this)),Gn(ca,this,setTimeout(()=>{Gn(ca,this,null),Vn(la,this)[0]=Vn(la,this)[1]=0,this.addCommands({cmd:()=>{for(const t of r)Vn(xs,this).has(t.id)&&(t.translateInPage(n,i),t.translationDone())},undo:()=>{for(const t of r)Vn(xs,this).has(t.id)&&(t.translateInPage(-n,-i),t.translationDone())},mustExec:!1})},1e3));for(const s of r)s.translateInPage(t,e),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Gn(Ls,this,new Map);for(const t of Vn(ea,this))Vn(Ls,this).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Vn(Ls,this))return!1;this.disableUserSelect(!1);const t=Vn(Ls,this);Gn(Ls,this,null);let e=!1;for(const[{x:i,y:r,pageIndex:s},a]of t)a.newX=i,a.newY=r,a.newPageIndex=s,e||(e=i!==a.savedX||r!==a.savedY||s!==a.savedPageIndex);if(!e)return!1;const n=(t,e,n,i)=>{if(Vn(xs,this).has(t.id)){const r=Vn(ks,this).get(i);r?t._setParentAndPosition(r,e,n):(t.pageIndex=i,t.x=e,t.y=n)}};return this.addCommands({cmd:()=>{for(const[e,{newX:i,newY:r,newPageIndex:s}]of t)n(e,i,r,s)},undo:()=>{for(const[e,{savedX:i,savedY:r,savedPageIndex:s}]of t)n(e,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(Vn(Ls,this))for(const n of Vn(Ls,this).keys())n.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===Vn(ea,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return Vn(ws,this)===t}getActive(){return Vn(ws,this)}getMode(){return Vn(ta,this)}isEditingMode(){return Vn(ta,this)!==ai.NONE}get imageManager(){return Fi(this,"imageManager",new ls)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,c=e.rangeCount;l<c;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-i)/s,y:1-(t+a-n)/r,width:o/s,height:a/r});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-n)/r,y:1-(e+o-i)/s,width:a/r,height:o/s});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-i)/s,y:(t-n)/r,width:o/s,height:a/r});break;default:a=(t,e,a,o)=>({x:(t-n)/r,y:(e-i)/s,width:a/r,height:o/s})}const o=[];for(let l=0,c=e.rangeCount;l<c;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:n,width:i,height:r}of t.getClientRects())0!==i&&0!==r&&o.push(a(e,n,i,r))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:n}=t;(Vn(Es,this)||Gn(Es,this,new Map)).set(e,n)}removeChangedExistingAnnotation(t){var e;let{annotationElementId:n}=t;null===(e=Vn(Es,this))||void 0===e||e.delete(n)}renderAnnotationElement(t){var e;const n=null===(e=Vn(Es,this))||void 0===e?void 0:e.get(t.data.id);if(!n)return;const i=Vn(Ss,this).getRawValue(n);i&&(Vn(ta,this)!==ai.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}setMissingCanvas(t,e,n){var i;const r=null===(i=Vn(Js,this))||void 0===i?void 0:i.get(t);r&&(r.setCanvas(e,n),Vn(Js,this).delete(t))}addMissingCanvas(t,e){(Vn(Js,this)||Gn(Js,this,new Map)).set(t,e)}}function ma(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function va(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of Vn(ks,this).values())if(n.hasTextLayer(t))return n;return null}function ya(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=Un(fa,this,ma).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(Vn(Vs,this)||Gn(Vs,this,new $r(this)),Vn(Vs,this).show(e,n,"ltr"===this.direction))}function ba(){var t;const e=document.getSelection();if(!e||e.isCollapsed){var n;if(Vn(na,this))null===(n=Vn(Vs,this))||void 0===n||n.hide(),Gn(na,this,null),Un(fa,this,Ta).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=e;if(i===Vn(na,this))return;const r=Un(fa,this,ma).call(this,e).closest(".textLayer");var s;if(r){if(null===(t=Vn(Vs,this))||void 0===t||t.hide(),Gn(na,this,i),Un(fa,this,Ta).call(this,{hasSelectedText:!0}),(Vn(ta,this)===ai.HIGHLIGHT||Vn(ta,this)===ai.NONE)&&(Vn(ta,this)===ai.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Gn(Hs,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=Vn(ta,this)===ai.HIGHLIGHT?Un(fa,this,va).call(this,r):null;if(null===t||void 0===t||t.toggleDrawing(),Vn(Xs,this)){const e=new AbortController,n=this.combinedSignal(e),i=n=>{"pointerup"===n.type&&0!==n.button||(e.abort(),null===t||void 0===t||t.toggleDrawing(!0),"pointerup"===n.type&&Un(fa,this,wa).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else null===t||void 0===t||t.toggleDrawing(!0),Un(fa,this,wa).call(this,"main_toolbar")}}else Vn(na,this)&&(null===(s=Vn(Vs,this))||void 0===s||s.hide(),Gn(na,this,null),Un(fa,this,Ta).call(this,{hasSelectedText:!1}))}function wa(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Vn(ta,this)===ai.HIGHLIGHT?this.highlightSelection(t):Vn(Fs,this)&&Un(fa,this,ya).call(this)}function _a(){document.addEventListener("selectionchange",Un(fa,this,ba).bind(this),{signal:this._signal})}function xa(){if(Vn(zs,this))return;Gn(zs,this,new AbortController);const t=this.combinedSignal(Vn(zs,this));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}function ka(){var t;null===(t=Vn(zs,this))||void 0===t||t.abort(),Gn(zs,this,null)}function Aa(){if(Vn(Ks,this))return;Gn(Ks,this,new AbortController);const t=this.combinedSignal(Vn(Ks,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}function Sa(){var t;null===(t=Vn(Ks,this))||void 0===t||t.abort(),Gn(Ks,this,null)}function Ea(){if(Vn(Ts,this))return;Gn(Ts,this,new AbortController);const t=this.combinedSignal(Vn(Ts,this));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}function Ca(){var t;null===(t=Vn(Ts,this))||void 0===t||t.abort(),Gn(Ts,this,null)}function Ma(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function Ta(t){Object.entries(t).some(t=>{let[e,n]=t;return Vn(oa,this)[e]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Vn(oa,this),t)}),Vn(ta,this)===ai.HIGHLIGHT&&!1===t.hasSelectedEditor&&Un(fa,this,Pa).call(this,[[oi.HIGHLIGHT_FREE,!0]]))}function Pa(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}async function Ra(){if(!Vn(qs,this)){Gn(qs,this,!0);const t=[];for(const e of Vn(ks,this).values())t.push(e.enable());await Promise.all(t);for(const e of Vn(xs,this).values())e.enable()}}function Da(){if(this.unselectAll(),Vn(qs,this)){Gn(qs,this,!1);for(const t of Vn(ks,this).values())t.disable();for(const t of Vn(xs,this).values())t.disable()}}function La(t){const e=Vn(ks,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function Na(t){let e=null;for(e of Vn(ea,t));return e}function Ia(){if(0===Vn(xs,this).size)return!0;if(1===Vn(xs,this).size)for(const t of Vn(xs,this).values())return t.isEmpty();return!1}function Fa(t){for(const e of Vn(ea,this))e.unselect();Vn(ea,this).clear();for(const e of t)e.isEmpty()||(Vn(ea,this).add(e),e.select());Un(fa,this,Ta).call(this,{hasSelectedEditor:this.hasSelection})}c(ga,"TRANSLATE_SMALL",1),c(ga,"TRANSLATE_BIG",10);var Oa=new WeakMap,Ba=new WeakMap,Wa=new WeakMap,ja=new WeakMap,za=new WeakMap,Ua=new WeakMap,Ha=new WeakMap,Va=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Ka=new WeakSet;class Qa{constructor(t){jn(this,Ka),zn(this,Oa,null),zn(this,Ba,!1),zn(this,Wa,null),zn(this,ja,null),zn(this,za,null),zn(this,Ua,null),zn(this,Ha,!1),zn(this,Va,null),zn(this,Ga,null),zn(this,qa,null),zn(this,Xa,null),zn(this,Ya,!1),Gn(Ga,this,t),Gn(Ya,this,t._uiManager.useNewAltTextFlow),Za._||(Za._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){var e;null!==(e=Qa._l10n)&&void 0!==e||(Qa._l10n=t)}async render(){const t=Gn(Wa,this,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=Gn(ja,this,document.createElement("span"));t.append(e),Vn(Ya,this)?(t.classList.add("new"),t.setAttribute("data-l10n-id",Za._.missing),e.setAttribute("data-l10n-id",Za._["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=Vn(Ga,this)._uiManager._signal;t.addEventListener("contextmenu",fr,{signal:n}),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const i=t=>{t.preventDefault(),Vn(Ga,this)._uiManager.editAltText(Vn(Ga,this)),Vn(Ya,this)&&Vn(Ga,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Hn(Ka,this,$a)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(Gn(Ha,this,!0),i(e))},{signal:n}),await Un(Ka,this,Ja).call(this),t}finish(){Vn(Wa,this)&&(Vn(Wa,this).focus({focusVisible:Vn(Ha,this)}),Gn(Ha,this,!1))}isEmpty(){return Vn(Ya,this)?null===Vn(Oa,this):!Vn(Oa,this)&&!Vn(Ba,this)}hasData(){return Vn(Ya,this)?null!==Vn(Oa,this)||!!Vn(qa,this):this.isEmpty()}get guessedText(){return Vn(qa,this)}async setGuessedText(t){null===Vn(Oa,this)&&(Gn(qa,this,t),Gn(Xa,this,await Qa._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),Un(Ka,this,Ja).call(this))}toggleAltTextBadge(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;if(!Vn(Ya,this)||Vn(Oa,this))return null===(e=Vn(Va,this))||void 0===e||e.remove(),void Gn(Va,this,null);if(!Vn(Va,this)){const t=Gn(Va,this,document.createElement("div"));t.className="noAltTextBadge",Vn(Ga,this).div.append(t)}Vn(Va,this).classList.toggle("hidden",!t)}serialize(t){let e=Vn(Oa,this);return t||Vn(qa,this)!==e||(e=Vn(Xa,this)),{altText:e,decorative:Vn(Ba,this),guessedText:Vn(qa,this),textWithDisclaimer:Vn(Xa,this)}}get data(){return{altText:Vn(Oa,this),decorative:Vn(Ba,this)}}set data(t){let{altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=t;i&&(Gn(qa,this,i),Gn(Xa,this,r)),Vn(Oa,this)===e&&Vn(Ba,this)===n||(s||(Gn(Oa,this,e),Gn(Ba,this,n)),Un(Ka,this,Ja).call(this))}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Vn(Wa,this)&&(!t&&Vn(Ua,this)&&(clearTimeout(Vn(Ua,this)),Gn(Ua,this,null)),Vn(Wa,this).disabled=!t)}shown(){Vn(Ga,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Hn(Ka,this,$a)}})}destroy(){var t,e;null===(t=Vn(Wa,this))||void 0===t||t.remove(),Gn(Wa,this,null),Gn(ja,this,null),Gn(za,this,null),null===(e=Vn(Va,this))||void 0===e||e.remove(),Gn(Va,this,null)}}function $a(t){return(Vn(Oa,t)?"added":null===Vn(Oa,t)&&t.guessedText&&"review")||"missing"}async function Ja(){const t=Vn(Wa,this);if(!t)return;if(Vn(Ya,this)){var e,n;if(t.classList.toggle("done",!!Vn(Oa,this)),t.setAttribute("data-l10n-id",Za._[Hn(Ka,this,$a)]),null===(e=Vn(ja,this))||void 0===e||e.setAttribute("data-l10n-id",Za._["".concat(Hn(Ka,this,$a),"-label")]),!Vn(Oa,this))return void(null===(n=Vn(za,this))||void 0===n||n.remove())}else{var i;if(!Vn(Oa,this)&&!Vn(Ba,this))return t.classList.remove("done"),void(null===(i=Vn(za,this))||void 0===i||i.remove());t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=Vn(za,this);if(!r){Gn(za,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(Vn(Ga,this).id);const e=100,n=Vn(Ga,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(Vn(Ua,this)),Gn(Ua,this,null)},{once:!0}),t.addEventListener("mouseenter",()=>{Gn(Ua,this,setTimeout(()=>{Gn(Ua,this,null),Vn(za,this).classList.add("show"),Vn(Ga,this)._reportTelemetry({action:"alt_text_tooltip"})},e))},{signal:n}),t.addEventListener("mouseleave",()=>{var t;Vn(Ua,this)&&(clearTimeout(Vn(Ua,this)),Gn(Ua,this,null)),null===(t=Vn(za,this))||void 0===t||t.classList.remove("show")},{signal:n})}Vn(Ba,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=Vn(Oa,this)),r.parentNode||t.append(r);const s=Vn(Ga,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var Za={_:null};c(Qa,"_l10n",null);var to=new WeakMap,eo=new WeakMap,no=new WeakMap,io=new WeakMap,ro=new WeakMap,so=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakSet;class ho{constructor(t){jn(this,uo),zn(this,to,null),zn(this,eo,null),zn(this,no,!1),zn(this,io,null),zn(this,ro,null),zn(this,so,null),zn(this,ao,null),zn(this,oo,null),zn(this,lo,!1),zn(this,co,null),Gn(io,this,t)}renderForToolbar(){const t=Gn(eo,this,document.createElement("button"));return t.className="comment",Un(uo,this,po).call(this,t,!1)}renderForStandalone(){const t=Gn(to,this,document.createElement("button"));t.className="annotationCommentButton";const e=Vn(io,this).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd="calc(".concat(100*("ltr"===Vn(io,this)._uiManager.direction?1-e[0]:e[0]),"% - var(--comment-button-dim))"),n.top="calc(".concat(100*e[1],"% - var(--comment-button-dim))");const i=Vn(io,this).commentButtonColor;i&&(n.backgroundColor=i)}return Un(uo,this,po).call(this,t,!0)}focusButton(){setTimeout(()=>{var t,e;null===(t=null!==(e=Vn(to,this))&&void 0!==e?e:Vn(eo,this))||void 0===t||t.focus()},0)}onUpdatedColor(){if(!Vn(to,this))return;const t=Vn(io,this).commentButtonColor;t&&(Vn(to,this).style.backgroundColor=t),Vn(io,this)._uiManager.updatePopupColor(Vn(io,this))}get commentButtonWidth(){var t,e;return(null!==(t=null===(e=Vn(to,this))||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0)/Vn(io,this).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Vn(co,this))return Vn(co,this);if(!Vn(to,this))return null;const{x:t,y:e,height:n}=Vn(to,this).getBoundingClientRect(),{x:i,y:r,width:s,height:a}=Vn(io,this).parent.boundingClientRect;return[(t-i)/s,(e+n-r)/a]}set commentPopupPositionInLayer(t){Gn(co,this,t)}hasDefaultPopupPosition(){return null===Vn(co,this)}removeStandaloneCommentButton(){var t;null===(t=Vn(to,this))||void 0===t||t.remove(),Gn(to,this,null)}removeToolbarCommentButton(){var t;null===(t=Vn(eo,this))||void 0===t||t.remove(),Gn(eo,this,null)}setCommentButtonStates(t){let{selected:e,hasPopup:n}=t;Vn(to,this)&&(Vn(to,this).classList.toggle("selected",e),Vn(to,this).ariaExpanded=n)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=Vn(io,this).commentButtonPosition;const{width:t,height:e,x:r,y:s}=Vn(io,this);n=r+n*t,i=s+i*e}const r=Vn(io,this).parent.boundingClientRect,{x:s,y:a,width:o,height:l}=r;Vn(io,this)._uiManager.editComment(Vn(io,this),s+n*o,a+i*l,h(h({},t),{},{parentDimensions:r}))}finish(){Vn(eo,this)&&(Vn(eo,this).focus({focusVisible:Vn(no,this)}),Gn(no,this,!1))}isDeleted(){return Vn(lo,this)||""===Vn(ao,this)}isEmpty(){return null===Vn(ao,this)}hasBeenEdited(){return this.isDeleted()||Vn(ao,this)!==Vn(ro,this)}serialize(){return this.data}get data(){return{text:Vn(ao,this),richText:Vn(so,this),date:Vn(oo,this),deleted:this.isDeleted()}}set data(t){if(t!==Vn(ao,this)&&Gn(so,this,null),null===t)return Gn(ao,this,""),void Gn(lo,this,!0);Gn(ao,this,t),Gn(oo,this,new Date),Gn(lo,this,!1)}setInitialText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Gn(ro,this,t),this.data=t,Gn(oo,this,null),Gn(so,this,e)}shown(){}destroy(){var t,e;null===(t=Vn(eo,this))||void 0===t||t.remove(),Gn(eo,this,null),null===(e=Vn(to,this))||void 0===e||e.remove(),Gn(to,this,null),Gn(ao,this,""),Gn(so,this,null),Gn(oo,this,null),Gn(io,this,null),Gn(no,this,!1),Gn(lo,this,!1)}}function po(t,e){if(!Vn(io,this)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[Vn(io,this)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=Vn(io,this)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",fr,{signal:n}),e&&(t.addEventListener("focusin",t=>{Vn(io,this)._focusEventsAllowed=!1,gr(t)},{capture:!0,signal:n}),t.addEventListener("focusout",t=>{Vn(io,this)._focusEventsAllowed=!0,gr(t)},{capture:!0,signal:n})),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),t===Vn(eo,this)?this.edit():Vn(io,this).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(Gn(no,this,!0),i(e))},{signal:n}),t.addEventListener("pointerenter",()=>{Vn(io,this).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{Vn(io,this).toggleComment(!1,!1)},{signal:n}),t}var fo=new WeakMap,go=new WeakMap,mo=new WeakMap,vo=new WeakMap,yo=new WeakMap,bo=new WeakMap,wo=new WeakMap,_o=new WeakMap,xo=new WeakMap,ko=new WeakMap,Ao=new WeakMap,So=new WeakMap,Eo=new WeakSet;class Co{constructor(t){let{container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}=t;jn(this,Eo),zn(this,fo,void 0),zn(this,go,!1),zn(this,mo,null),zn(this,vo,void 0),zn(this,yo,void 0),zn(this,bo,void 0),zn(this,wo,void 0),zn(this,_o,null),zn(this,xo,void 0),zn(this,ko,null),zn(this,Ao,void 0),zn(this,So,null),Gn(fo,this,e),Gn(mo,this,i),Gn(vo,this,n),Gn(yo,this,r),Gn(bo,this,s),Gn(wo,this,a),Gn(Ao,this,new AbortController),Gn(xo,this,AbortSignal.any([o,Vn(Ao,this).signal])),e.addEventListener("touchstart",Un(Eo,this,Mo).bind(this),{passive:!1,signal:Vn(xo,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/xr.pixelRatio}destroy(){var t,e;null===(t=Vn(Ao,this))||void 0===t||t.abort(),Gn(Ao,this,null),null===(e=Vn(_o,this))||void 0===e||e.abort(),Gn(_o,this,null)}}function Mo(t){var e,n;if(null!==(e=Vn(vo,this))&&void 0!==e&&e.call(this))return;if(1===t.touches.length){if(Vn(_o,this))return;const t=Gn(_o,this,new AbortController),e=AbortSignal.any([Vn(xo,this),t.signal]),n=Vn(fo,this),i={capture:!0,signal:e,passive:!1},r=t=>{var e;"touch"===t.pointerType&&(null===(e=Vn(_o,this))||void 0===e||e.abort(),Gn(_o,this,null))};return n.addEventListener("pointerdown",t=>{"touch"===t.pointerType&&(gr(t),r(t))},i),n.addEventListener("pointerup",r,i),void n.addEventListener("pointercancel",r,i)}if(!Vn(So,this)){var i;Gn(So,this,new AbortController);const t=AbortSignal.any([Vn(xo,this),Vn(So,this).signal]),e=Vn(fo,this),n={signal:t,capture:!1,passive:!1};e.addEventListener("touchmove",Un(Eo,this,To).bind(this),n);const r=Un(Eo,this,Po).bind(this);e.addEventListener("touchend",r,n),e.addEventListener("touchcancel",r,n),n.capture=!0,e.addEventListener("pointerdown",gr,n),e.addEventListener("pointermove",gr,n),e.addEventListener("pointercancel",gr,n),e.addEventListener("pointerup",gr,n),null===(i=Vn(yo,this))||void 0===i||i.call(this)}if(gr(t),2!==t.touches.length||null!==(n=Vn(mo,this))&&void 0!==n&&n.call(this))return void Gn(ko,this,null);let[r,s]=t.touches;r.identifier>s.identifier&&([r,s]=[s,r]),Gn(ko,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function To(t){var e;if(!Vn(ko,this)||2!==t.touches.length)return;gr(t);let[n,i]=t.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:o}=i,l=Vn(ko,this),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,p=h-c,f=d-u,g=a-r,m=o-s,v=Math.hypot(g,m)||1,y=Math.hypot(p,f)||1;if(!Vn(go,this)&&Math.abs(y-v)<=_n.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!Vn(go,this))return void Gn(go,this,!0);const b=[(r+a)/2,(s+o)/2];null===(e=Vn(bo,this))||void 0===e||e.call(this,b,y,v)}function Po(t){if(!(t.touches.length>=2)){var e;if(Vn(So,this))Vn(So,this).abort(),Gn(So,this,null),null===(e=Vn(wo,this))||void 0===e||e.call(this);Vn(ko,this)&&(gr(t),Gn(ko,this,null),Gn(go,this,!1))}}_n=Co;var Ro=new WeakMap,Do=new WeakMap,Lo=new WeakMap,No=new WeakMap,Io=new WeakMap,Fo=new WeakMap,Oo=new WeakMap,Bo=new WeakMap,Wo=new WeakMap,jo=new WeakMap,zo=new WeakMap,Uo=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,Go=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,$o=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,tl=new WeakMap,el=new WeakMap,nl=new WeakMap,il=new WeakSet;class rl{static get _resizerKeyboardManager(){const t=rl.prototype._resizeWithKeyboard,e=ga.TRANSLATE_SMALL,n=ga.TRANSLATE_BIG;return Fi(this,"_resizerKeyboardManager",new ms([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],rl.prototype._stopResizingWithKeyboard]]))}constructor(t){jn(this,il),zn(this,Ro,null),zn(this,Do,null),zn(this,Lo,null),zn(this,No,null),zn(this,Io,null),zn(this,Fo,!1),zn(this,Oo,null),zn(this,Bo,""),zn(this,Wo,null),zn(this,jo,null),zn(this,zo,null),zn(this,Uo,null),zn(this,Ho,null),zn(this,Vo,""),zn(this,Go,!1),zn(this,qo,null),zn(this,Xo,!1),zn(this,Yo,!1),zn(this,Ko,!1),zn(this,Qo,null),zn(this,$o,0),zn(this,Jo,0),zn(this,Zo,null),zn(this,tl,null),c(this,"isSelected",!1),c(this,"_isCopy",!1),c(this,"_editToolbar",null),c(this,"_initialOptions",Object.create(null)),c(this,"_initialData",null),c(this,"_isVisible",!0),c(this,"_uiManager",null),c(this,"_focusEventsAllowed",!0),zn(this,el,!1),zn(this,nl,rl._zIndex++),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fi(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Al({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){var n;if(null!==(n=rl._l10n)&&void 0!==n||(rl._l10n=t),rl._l10nResizer||(rl._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==rl._borderLineWidth)return;const i=getComputedStyle(document.documentElement);rl._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Di("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Vn(el,this)}set _isDraggable(t){var e;Gn(el,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Vn(nl,this)}setParent(t){var e;null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(Un(il,this,kl).call(this),null===(e=Vn(Uo,this))||void 0===e||e.remove(),Gn(Uo,this,null));this.parent=t}focusin(t){this._focusEventsAllowed&&(Vn(Go,this)?Gn(Go,this,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=t.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/s,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){Un(il,this,sl).call(this,this.parentDimensions,t,e)}translateInPage(t,e){Vn(qo,this)||Gn(qo,this,[this.x,this.y,this.width,this.height]),Un(il,this,sl).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){Vn(qo,this)||Gn(qo,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!Vn(qo,this)&&(Vn(qo,this)[0]!==this.x||Vn(qo,this)[1]!==this.y)}get _hasBeenResized(){return!!Vn(qo,this)&&(Vn(qo,this)[2]!==this.width||Vn(qo,this)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=rl,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:s,width:a,height:o}=this;if(a*=n,o*=i,r*=n,s*=i,this._mustFixPosition)switch(t){case 0:r=er(r,0,n-a),s=er(s,0,i-o);break;case 90:r=er(r,0,n-o),s=er(s,a,i);break;case 180:r=er(r,a,n),s=er(s,o,i);break;case 270:r=er(r,o,n),s=er(s,0,i-a)}this.x=r/=n,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c,e.left="".concat((100*r).toFixed(2),"%"),e.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(t,e){return al.call(rl,t,e,this.parentRotation)}pageTranslationToScreen(t,e){return al.call(rl,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width="".concat((100*e).toFixed(2),"%"),t.height="".concat((100*n).toFixed(2),"%")}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(1e4*t)/1e4}_onResizing(){}altTextFinish(){var t;null===(t=Vn(Lo,this))||void 0===t||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Vn(Yo,this))return this._editToolbar;this._editToolbar=new jr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;null===(t=this._editToolbar)||void 0===t||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;null===(t=this._editToolbar)||void 0===t||t.removeButton("comment")}removeEditToolbar(){var t,e;null===(t=this._editToolbar)||void 0===t||t.remove(),this._editToolbar=null,null===(e=Vn(Lo,this))||void 0===e||e.destroy()}addContainer(t){var e;const n=null===(e=this._editToolbar)||void 0===e?void 0:e.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Vn(Lo,this)||(Qa.initialize(rl._l10n),Gn(Lo,this,new Qa(this)),Vn(Ro,this)&&(Vn(Lo,this).data=Vn(Ro,this),Gn(Ro,this,null))),Vn(Lo,this)}get altTextData(){var t;return null===(t=Vn(Lo,this))||void 0===t?void 0:t.data}set altTextData(t){Vn(Lo,this)&&(Vn(Lo,this).data=t)}get guessedAltText(){var t;return null===(t=Vn(Lo,this))||void 0===t?void 0:t.guessedText}async setGuessedAltText(t){var e;await(null===(e=Vn(Lo,this))||void 0===e?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return null===(e=Vn(Lo,this))||void 0===e?void 0:e.serialize(t)}hasAltText(){return!!Vn(Lo,this)&&!Vn(Lo,this).isEmpty()}hasAltTextData(){var t,e;return null!==(t=null===(e=Vn(Lo,this))||void 0===e?void 0:e.hasData())&&void 0!==t&&t}focusCommentButton(){var t;null===(t=Vn(No,this))||void 0===t||t.focusButton()}addCommentButton(){return Vn(No,this)||Gn(No,this,new ho(this))}addStandaloneCommentButton(){Vn(Io,this)?this._uiManager.isEditingMode()&&Vn(Io,this).classList.remove("hidden"):this.hasComment&&(Gn(Io,this,Vn(No,this).renderForStandalone()),this.div.append(Vn(Io,this)))}removeStandaloneCommentButton(){Vn(No,this).removeStandaloneCommentButton(),Gn(Io,this,null)}hideStandaloneCommentButton(){var t;null===(t=Vn(Io,this))||void 0===t||t.classList.add("hidden")}get comment(){var t;const{data:{richText:e,text:n,date:i,deleted:r}}=Vn(No,this);return{text:n,richText:e,date:i,deleted:r,color:this.getNonHCMColor(),opacity:null!==(t=this.opacity)&&void 0!==t?t:1}}set comment(t){Vn(No,this)||Gn(No,this,new ho(this)),Vn(No,this).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData(t){let{comment:e,popupRef:n,richText:i}=t;if(!n)return;if(Vn(No,this)||Gn(No,this,new ho(this)),Vn(No,this).setInitialText(e,i),!this.annotationElementId)return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return null===(t=Vn(No,this))||void 0===t?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return null===(t=Vn(No,this))||void 0===t?void 0:t.isDeleted()}get hasComment(){return!!Vn(No,this)&&!Vn(No,this).isEmpty()&&!Vn(No,this).isDeleted()}async editComment(t){Vn(No,this)||Gn(No,this,new ho(this)),Vn(No,this).edit(t)}toggleComment(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){Vn(No,this).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const e=180,n=100,[,,,i]=t.rect,[r]=this.pageDimensions,[s]=this.pageTranslation,a=s+r+1,o=i-n,l=a+e;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,o,l,i]}}}updateFromAnnotationLayer(t){let{popup:{contents:e,deleted:n}}=t;Vn(No,this).data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var t;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=Vn(Fo,this)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),Un(il,this,yl).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),e.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[r,s]=this.getInitialTranslation();return this.translate(r,s),es(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Vn(tl,this)||Gn(tl,this,new Co({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Un(il,this,pl).bind(this),onPinching:Un(il,this,fl).bind(this),onPinchEnd:Un(il,this,gl).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null===(t=this._uiManager._editorUndoBar)||void 0===t||t.hide(),e}pointerdown(t){const{isMac:e}=qi.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(Gn(Go,this,!0),this._isDraggable?Un(il,this,vl).call(this,t):Un(il,this,ml).call(this,t))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Vn(Qo,this)&&clearTimeout(Vn(Qo,this)),Gn(Qo,this,setTimeout(()=>{var t;Gn(Qo,this,null),null===(t=this.parent)||void 0===t||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/i,c=e/i,u=this.x*r,h=this.y*s,d=this.width*r,p=this.height*s;switch(n){case 0:return[u+l+a,s-h-c-p+o,u+l+d+a,s-h-c+o];case 90:return[u+c+a,s-h+l+o,u+c+p+a,s-h+l+d+o];case 180:return[u-l-d+a,s-h+c+o,u-l+a,s-h+c+p+o];case 270:return[u-c-p+a,s-h-l-d+o,u-c+a,s-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,s]=t,a=r-n,o=s-i;switch(this.rotation){case 0:return[n,e-s,a,o];case 90:return[n,e-i,o,a];case 180:return[r,e-i,a,o];case 270:return[r,e-s,o,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&rl._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;null===(t=Vn(No,this))||void 0===t||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:r,richText:s},uid:a,pageIndex:o,creationDate:l,modificationDate:c}=this;return{id:a,pageIndex:o,rect:this.getPDFRect(),richText:s,contentsObj:{str:t},creationDate:l,modificationDate:n||c,popupRef:!r,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Gn(Yo,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Gn(Yo,this,!1),!0)}isInEditMode(){return Vn(Yo,this)}shouldGetKeyboardEvents(){return Vn(Ko,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return e<s&&i>0&&t<r&&n>0}rebuild(){Un(il,this,yl).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}serialize(){var t;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,Gn(Ro,i,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,s]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(t.rect,s);return i.x=a/r,i.y=o/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var t,e;if(null===(t=Vn(Ho,this))||void 0===t||t.abort(),Gn(Ho,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Vn(Qo,this)&&(clearTimeout(Vn(Qo,this)),Gn(Qo,this,null)),Un(il,this,kl).call(this),this.removeEditToolbar(),Vn(Zo,this)){for(const t of Vn(Zo,this).values())clearTimeout(t);Gn(Zo,this,null)}this.parent=null,null===(e=Vn(tl,this))||void 0===e||e.destroy(),Gn(tl,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Un(il,this,ll).call(this),Vn(Wo,this).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,r,s]=this.getPDFRect();return[rl._round(n+(r-n)*t),rl._round(i+(s-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Vn(No,this).commentPopupPositionInLayer}set commentPopupPosition(t){Vn(No,this).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return Vn(No,this).hasDefaultPopupPosition()}get commentButtonWidth(){return Vn(No,this).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){Vn(No,this).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),Gn(zo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=Vn(Wo,this).children;if(!Vn(Do,this)){Gn(Do,this,Array.from(e));const t=Un(il,this,bl).bind(this),n=Un(il,this,wl).bind(this),i=this._uiManager._signal;for(const e of Vn(Do,this)){const r=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:i}),e.addEventListener("blur",n,{signal:i}),e.addEventListener("focus",Un(il,this,_l).bind(this,r),{signal:i}),e.setAttribute("data-l10n-id",rl._l10nResizer[r])}}const n=Vn(Do,this)[0];let i=0;for(const s of e){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(Vn(Do,this).length/4);if(r!==i){if(r<i)for(let e=0;e<i-r;e++)Vn(Wo,this).append(Vn(Wo,this).firstChild);else if(r>i)for(let e=0;e<r-i;e++)Vn(Wo,this).firstChild.before(Vn(Wo,this).lastChild);let t=0;for(const n of e){const e=Vn(Do,this)[t++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",rl._l10nResizer[e])}}Un(il,this,xl).call(this,0),Gn(Ko,this,!0),Vn(Wo,this).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){Vn(Ko,this)&&Un(il,this,dl).call(this,Vn(Vo,this),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){Un(il,this,kl).call(this),this.div.focus()}select(){var t,e,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),this._editToolbar?(null===(e=this._editToolbar)||void 0===e||e.show(),null===(n=Vn(Lo,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var t,e;null!==(t=this.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=this._editToolbar)||void 0===e||e.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return null===(t=this.div)||void 0===t?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,i,r;this.isSelected&&(this.isSelected=!1,null===(t=Vn(Wo,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=Vn(Lo,this))||void 0===r||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){"BUTTON"!==t.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Vn(Xo,this)}set isEditing(t){Gn(Xo,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){Vn(Zo,this)||Gn(Zo,this,new Map);const{action:e}=t;let n=Vn(Zo,this).get(e);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),Vn(Zo,this).delete(e),0===Vn(Zo,this).size&&Gn(Zo,this,null)},rl._telemetryTimeout),void Vn(Zo,this).set(e,n)}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),Gn(Fo,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),Gn(Fo,this,!0)}updateFakeAnnotationElement(t){if(Vn(Uo,this)||this.deleted)return this.deleted?(Vn(Uo,this).remove(),void Gn(Uo,this,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Vn(Uo,this).updateEdited({rect:this.getPDFRect(),popup:this.comment}));Gn(Uo,this,t.addFakeAnnotation(this))}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===(null===e||void 0===e?void 0:e.nodeName)&&e.classList.contains("annotationContent")&&e.remove()}}function sl(t,e,n){let[i,r]=t;[e,n]=this.screenToPageTranslation(e,n),this.x+=e/i,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function al(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function ol(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}function ll(){if(Vn(Wo,this))return;Gn(Wo,this,document.createElement("div")),Vn(Wo,this).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const t=document.createElement("div");Vn(Wo,this).append(t),t.classList.add("resizer",n),t.setAttribute("data-resizer-name",n),t.addEventListener("pointerdown",Un(il,this,cl).bind(this,n),{signal:e}),t.addEventListener("contextmenu",fr,{signal:e}),t.tabIndex=-1}this.div.prepend(Vn(Wo,this))}function cl(t,e){var n;e.preventDefault();const{isMac:i}=qi.platform;if(0!==e.button||e.ctrlKey&&i)return;null===(n=Vn(Lo,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,Gn(jo,this,[e.screenX,e.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Un(il,this,dl).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",gr,{passive:!1,signal:a}),window.addEventListener("contextmenu",fr,{signal:a}),Gn(zo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{var t;s.abort(),this.parent.togglePointerEvents(!0),null===(t=Vn(Lo,this))||void 0===t||t.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,Un(il,this,hl).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function ul(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}function hl(){if(!Vn(zo,this))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=Vn(zo,this);Gn(zo,this,null);const r=this.x,s=this.y,a=this.width,o=this.height;r===t&&s===e&&a===n&&o===i||this.addCommands({cmd:Un(il,this,ul).bind(this,r,s,a,o),undo:Un(il,this,ul).bind(this,t,e,n,i),mustExec:!0})}function dl(t,e){const[n,i]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=xn.MIN_SIZE/n,c=xn.MIN_SIZE/i,u=Un(il,this,ol).call(this,this.rotation),h=(t,e)=>[u[0]*t+u[2]*e,u[1]*t+u[3]*e],d=Un(il,this,ol).call(this,360-this.rotation);let p,f,g=!1,m=!1;switch(t){case"topLeft":g=!0,p=(t,e)=>[0,0],f=(t,e)=>[t,e];break;case"topMiddle":p=(t,e)=>[t/2,0],f=(t,e)=>[t/2,e];break;case"topRight":g=!0,p=(t,e)=>[t,0],f=(t,e)=>[0,e];break;case"middleRight":m=!0,p=(t,e)=>[t,e/2],f=(t,e)=>[0,e/2];break;case"bottomRight":g=!0,p=(t,e)=>[t,e],f=(t,e)=>[0,0];break;case"bottomMiddle":p=(t,e)=>[t/2,e],f=(t,e)=>[t/2,0];break;case"bottomLeft":g=!0,p=(t,e)=>[0,e],f=(t,e)=>[t,0];break;case"middleLeft":m=!0,p=(t,e)=>[0,e/2],f=(t,e)=>[t,e/2]}const v=p(a,o),y=f(a,o);let b=h(...y);const w=xn._round(r+b[0]),_=xn._round(s+b[1]);let x,k,A=1,S=1;if(e.fromKeyboard)({deltaX:x,deltaY:k}=e);else{const{screenX:t,screenY:n}=e,[i,r]=Vn(jo,this);[x,k]=this.screenToPageTranslation(t-i,n-r),Vn(jo,this)[0]=t,Vn(jo,this)[1]=n}var E,C;if([x,k]=(E=x/n,C=k/i,[d[0]*E+d[2]*C,d[1]*E+d[3]*C]),g){const t=Math.hypot(a,o);A=S=Math.max(Math.min(Math.hypot(y[0]-v[0]-x,y[1]-v[1]-k)/t,1/a,1/o),l/a,c/o)}else m?A=er(Math.abs(y[0]-v[0]-x),l,1)/a:S=er(Math.abs(y[1]-v[1]-k),c,1)/o;const M=xn._round(a*A),T=xn._round(o*S);b=h(...f(M,T));const P=w-b[0],R=_-b[1];Vn(qo,this)||Gn(qo,this,[this.x,this.y,this.width,this.height]),this.width=M,this.height=T,this.x=P,this.y=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function pl(){var t;Gn(zo,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(t=Vn(Lo,this))||void 0===t||t.toggle(!1),this.parent.togglePointerEvents(!1)}function fl(t,e,n){let i=n/e*.7+1-.7;if(1===i)return;const r=Un(il,this,ol).call(this,this.rotation),s=(t,e)=>[r[0]*t+r[2]*e,r[1]*t+r[3]*e],[a,o]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,d=xn.MIN_SIZE/a,p=xn.MIN_SIZE/o;i=Math.max(Math.min(i,1/u,1/h),d/u,p/h);const f=xn._round(u*i),g=xn._round(h*i);if(f===u&&g===h)return;Vn(qo,this)||Gn(qo,this,[l,c,u,h]);const m=s(u/2,h/2),v=xn._round(l+m[0]),y=xn._round(c+m[1]),b=s(f/2,g/2);this.x=v-b[0],this.y=y-b[1],this.width=f,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function gl(){var t;null===(t=Vn(Lo,this))||void 0===t||t.toggle(!0),this.parent.togglePointerEvents(!0),Un(il,this,hl).call(this)}function ml(t){const{isMac:e}=qi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function vl(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},a=t=>{i.abort(),Gn(Oo,this,null),Gn(Go,this,!1),this._uiManager.endDragSession()||Un(il,this,ml).call(this,t),n&&this._onStopDragging()};e&&(Gn($o,this,t.clientX),Gn(Jo,this,t.clientY),Gn(Oo,this,t.pointerId),Gn(Bo,this,t.pointerType),window.addEventListener("pointermove",t=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:e,clientY:i,pointerId:r}=t;if(r!==Vn(Oo,this))return void gr(t);const[s,a]=this.screenToPageTranslation(e-Vn($o,this),i-Vn(Jo,this));Gn($o,this,e),Gn(Jo,this,i),this._uiManager.dragSelectedEditors(s,a)},s),window.addEventListener("touchmove",gr,s),window.addEventListener("pointerdown",t=>{t.pointerType===Vn(Bo,this)&&(Vn(tl,this)||t.isPrimary)&&a(t),gr(t)},s));const o=t=>{Vn(Oo,this)&&Vn(Oo,this)!==t.pointerId?gr(t):a(t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}function yl(){if(Vn(Ho,this)||!this.div)return;Gn(Ho,this,new AbortController);const t=this._uiManager.combinedSignal(Vn(Ho,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}function bl(t){xn._resizerKeyboardManager.exec(this,t)}function wl(t){var e;Vn(Ko,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==Vn(Wo,this)&&Un(il,this,kl).call(this)}function _l(t){Gn(Vo,this,Vn(Ko,this)?t:"")}function xl(t){if(Vn(Do,this))for(const e of Vn(Do,this))e.tabIndex=t}function kl(){Gn(Ko,this,!1),Un(il,this,xl).call(this,-1),Un(il,this,hl).call(this)}xn=rl,c(rl,"_l10n",null),c(rl,"_l10nResizer",null),c(rl,"_borderLineWidth",-1),c(rl,"_colorManager",new ys),c(rl,"_zIndex",1),c(rl,"_telemetryTimeout",1e3);class Al extends rl{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sl=3285377520,El=4294901760,Cl=65535;class Ml{constructor(t){this.h1=t?4294967295&t:Sl,this.h2=t?4294967295&t:Sl}update(t){let e,n;if("string"===typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),n=e.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(e.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const u=3432918353,h=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=s[f],a=a*u&El|a*d&Cl,a=a<<15|a>>>17,a=a*h&El|a*p&Cl,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[f],o=o*u&El|o*d&Cl,o=o<<15|o>>>17,o=o*h&El|o*p&Cl,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=e[4*i+2]<<16;case 2:a^=e[4*i+1]<<8;case 1:a^=e[4*i],a=a*u&El|a*d&Cl,a=a<<15|a>>>17,a=a*h&El|a*p&Cl,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&El|36045*t&Cl,e=4283543511*e&El|(2950163797*(e<<16|t>>>16)&El)>>>16,t^=e>>>1,t=444984403*t&El|60499*t&Cl,e=3301882366*e&El|(3120437893*(e<<16|t>>>16)&El)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Tl=Object.freeze({map:null,hash:"",transfer:void 0});var Pl=new WeakMap,Rl=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,Nl=new WeakSet;class Il{constructor(){jn(this,Nl),zn(this,Pl,!1),zn(this,Rl,null),zn(this,Dl,null),zn(this,Ll,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=Vn(Ll,this).get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return Vn(Ll,this).get(t)}remove(t){const e=Vn(Ll,this).get(t);if(void 0!==e&&(e instanceof rl&&Vn(Dl,this).delete(e.annotationElementId),Vn(Ll,this).delete(t),0===Vn(Ll,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor)){for(const t of Vn(Ll,this).values())if(t instanceof rl)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=Vn(Ll,this).get(t);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(e))n[r]!==s&&(i=!0,n[r]=s);else i=!0,Vn(Ll,this).set(t,e);i&&Un(Nl,this,Fl).call(this),e instanceof rl&&((Vn(Dl,this)||Gn(Dl,this,new Map)).set(e.annotationElementId,e),"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type))}has(t){return Vn(Ll,this).has(t)}get size(){return Vn(Ll,this).size}resetModified(){Vn(Pl,this)&&(Gn(Pl,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Bl(this)}get serializable(){if(0===Vn(Ll,this).size)return Tl;const t=new Map,e=new Ml,n=[],i=Object.create(null);let r=!1;for(const[s,a]of Vn(Ll,this)){const n=a instanceof rl?a.serialize(!1,i):a;n&&(t.set(s,n),e.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of t.values())s.bitmap&&n.push(s.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Tl}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const a of Vn(Ll,this).values()){var r;if(!(a instanceof rl)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(a).constructor),t||(t=Object.create(null));const c=(r=t)[l]||(r[l]=new Map);for(const[t,e]of Object.entries(o)){var s;if("type"===t)continue;let n=c.get(t);n||(n=new Map,c.set(t,n));const i=null!==(s=n.get(e))&&void 0!==s?s:0;n.set(e,i+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[a,o]of e)t[a]=o.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){Gn(Rl,this,null)}updateEditor(t,e){var n;const i=null===(n=Vn(Dl,this))||void 0===n?void 0:n.get(t);return!!i&&(i.updateFromAnnotationLayer(e),!0)}getEditor(t){var e;return(null===(e=Vn(Dl,this))||void 0===e?void 0:e.get(t))||null}get modifiedIds(){if(Vn(Rl,this))return Vn(Rl,this);const t=[];if(Vn(Dl,this))for(const e of Vn(Dl,this).values())e.serialize()&&t.push(e.annotationElementId);return Gn(Rl,this,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return Vn(Ll,this).entries()}}function Fl(){Vn(Pl,this)||(Gn(Pl,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Ol=new WeakMap;class Bl extends Il{constructor(t){super(),zn(this,Ol,void 0);const{map:e,hash:n,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);Gn(Ol,this,{map:r,hash:n,transfer:i})}get print(){Di("Should not call PrintAnnotationStorage.print")}get serializable(){return Vn(Ol,this)}get modifiedIds(){return Fi(this,"modifiedIds",{ids:new Set,hash:""})}}var Wl=new WeakMap;class jl{constructor(t){let{ownerDocument:e=globalThis.document,styleElement:n=null}=t;zn(this,Wl,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),Vn(Wl,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,disableFontFace:n,_inspectFont:i}=t;if(e&&!Vn(Wl,this).has(e.loadedName)){if(Li(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:n,style:s}=e,a=new FontFace(t,n,s);this.addNativeFontFace(a);try{await a.load(),Vn(Wl,this).add(t),null===i||void 0===i||i(e)}catch(r){Ri("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}Di("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw Ri("Failed to load font '".concat(e.family,"': '").concat(n,"'.")),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(e=>{const n=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var t;return Fi(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}get isSyncFontLoadingSupported(){return Fi(this,"isSyncFontLoadingSupported",Xn||qi.platform.isFirefox)}_queueLoadingCallback(t){const{loadingRequests:e}=this,n={done:!1,complete:function(){for(Li(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}get _loadTestFont(){return Fi(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,c.length,c);const h=1482184792;let d=n(u,16);for(r=0,s=c.length-3;r<s;r+=4)d=d-h+n(c,r)|0;var p;r<c.length&&(d=d-h+n(c+"XXX",r)|0),u=i(u,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(u),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[t.loadedName,c]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=v,m.append(t)}this._document.body.append(m),function t(e,n){if(++l>30)return Ri("Load test font never loaded."),void n();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(c,()=>{m.remove(),e.complete()})}}var zl=new WeakMap;class Ul{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;zn(this,zl,void 0),this.compiledGlyphs=Object.create(null),Gn(zl,this,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e="url(data:".concat(this.mimetype,";base64,").concat(nr(this.data),");");let n;if(this.cssFontInfo){let t="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(t+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(t,"src:").concat(e,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,e),n}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(s){Ri('getPathGenerator - ignoring character: "'.concat(s,'".'))}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}get black(){return Vn(zl,this).black}get bold(){return Vn(zl,this).bold}get disableFontFace(){var t;return null!==(t=Vn(zl,this).disableFontFace)&&void 0!==t&&t}get fontExtraProperties(){var t;return null!==(t=Vn(zl,this).fontExtraProperties)&&void 0!==t&&t}get isInvalidPDFjsFont(){return Vn(zl,this).isInvalidPDFjsFont}get isType3Font(){return Vn(zl,this).isType3Font}get italic(){return Vn(zl,this).italic}get missingFile(){return Vn(zl,this).missingFile}get remeasure(){return Vn(zl,this).remeasure}get vertical(){return Vn(zl,this).vertical}get ascent(){return Vn(zl,this).ascent}get defaultWidth(){return Vn(zl,this).defaultWidth}get descent(){return Vn(zl,this).descent}get bbox(){return Vn(zl,this).bbox}get fontMatrix(){return Vn(zl,this).fontMatrix}get fallbackName(){return Vn(zl,this).fallbackName}get loadedName(){return Vn(zl,this).loadedName}get mimetype(){return Vn(zl,this).mimetype}get name(){return Vn(zl,this).name}get data(){return Vn(zl,this).data}clearData(){Vn(zl,this).clearData()}get cssFontInfo(){return Vn(zl,this).cssFontInfo}get systemFontInfo(){return Vn(zl,this).systemFontInfo}get defaultVMetrics(){return Vn(zl,this).defaultVMetrics}}function Hl(t){if("string"!==typeof t)return null;if(t.endsWith("/"))return t;throw new Error('Invalid factory url: "'.concat(t,'" must include trailing slash.'))}const Vl=t=>"object"===typeof t&&Number.isInteger(null===t||void 0===t?void 0:t.num)&&t.num>=0&&Number.isInteger(null===t||void 0===t?void 0:t.gen)&&t.gen>=0,Gl=function(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!t(i)&&!Number.isInteger(i))return!1;if(!e(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Vl,t=>"object"===typeof t&&"string"===typeof(null===t||void 0===t?void 0:t.name));var ql=new WeakMap,Xl=new WeakMap;class Yl{constructor(){zn(this,ql,new Map),zn(this,Xl,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};Vn(Xl,this).then(()=>{for(const[t]of Vn(ql,this))t.call(this,n)})}addEventListener(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void Ri("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}Vn(ql,this).set(e,i)}removeEventListener(t,e){const n=Vn(ql,this).get(e);null===n||void 0===n||n(),Vn(ql,this).delete(e)}terminate(){for(const[,t]of Vn(ql,this))null===t||void 0===t||t();Vn(ql,this).clear()}}const Kl=1,Ql=2,$l=1,Jl=2,Zl=3,tc=4,ec=5,nc=6,ic=7,rc=8;function sc(){}function ac(t){if(t instanceof Hi||t instanceof ji||t instanceof Bi||t instanceof zi||t instanceof Wi)return t;switch(t instanceof Error||"object"===typeof t&&null!==t||Di('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Hi(t.message);case"InvalidPDFException":return new ji(t.message);case"PasswordException":return new Bi(t.message,t.code);case"ResponseException":return new zi(t.message,t.status,t.missing);case"UnknownErrorException":return new Wi(t.message,t.details)}return new Wi(t.message,t.toString())}var oc=new WeakMap,lc=new WeakSet;class cc{constructor(t,e,n){jn(this,lc),zn(this,oc,new AbortController),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Un(lc,this,uc).bind(this),{signal:Vn(oc,this).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:t,streamId:r,data:e,desiredSize:n.desiredSize},i),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[r].pullCall=e,o.postMessage({sourceName:s,targetName:a,stream:nc,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:t=>{Li(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[r].cancelCall=e,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:$l,streamId:r,reason:ac(t)}),e.promise}},n)}destroy(){var t;null===(t=Vn(oc,this))||void 0===t||t.abort(),Gn(oc,this,null)}}function uc(t){let{data:e}=t;if(e.targetName!==this.sourceName)return;if(e.stream)return void Un(lc,this,dc).call(this,e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error("Cannot resolve callback ".concat(t));if(delete this.callbackCapabilities[t],e.callback===Kl)n.resolve(e.data);else{if(e.callback!==Ql)throw new Error("Unexpected callback case");n.reject(ac(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){const t=this.sourceName,i=e.sourceName,r=this.comObj;return void Promise.try(n,e.data).then(function(n){r.postMessage({sourceName:t,targetName:i,callback:Kl,callbackId:e.callbackId,data:n})},function(n){r.postMessage({sourceName:t,targetName:i,callback:Ql,callbackId:e.callbackId,reason:ac(n)})})}e.streamId?Un(lc,this,hc).call(this,e):n(e.data)}function hc(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,s=this,a=this.actionHandler[t.action],o={enqueue(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:tc,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Zl,streamId:e}),delete s.streamSinks[e])},error(t){Li(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:ec,streamId:e,reason:ac(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,Promise.try(a,t.data,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:rc,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:rc,streamId:e,reason:ac(t)})})}function dc(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,s=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case rc:t.success?s.startCall.resolve():s.startCall.reject(ac(t.reason));break;case ic:t.success?s.pullCall.resolve():s.pullCall.reject(ac(t.reason));break;case nc:if(!a){r.postMessage({sourceName:n,targetName:i,stream:ic,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||sc).then(function(){r.postMessage({sourceName:n,targetName:i,stream:ic,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:ic,streamId:e,reason:ac(t)})});break;case tc:if(Li(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case Zl:if(Li(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),Un(lc,this,pc).call(this,s,e);break;case ec:Li(s,"error should have stream controller"),s.controller.error(ac(t.reason)),Un(lc,this,pc).call(this,s,e);break;case Jl:t.success?s.cancelCall.resolve():s.cancelCall.reject(ac(t.reason)),Un(lc,this,pc).call(this,s,e);break;case $l:if(!a)break;const o=ac(t.reason);Promise.try(a.onCancel||sc,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Jl,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:Jl,streamId:e,reason:ac(t)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async function pc(t,e){var n,i,r;await Promise.allSettled([null===(n=t.startCall)||void 0===n?void 0:n.promise,null===(i=t.pullCall)||void 0===i?void 0:i.promise,null===(r=t.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[e]}var fc=new WeakMap;class gc{constructor(t){let{enableHWA:e=!1}=t;zn(this,fc,!1),Gn(fc,this,e)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Vn(fc,this)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Di("Abstract method `_createCanvas` called.")}}class mc extends gc{constructor(t){let{ownerDocument:e=globalThis.document,enableHWA:n=!1}=t;super({enableHWA:n}),this._document=e}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class vc{constructor(t){let{baseUrl:e=null,isCompressed:n=!0}=t;this.baseUrl=e,this.isCompressed=n}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(t=>({cMapData:t,isCompressed:this.isCompressed})).catch(t=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(t){Di("Abstract method `_fetch` called.")}}class yc extends vc{async _fetch(t){const e=await or(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Gi(e)}}class bc{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(){}}var wc=new WeakMap,_c=new WeakMap,xc=new WeakMap,kc=new WeakMap,Ac=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Cc=new WeakSet;class Mc extends bc{constructor(t){let{docId:e,ownerDocument:n=globalThis.document}=t;super(),jn(this,Cc),zn(this,wc,void 0),zn(this,_c,void 0),zn(this,xc,void 0),zn(this,kc,void 0),zn(this,Ac,void 0),zn(this,Sc,void 0),zn(this,Ec,0),Gn(kc,this,e),Gn(Ac,this,n)}addFilter(t){var e,n;if(!t)return"none";let i=Hn(Cc,this,Tc).get(t);if(i)return i;const[r,s,a]=Un(Cc,this,Dc).call(this,t),o=1===t.length?r:"".concat(r).concat(s).concat(a);if(i=Hn(Cc,this,Tc).get(o),i)return Hn(Cc,this,Tc).set(t,i),i;const l="g_".concat(Vn(kc,this),"_transfer_map_").concat((Gn(Ec,this,(e=Vn(Ec,this),n=e++,e)),n)),c=Un(Cc,this,Lc).call(this,l);Hn(Cc,this,Tc).set(t,c),Hn(Cc,this,Tc).set(o,c);const u=Un(Cc,this,Fc).call(this,l);return Un(Cc,this,Bc).call(this,r,s,a,u),c}addHCMFilter(t,e){var n;const i="".concat(t,"-").concat(e),r="base";let s=Hn(Cc,this,Pc).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},Hn(Cc,this,Pc).set(r,s));if(!t||!e)return s.url;const o=Un(Cc,this,jc).call(this,t);t=Yi.makeHexColor(...o);const l=Un(Cc,this,jc).call(this,e);if(e=Yi.makeHexColor(...l),Hn(Cc,this,Rc).style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;const c=new Array(256);for(let f=0;f<=255;f++){const t=f/255;c[f]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const u=c.join(","),h="g_".concat(Vn(kc,this),"_hcm_filter"),d=s.filter=Un(Cc,this,Fc).call(this,h);Un(Cc,this,Bc).call(this,u,u,u,d),Un(Cc,this,Ic).call(this,d);const p=(t,e)=>{const n=o[t]/255,i=l[t]/255,r=new Array(e+1);for(let s=0;s<=e;s++)r[s]=n+s/e*(i-n);return r.join(",")};return Un(Cc,this,Bc).call(this,p(0,5),p(1,5),p(2,5),d),s.url=Un(Cc,this,Lc).call(this,h),s.url}addAlphaFilter(t){var e,n;let i=Hn(Cc,this,Tc).get(t);if(i)return i;const[r]=Un(Cc,this,Dc).call(this,[t]),s="alpha_".concat(r);if(i=Hn(Cc,this,Tc).get(s),i)return Hn(Cc,this,Tc).set(t,i),i;const a="g_".concat(Vn(kc,this),"_alpha_map_").concat((Gn(Ec,this,(e=Vn(Ec,this),n=e++,e)),n)),o=Un(Cc,this,Lc).call(this,a);Hn(Cc,this,Tc).set(t,o),Hn(Cc,this,Tc).set(s,o);const l=Un(Cc,this,Fc).call(this,a);return Un(Cc,this,Wc).call(this,r,l),o}addLuminosityFilter(t){var e,n;let i,r,s=Hn(Cc,this,Tc).get(t||"luminosity");if(s)return s;if(t?([i]=Un(Cc,this,Dc).call(this,[t]),r="luminosity_".concat(i)):r="luminosity",s=Hn(Cc,this,Tc).get(r),s)return Hn(Cc,this,Tc).set(t,s),s;const a="g_".concat(Vn(kc,this),"_luminosity_map_").concat((Gn(Ec,this,(e=Vn(Ec,this),n=e++,e)),n)),o=Un(Cc,this,Lc).call(this,a);Hn(Cc,this,Tc).set(t,o),Hn(Cc,this,Tc).set(r,o);const l=Un(Cc,this,Fc).call(this,a);return Un(Cc,this,Nc).call(this,l),t&&Un(Cc,this,Wc).call(this,i,l),o}addHighlightHCMFilter(t,e,n,i,r){var s;const a="".concat(e,"-").concat(n,"-").concat(i,"-").concat(r);let o=Hn(Cc,this,Pc).get(t);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},Hn(Cc,this,Pc).set(t,o));if(!e||!n)return o.url;const[c,u]=[e,n].map(Un(Cc,this,jc).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,f]=[i,r].map(Un(Cc,this,jc).bind(this));d<h&&([h,d,p,f]=[d,h,f,p]),Hn(Cc,this,Rc).style.color="";const g=(t,e,n)=>{const i=new Array(256),r=(d-h)/n,s=t/255,a=(e-t)/(255*n);let o=0;for(let l=0;l<=n;l++){const t=Math.round(h+l*r),e=s+l*a;for(let n=o;n<=t;n++)i[n]=e;o=t+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(Vn(kc,this),"_hcm_").concat(t,"_filter"),v=o.filter=Un(Cc,this,Fc).call(this,m);return Un(Cc,this,Ic).call(this,v),Un(Cc,this,Bc).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url=Un(Cc,this,Lc).call(this,m),o.url}destroy(){var t,e,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(t=Vn(Sc,this))&&void 0!==t&&t.size||(null===(e=Vn(xc,this))||void 0===e||e.parentNode.parentNode.remove(),Gn(xc,this,null),null===(n=Vn(_c,this))||void 0===n||n.clear(),Gn(_c,this,null),null===(i=Vn(Sc,this))||void 0===i||i.clear(),Gn(Sc,this,null),Gn(Ec,this,0))}}function Tc(t){return Vn(_c,t)||Gn(_c,t,new Map)}function Pc(t){return Vn(Sc,t)||Gn(Sc,t,new Map)}function Rc(t){if(!Vn(xc,t)){const e=Vn(Ac,t).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=Vn(Ac,t).createElementNS(sr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Gn(xc,t,Vn(Ac,t).createElementNS(sr,"defs")),e.append(i),i.append(Vn(xc,t)),Vn(Ac,t).body.append(e)}return Vn(xc,t)}function Dc(t){if(1===t.length){const e=t[0],n=new Array(256);for(let t=0;t<256;t++)n[t]=e[t]/255;const i=n.join(",");return[i,i,i]}const[e,n,i]=t,r=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=e[o]/255,s[o]=n[o]/255,a[o]=i[o]/255;return[r.join(","),s.join(","),a.join(",")]}function Lc(t){if(void 0===Vn(wc,this)){Gn(wc,this,"");const t=Vn(Ac,this).URL;t!==Vn(Ac,this).baseURI&&(ur(t)?Ri('#createUrl: ignore "data:"-URL for performance reasons.'):Gn(wc,this,Ii(t,"")))}return"url(".concat(Vn(wc,this),"#").concat(t,")")}function Nc(t){const e=Vn(Ac,this).createElementNS(sr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function Ic(t){const e=Vn(Ac,this).createElementNS(sr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function Fc(t){const e=Vn(Ac,this).createElementNS(sr,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),Hn(Cc,this,Rc).append(e),e}function Oc(t,e,n){const i=Vn(Ac,this).createElementNS(sr,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function Bc(t,e,n,i){const r=Vn(Ac,this).createElementNS(sr,"feComponentTransfer");i.append(r),Un(Cc,this,Oc).call(this,r,"feFuncR",t),Un(Cc,this,Oc).call(this,r,"feFuncG",e),Un(Cc,this,Oc).call(this,r,"feFuncB",n)}function Wc(t,e){const n=Vn(Ac,this).createElementNS(sr,"feComponentTransfer");e.append(n),Un(Cc,this,Oc).call(this,n,"feFuncA",t)}function jc(t){return Hn(Cc,this,Rc).style.color=t,yr(getComputedStyle(Hn(Cc,this,Rc)).getPropertyValue("color"))}class zc{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch(t=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(t){Di("Abstract method `_fetch` called.")}}class Uc extends zc{async _fetch(t){const e=await or(t,"arraybuffer");return new Uint8Array(e)}}class Hc{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch(t=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(t){Di("Abstract method `_fetch` called.")}}class Vc extends Hc{async _fetch(t){const e=await or(t,"arraybuffer");return new Uint8Array(e)}}async function Gc(t){const e=process.getBuiltinModule("fs"),n=await e.promises.readFile(t);return new Uint8Array(n)}Xn&&Ri("Please use the `legacy` build in Node.js environments.");class qc extends bc{}class Xc extends gc{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire("file:///Users/chromatrical/CAREER/Side%20Projects/SME%20WebApp%20Projects/Resume%20Reader%20v1/node_modules/react-pdf/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(t,e)}}class Yc extends vc{async _fetch(t){return Gc(t)}}class Kc extends zc{async _fetch(t){return Gc(t)}}class Qc extends Hc{async _fetch(t){return Gc(t)}}const $c="__forcedDependency",{floor:Jc,ceil:Zc}=Math;function tu(t,e,n,i,r,s){t[4*e+0]=Math.min(t[4*e+0],n),t[4*e+1]=Math.min(t[4*e+1],i),t[4*e+2]=Math.max(t[4*e+2],r),t[4*e+3]=Math.max(t[4*e+3],s)}const eu=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var nu=new WeakMap,iu=new WeakMap;class ru{constructor(t,e){zn(this,nu,void 0),zn(this,iu,void 0),Gn(nu,this,t),Gn(iu,this,e)}get length(){return Vn(nu,this).length}isEmpty(t){return Vn(nu,this)[t]===eu}minX(t){return Vn(iu,this)[4*t+0]/256}minY(t){return Vn(iu,this)[4*t+1]/256}maxX(t){return(Vn(iu,this)[4*t+2]+1)/256}maxY(t){return(Vn(iu,this)[4*t+3]+1)/256}}const su=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};var au=new WeakMap,ou=new WeakMap,lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,hu=new WeakMap,du=new WeakMap,pu=new WeakMap,fu=new WeakMap,gu=new WeakMap,mu=new WeakMap,vu=new WeakMap,yu=new WeakMap,bu=new WeakMap,wu=new WeakMap,_u=new WeakMap,xu=new WeakMap,ku=new WeakSet;class Au{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];jn(this,ku),zn(this,au,{__proto__:null}),zn(this,ou,{__proto__:null,transform:[],moveText:[],sameLineText:[],[$c]:[]}),zn(this,lu,new Map),zn(this,cu,[]),zn(this,uu,[]),zn(this,hu,[[1,0,0,1,0,0]]),zn(this,du,[-1/0,-1/0,1/0,1/0]),zn(this,pu,new Float64Array([1/0,1/0,-1/0,-1/0])),zn(this,fu,-1),zn(this,gu,new Set),zn(this,mu,new Map),zn(this,vu,new Map),zn(this,yu,void 0),zn(this,bu,void 0),zn(this,wu,void 0),zn(this,_u,void 0),zn(this,xu,void 0),Gn(yu,this,t.width),Gn(bu,this,t.height),Un(ku,this,Su).call(this,e),n&&Gn(xu,this,new Map)}growOperationsCount(t){t>=Vn(_u,this).length&&Un(ku,this,Su).call(this,t,Vn(_u,this))}save(t){return Gn(au,this,{__proto__:Vn(au,this)}),Gn(ou,this,{__proto__:Vn(ou,this),transform:{__proto__:Vn(ou,this).transform},moveText:{__proto__:Vn(ou,this).moveText},sameLineText:{__proto__:Vn(ou,this).sameLineText},[$c]:{__proto__:Vn(ou,this)[$c]}}),Gn(du,this,{__proto__:Vn(du,this)}),Vn(cu,this).push(t),this}restore(t){const e=Object.getPrototypeOf(Vn(au,this));if(null===e)return this;Gn(au,this,e),Gn(ou,this,Object.getPrototypeOf(Vn(ou,this))),Gn(du,this,Object.getPrototypeOf(Vn(du,this)));const n=Vn(cu,this).pop();var i;void 0!==n&&(null===(i=su(Vn(xu,this),t))||void 0===i||i.dependencies.add(n),Vn(_u,this)[t]=Vn(_u,this)[n]);return this}recordOpenMarker(t){return Vn(cu,this).push(t),this}getOpenMarker(){return 0===Vn(cu,this).length?null:Vn(cu,this).at(-1)}recordCloseMarker(t){const e=Vn(cu,this).pop();var n;void 0!==e&&(null===(n=su(Vn(xu,this),t))||void 0===n||n.dependencies.add(e),Vn(_u,this)[t]=Vn(_u,this)[e]);return this}beginMarkedContent(t){return Vn(uu,this).push(t),this}endMarkedContent(t){const e=Vn(uu,this).pop();var n;void 0!==e&&(null===(n=su(Vn(xu,this),t))||void 0===n||n.dependencies.add(e),Vn(_u,this)[t]=Vn(_u,this)[e]);return this}pushBaseTransform(t){return Vn(hu,this).push(Yi.multiplyByDOMMatrix(Vn(hu,this).at(-1),t.getTransform())),this}popBaseTransform(){return Vn(hu,this).length>1&&Vn(hu,this).pop(),this}recordSimpleData(t,e){return Vn(au,this)[t]=e,this}recordIncrementalData(t,e){return Vn(ou,this)[t].push(e),this}resetIncrementalData(t,e){return Vn(ou,this)[t].length=0,this}recordNamedData(t,e){return Vn(lu,this).set(t,e),this}recordSimpleDataFromNamed(t,e,n){var i;Vn(au,this)[t]=null!==(i=Vn(lu,this).get(e))&&void 0!==i?i:n}recordFutureForcedDependency(t,e){return this.recordIncrementalData($c,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in Vn(au,this)&&this.recordFutureForcedDependency(e,Vn(au,this)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of Vn(gu,this))this.recordFutureForcedDependency($c,t);return this}resetBBox(t){return Vn(fu,this)!==t&&(Gn(fu,this,t),Vn(pu,this)[0]=1/0,Vn(pu,this)[1]=1/0,Vn(pu,this)[2]=-1/0,Vn(pu,this)[3]=-1/0),this}recordClipBox(t,e,n,i,r,s){const a=Yi.multiplyByDOMMatrix(Vn(hu,this).at(-1),e.getTransform()),o=[1/0,1/0,-1/0,-1/0];Yi.axialAlignedBoundingBox([n,r,i,s],a,o);const l=Yi.intersect(Vn(du,this),o);return l?(Vn(du,this)[0]=l[0],Vn(du,this)[1]=l[1],Vn(du,this)[2]=l[2],Vn(du,this)[3]=l[3]):(Vn(du,this)[0]=Vn(du,this)[1]=1/0,Vn(du,this)[2]=Vn(du,this)[3]=-1/0),this}recordBBox(t,e,n,i,r,s){const a=Vn(du,this);if(a[0]===1/0)return this;const o=Yi.multiplyByDOMMatrix(Vn(hu,this).at(-1),e.getTransform());if(a[0]===-1/0)return Yi.axialAlignedBoundingBox([n,r,i,s],o,Vn(pu,this)),this;const l=[1/0,1/0,-1/0,-1/0];return Yi.axialAlignedBoundingBox([n,r,i,s],o,l),Vn(pu,this)[0]=Math.min(Vn(pu,this)[0],Math.max(l[0],a[0])),Vn(pu,this)[1]=Math.min(Vn(pu,this)[1],Math.max(l[1],a[1])),Vn(pu,this)[2]=Math.max(Vn(pu,this)[2],Math.min(l[2],a[2])),Vn(pu,this)[3]=Math.max(Vn(pu,this)[3],Math.min(l[3],a[3])),this}recordCharacterBBox(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&Vn(vu,this).get(n),!1!==l&&(c=[0,0,0,0],Yi.axialAlignedBoundingBox(o,n.fontMatrix,c),1===i&&0===r&&0===s||Yi.scaleMinMax([i,0,0,-i,r,s],c),l)))return this.recordBBox(t,e,c[0],c[2],c[1],c[3]);if(!a)return this.recordFullPageBBox(t);const u=a();return o&&c&&void 0===l&&(l=c[0]<=r-u.actualBoundingBoxLeft&&c[2]>=r+u.actualBoundingBoxRight&&c[1]<=s-u.actualBoundingBoxAscent&&c[3]>=s+u.actualBoundingBoxDescent,Vn(vu,this).set(n,l),l)?this.recordBBox(t,e,c[0],c[2],c[1],c[3]):this.recordBBox(t,e,r-u.actualBoundingBoxLeft,r+u.actualBoundingBoxRight,s-u.actualBoundingBoxAscent,s+u.actualBoundingBoxDescent)}recordFullPageBBox(t){return Vn(pu,this)[0]=Math.max(0,Vn(du,this)[0]),Vn(pu,this)[1]=Math.max(0,Vn(du,this)[1]),Vn(pu,this)[2]=Math.min(Vn(yu,this),Vn(du,this)[2]),Vn(pu,this)[3]=Math.min(Vn(bu,this),Vn(du,this)[3]),this}getSimpleIndex(t){return Vn(au,this)[t]}recordDependencies(t,e){const n=Vn(gu,this),i=Vn(au,this),r=Vn(ou,this);for(const s of e)s in Vn(au,this)?n.add(i[s]):s in r&&r[s].forEach(n.add,n);return this}recordNamedDependency(t,e){return Vn(lu,this).has(e)&&Vn(gu,this).add(Vn(lu,this).get(e)),this}recordOperation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.recordDependencies(t,[$c]),Vn(xu,this)){const e=su(Vn(xu,this),t),{dependencies:n}=e;Vn(gu,this).forEach(n.add,n),Vn(cu,this).forEach(n.add,n),Vn(uu,this).forEach(n.add,n),n.delete(t),e.isRenderingOperation=!0}if(Vn(fu,this)===t){const n=Jc(256*Vn(pu,this)[0]/Vn(yu,this)),i=Jc(256*Vn(pu,this)[1]/Vn(bu,this)),r=Zc(256*Vn(pu,this)[2]/Vn(yu,this)),s=Zc(256*Vn(pu,this)[3]/Vn(bu,this));tu(Vn(wu,this),t,n,i,r,s);for(const e of Vn(gu,this))e!==t&&tu(Vn(wu,this),e,n,i,r,s);for(const e of Vn(cu,this))e!==t&&tu(Vn(wu,this),e,n,i,r,s);for(const e of Vn(uu,this))e!==t&&tu(Vn(wu,this),e,n,i,r,s);e||(Vn(gu,this).clear(),Gn(fu,this,-1))}return this}recordShowTextOperation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(Vn(gu,this));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Vn(fu,this)===t&&(Gn(fu,this,-1),Vn(du,this)[0]=Math.max(Vn(du,this)[0],Vn(pu,this)[0]),Vn(du,this)[1]=Math.max(Vn(du,this)[1],Vn(pu,this)[1]),Vn(du,this)[2]=Math.min(Vn(du,this)[2],Vn(pu,this)[2]),Vn(du,this)[3]=Math.min(Vn(du,this)[3],Vn(pu,this)[3]),e||Vn(gu,this).clear()),this}_takePendingDependencies(){const t=Vn(gu,this);return Gn(gu,this,new Set),t}_extractOperation(t){const e=Vn(mu,this).get(t);return Vn(mu,this).delete(t),e}_pushPendingDependencies(t){for(const e of t)Vn(gu,this).add(e)}take(){return Vn(vu,this).clear(),new ru(Vn(_u,this),Vn(wu,this))}takeDebugMetadata(){return Vn(xu,this)}}function Su(t,e){const n=new ArrayBuffer(4*t);Gn(wu,this,new Uint8ClampedArray(n)),Gn(_u,this,new Uint32Array(n)),e&&e.length>0?(Vn(_u,this).set(e),Vn(_u,this).fill(eu,e.length)):Vn(_u,this).fill(eu)}var Eu=new WeakMap,Cu=new WeakMap,Mu=new WeakMap,Tu=new WeakMap,Pu=new WeakMap;class Ru{constructor(t,e,n){if(zn(this,Eu,void 0),zn(this,Cu,void 0),zn(this,Mu,void 0),zn(this,Tu,0),zn(this,Pu,0),t instanceof Ru&&Vn(Mu,t)===!!n)return t;Gn(Eu,this,t),Gn(Cu,this,e),Gn(Mu,this,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){var e;return Gn(Pu,this,(e=Vn(Pu,this),e++,e)),Vn(Eu,this).save(Vn(Cu,this)),this}restore(t){var e;Vn(Pu,this)>0&&(Vn(Eu,this).restore(Vn(Cu,this)),Gn(Pu,this,(e=Vn(Pu,this),e--,e)));return this}recordOpenMarker(t){var e;return Gn(Tu,this,(e=Vn(Tu,this),e++,e)),this}getOpenMarker(){return Vn(Tu,this)>0?Vn(Cu,this):Vn(Eu,this).getOpenMarker()}recordCloseMarker(t){var e;return Gn(Tu,this,(e=Vn(Tu,this),e--,e)),this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return Vn(Eu,this).pushBaseTransform(t),this}popBaseTransform(){return Vn(Eu,this).popBaseTransform(),this}recordSimpleData(t,e){return Vn(Eu,this).recordSimpleData(t,Vn(Cu,this)),this}recordIncrementalData(t,e){return Vn(Eu,this).recordIncrementalData(t,Vn(Cu,this)),this}resetIncrementalData(t,e){return Vn(Eu,this).resetIncrementalData(t,Vn(Cu,this)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return Vn(Eu,this).recordSimpleDataFromNamed(t,e,Vn(Cu,this)),this}recordFutureForcedDependency(t,e){return Vn(Eu,this).recordFutureForcedDependency(t,Vn(Cu,this)),this}inheritSimpleDataAsFutureForcedDependencies(t){return Vn(Eu,this).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Vn(Eu,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return Vn(Mu,this)||Vn(Eu,this).resetBBox(Vn(Cu,this)),this}recordClipBox(t,e,n,i,r,s){return Vn(Mu,this)||Vn(Eu,this).recordClipBox(Vn(Cu,this),e,n,i,r,s),this}recordBBox(t,e,n,i,r,s){return Vn(Mu,this)||Vn(Eu,this).recordBBox(Vn(Cu,this),e,n,i,r,s),this}recordCharacterBBox(t,e,n,i,r,s,a){return Vn(Mu,this)||Vn(Eu,this).recordCharacterBBox(Vn(Cu,this),e,n,i,r,s,a),this}recordFullPageBBox(t){return Vn(Mu,this)||Vn(Eu,this).recordFullPageBBox(Vn(Cu,this)),this}getSimpleIndex(t){return Vn(Eu,this).getSimpleIndex(t)}recordDependencies(t,e){return Vn(Eu,this).recordDependencies(Vn(Cu,this),e),this}recordNamedDependency(t,e){return Vn(Eu,this).recordNamedDependency(Vn(Cu,this),e),this}recordOperation(t){return Vn(Eu,this).recordOperation(Vn(Cu,this),!0),this}recordShowTextOperation(t){return Vn(Eu,this).recordShowTextOperation(Vn(Cu,this),!0),this}bboxToClipBoxDropOperation(t){return Vn(Mu,this)||Vn(Eu,this).bboxToClipBoxDropOperation(Vn(Cu,this),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Du=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],Lu=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],Nu=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],Iu=["filter","fillColor","fillAlpha"],Fu=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],Ou=["transform"],Bu=["transform","fillColor"],Wu="Fill",ju="Stroke",zu="Shading";function Uu(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class Hu{isModifyingCurrentTransform(){return!1}getPattern(){Di("Abstract method `getPattern` called.")}}class Vu extends Hu{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===ju||i===Wu){const s=e.current.getClippedPathBoundingBox(i,br(t))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=Yi.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),Uu(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else Uu(t,this._bbox),r=this._createGradient(t);return r}}function Gu(t,e,n,i,r,s,a,o){const l=e.coords,c=e.colors,u=t.data,h=4*t.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=a,a=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d);const p=(l[n]+e.offsetX)*e.scaleX,f=(l[n+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,y=(l[r+1]+e.offsetY)*e.scaleY;if(f>=y)return;const b=c[s],w=c[s+1],_=c[s+2],x=c[a],k=c[a+1],A=c[a+2],S=c[o],E=c[o+1],C=c[o+2],M=Math.round(f),T=Math.round(y);let P,R,D,L,N,I,F,O;for(let B=M;B<=T;B++){if(B<m){const t=B<f?0:(f-B)/(f-m);P=p-(p-g)*t,R=b-(b-x)*t,D=w-(w-k)*t,L=_-(_-A)*t}else{let t;t=B>y?1:m===y?0:(m-B)/(m-y),P=g-(g-v)*t,R=x-(x-S)*t,D=k-(k-E)*t,L=A-(A-C)*t}let t;t=B<f?0:B>y?1:(f-B)/(f-y),N=p-(p-v)*t,I=b-(b-S)*t,F=w-(w-E)*t,O=_-(_-C)*t;const e=Math.round(Math.min(P,N)),n=Math.round(Math.max(P,N));let i=h*B+4*e;for(let r=e;r<=n;r++)t=(P-r)/(P-N),t<0?t=0:t>1&&(t=1),u[i++]=R-(R-I)*t|0,u[i++]=D-(D-F)*t|0,u[i++]=L-(L-O)*t|0,u[i++]=255}}function qu(t,e,n){const i=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let e=s*o;for(let s=0;s<c;s++,e++)Gu(t,n,i[e],i[e+1],i[e+o],r[e],r[e+1],r[e+o]),Gu(t,n,i[e+o+1],i[e+1],i[e+o],r[e+o+1],r[e+1],r[e+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Gu(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Xu extends Hu{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=s/o,u=a/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},d=o+4,p=l+4,f=n.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let n=0,i=t.length;n<i;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const v of this._figures)qu(m,v,h);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Uu(t,this._bbox);const r=new Float32Array(2);if(i===zu)Yi.singularValueDecompose2dScale(br(t),r);else if(this.matrix){Yi.singularValueDecompose2dScale(this.matrix,r);const[t,n]=r;Yi.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=t,r[1]*=n}else Yi.singularValueDecompose2dScale(e.baseTransform,r);const s=this._createMeshCanvas(r,i===zu?null:this._background,e.cachedCanvases);return i!==zu&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}class Yu extends Hu{getPattern(){return"hotpink"}}const Ku=1,Qu=2;class $u{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){var n,i;const{bbox:r,operatorList:s,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Pi("TilingType: "+o);const d=r[0],p=r[1],f=r[2],g=r[3],m=f-d,v=g-p,y=new Float32Array(2);Yi.singularValueDecompose2dScale(this.matrix,y);const[b,w]=y;Yi.singularValueDecompose2dScale(this.baseTransform,y);const _=b*y[0],x=w*y[1];let k=m,A=v,S=!1,E=!1;const C=Math.ceil(u*_),M=Math.ceil(h*x);C>=Math.ceil(m*_)?k=u:S=!0,M>=Math.ceil(v*x)?A=h:E=!0;const T=this.getSizeAndScale(k,this.ctx.canvas.width,_),P=this.getSizeAndScale(A,this.ctx.canvas.height,x),R=t.cachedCanvases.getCanvas("pattern",T.size,P.size),D=R.context,L=c.createCanvasGraphics(D,e);if(L.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(L,a,l),D.translate(-T.scale*d,-P.scale*p),L.transform(0,T.scale,0,0,P.scale,0,0),D.save(),null===(n=L.dependencyTracker)||void 0===n||n.save(),this.clipBbox(L,d,p,f,g),L.baseTransform=br(L.ctx),L.executeOperatorList(s),L.endDrawing(),null===(i=L.dependencyTracker)||void 0===i||i.restore(),D.restore(),S||E){const e=R.canvas;S&&(k=u),E&&(A=h);const n=this.getSizeAndScale(k,this.ctx.canvas.width,_),i=this.getSizeAndScale(A,this.ctx.canvas.height,x),r=n.size,s=i.size,a=t.cachedCanvases.getCanvas("pattern-workaround",r,s),o=a.context,l=S?Math.floor(m/u):0,c=E?Math.floor(v/h):0;for(let t=0;t<=l;t++)for(let n=0;n<=c;n++)o.drawImage(e,r*t,s*n,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:d,offsetY:p}}return{canvas:R.canvas,scaleX:T.scale,scaleY:P.scale,offsetX:d,offsetY:p}}getSizeAndScale(t,e,n){const i=Math.max($u.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const s=i-e,a=r-n;t.ctx.rect(e,n,s,a),Yi.axialAlignedBoundingBox([e,n,i,r],br(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case Ku:const{fillStyle:t,strokeStyle:s}=this.ctx;i.fillStyle=r.fillColor=t,i.strokeStyle=r.strokeColor=s;break;case Qu:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new Ui("Unsupported paint type: ".concat(e))}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,r){let s=n;i!==zu&&(s=Yi.transform(s,e.baseTransform),this.matrix&&(s=Yi.transform(s,this.matrix)));const a=this.createPatternCanvas(e,r);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function Ju(t){let{src:e,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=qi.isLittleEndian?4278190080:255,[c,u]=o?[a,l]:[l,a],h=r>>3,d=7&r,p=e.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<s;g++){for(const r=n+h;n<r;n++){const t=n<p?e[n]:255;i[f++]=128&t?u:c,i[f++]=64&t?u:c,i[f++]=32&t?u:c,i[f++]=16&t?u:c,i[f++]=8&t?u:c,i[f++]=4&t?u:c,i[f++]=2&t?u:c,i[f++]=1&t?u:c}if(0===d)continue;const t=n<p?e[n++]:255;for(let e=0;e<d;e++)i[f++]=t&1<<7-e?u:c}return{srcPos:n,destPos:f}}c($u,"MAX_PATTERN_SIZE",3e3);const Zu=16,th=new DOMMatrix,eh=new Float32Array(2),nh=new Float32Array([1/0,1/0,-1/0,-1/0]);class ih{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function rh(t,e,n,i,r,s,a,o,l,c){const[u,h,d,p,f,g]=br(t);if(0===h&&0===d){const m=a*u+f,v=Math.round(m),y=o*p+g,b=Math.round(y),w=(a+l)*u+f,_=Math.abs(Math.round(w)-v)||1,x=(o+c)*p+g,k=Math.abs(Math.round(x)-b)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(p),v,b),t.drawImage(e,n,i,r,s,0,0,_,k),t.setTransform(u,h,d,p,f,g),[_,k]}if(0===u&&0===p){const m=o*d+f,v=Math.round(m),y=a*h+g,b=Math.round(y),w=(o+c)*d+f,_=Math.abs(Math.round(w)-v)||1,x=(a+l)*h+g,k=Math.abs(Math.round(x)-b)||1;return t.setTransform(0,Math.sign(h),Math.sign(d),0,v,b),t.drawImage(e,n,i,r,s,0,0,k,_),t.setTransform(u,h,d,p,f,g),[k,_]}t.drawImage(e,n,i,r,s,a,o,l,c);return[Math.hypot(u,h)*l,Math.hypot(d,p)*c]}class sh{constructor(t,e,n){c(this,"alphaIsShape",!1),c(this,"fontSize",0),c(this,"fontSizeScale",1),c(this,"textMatrix",null),c(this,"textMatrixScale",1),c(this,"fontMatrix",Yn),c(this,"leading",0),c(this,"x",0),c(this,"y",0),c(this,"lineX",0),c(this,"lineY",0),c(this,"charSpacing",0),c(this,"wordSpacing",0),c(this,"textHScale",1),c(this,"textRenderingMode",li),c(this,"textRise",0),c(this,"fillColor","#000000"),c(this,"strokeColor","#000000"),c(this,"patternFill",!1),c(this,"patternStroke",!1),c(this,"fillAlpha",1),c(this,"strokeAlpha",1),c(this,"lineWidth",1),c(this,"activeSMask",null),c(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=nh.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(t===ju){e||Di("Stroke bounding box must include transform."),Yi.singularValueDecompose2dScale(e,eh);const t=eh[0]*this.lineWidth/2,i=eh[1]*this.lineWidth/2;n[0]-=t,n[1]-=i,n[2]+=t,n[3]+=i}return n}updateClipFromPath(){const t=Yi.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(nh,0)}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Yi.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ah(t,e){if(e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,i=e.width,r=n%Zu,s=(n-r)/Zu,a=0===r?s:s+1,o=t.createImageData(i,Zu);let l,c=0;const u=e.data,h=o.data;let d,p,f,g;if(e.kind===fi.GRAYSCALE_1BPP){const e=u.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,y=qi.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(f=d<s?Zu:r,l=0,p=0;p<f;p++){const t=e-c;let r=0;const s=t>m?i:8*t-7,a=-8&s;let o=0,h=0;for(;r<a;r+=8)h=u[c++],n[l++]=128&h?v:y,n[l++]=64&h?v:y,n[l++]=32&h?v:y,n[l++]=16&h?v:y,n[l++]=8&h?v:y,n[l++]=4&h?v:y,n[l++]=2&h?v:y,n[l++]=1&h?v:y;for(;r<s;r++)0===o&&(h=u[c++],o=128),n[l++]=h&o?v:y,o>>=1}for(;l<g;)n[l++]=0;t.putImageData(o,0,d*Zu)}}else if(e.kind===fi.RGBA_32BPP){for(p=0,g=i*Zu*4,d=0;d<s;d++)h.set(u.subarray(c,c+g)),c+=g,t.putImageData(o,0,p),p+=Zu;d<a&&(g=i*r*4,h.set(u.subarray(c,c+g)),t.putImageData(o,0,p))}else{if(e.kind!==fi.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(f=Zu,g=i*f,d=0;d<a;d++){for(d>=s&&(f=r,g=i*f),l=0,p=g;p--;)h[l++]=u[c++],h[l++]=u[c++],h[l++]=u[c++],h[l++]=255;t.putImageData(o,0,d*Zu)}}}function oh(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,i=e.width,r=n%Zu,s=(n-r)/Zu,a=0===r?s:s+1,o=t.createImageData(i,Zu);let l=0;const c=e.data,u=o.data;for(let h=0;h<a;h++){const e=h<s?Zu:r;({srcPos:l}=Ju({src:c,srcPos:l,dest:u,width:i,height:e,nonBlackColor:0})),t.putImageData(o,0,h*Zu)}}function lh(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function ch(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}function uh(t,e){if(e)return!0;Yi.singularValueDecompose2dScale(t,eh);const n=Math.fround(xr.pixelRatio*ar.PDF_TO_CSS_UNITS);return eh[0]<=n&&eh[1]<=n}const hh=["butt","round","square"],dh=["miter","round","bevel"],ph={},fh={};var gh=new WeakSet;class mh{constructor(t,e,n,i,r,s,a,o,l){let{optionalContentConfig:c,markedContentStack:u=null}=s;jn(this,gh),this.ctx=t,this.current=new sh(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new ih(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i;return"string"===typeof e?(null===(i=this.dependencyTracker)||void 0===i||i.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing(t){let{transform:e,viewport:n,transparency:i=!1,background:r=null}=t;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const t=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...br(this.compositeCtx))}this.ctx.save(),ch(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=br(this.ctx)}executeOperatorList(t,e,n,i,r){const s=t.argsArray,a=t.fnArray;let o=e||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,u=c?Date.now()+15:0;let h=0;const d=this.commonObjs,p=this.objs;let f,g;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;var m;if(!r||r(o))if(f=a[o],g=null!==(m=s[o])&&void 0!==m?m:null,f!==xi.dependency)null===g?this[f](o):this[f](o,...g);else for(const t of g){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(t,o);const e=t.startsWith("g_")?d:p;if(!e.has(t))return e.get(t,n),o}if(o++,o===l)return o;if(c&&++h>10){if(Date.now()>u)return n(),o;h=0}}}endDrawing(){Un(gh,this,vh).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),Un(gh,this,yh).call(this)}_scaleImage(t,e){var n,i;const r=null!==(n=t.width)&&void 0!==n?n:t.displayWidth,s=null!==(i=t.height)&&void 0!==i?i:t.displayHeight;let a,o,l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=r,h=s,d="prescale1";for(;l>2&&u>1||c>2&&h>1;){let e=u,n=h;l>2&&u>1&&(e=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/e),c>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/n),a=this.cachedCanvases.getCanvas(d,e,n),o=a.context,o.clearRect(0,0,e,n),o.drawImage(t,0,0,u,h,0,0,e,n),t=a.canvas,u=e,h=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){var n;const i=this.ctx,{width:r,height:s}=e,a=this.current.fillColor,o=this.current.patternFill,l=br(i);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const n=e.bitmap||e.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const i=c.get(u);if(i&&!o){var p;const e=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(t,Bu),{canvas:i,offsetX:e,offsetY:n}}h=i}h||(d=this.cachedCanvases.getCanvas("maskCanvas",r,s),oh(d.context,e));let f=Yi.transform(l,[1/r,0,0,-1/s,0,0]);f=Yi.transform(f,[1,0,0,1,0,-s]);const g=nh.slice();Yi.axialAlignedBoundingBox([0,0,r,s],f,g);const[m,v,y,b]=g,w=Math.round(y-m)||1,_=Math.round(b-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",w,_),k=x.context,A=m,S=v;k.translate(-A,-S),k.transform(...f),h||(h=this._scaleImage(d.canvas,wr(k)),h=h.img,c&&o&&c.set(u,h)),k.imageSmoothingEnabled=uh(br(k),e.interpolate),rh(k,h,0,0,h.width,h.height,0,0,r,s),k.globalCompositeOperation="source-in";const E=Yi.transform(wr(k),[1,0,0,1,-A,-S]);return k.fillStyle=o?a.getPattern(i,this,E,Wu,t):a,k.fillRect(0,0,r,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,Bu),{canvas:x.canvas,offsetX:Math.round(A),offsetY:Math.round(S)}}setLineWidth(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",t),this.ctx.lineCap=hh[e]}setLineJoin(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=dh[e]}setMiterLimit(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("dash",t);const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,i,r,s,a;for(const[o,l]of e)switch(o){case"LW":this.setLineWidth(t,l);break;case"LC":this.setLineCap(t,l);break;case"LJ":this.setLineJoin(t,l);break;case"ML":this.setMiterLimit(t,l);break;case"D":this.setDash(t,l[0],l[1]);break;case"RI":this.setRenderingIntent(t,l);break;case"FL":this.setFlatness(t,l);break;case"Font":this.setFont(t,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=l;break;case"ca":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("SMask",t),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(a=this.dependencyTracker)||void 0===a||a.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const s=this.ctx=r.context;s.setTransform(this.suspendedCtx.getTransform()),lh(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,r,s,a){e.transform(t,n,i,r,s,a),this.__originalTransform(t,n,i,r,s,a)},t.setTransform=function(t,n,i,r,s,a){e.setTransform(t,n,i,r,s,a),this.__originalSetTransform(t,n,i,r,s,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,r,s,a){e.bezierCurveTo(t,n,i,r,s,a),this.__originalBezierCurveTo(t,n,i,r,s,a)},t.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],s=i[1],a=i[2]-r,o=i[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(e.context,n,a,o,e.subtype,e.backdrop,e.transferMap,r,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,s,a,o,l,c,u){let h=t.canvas,d=o-c,p=l-u;if(s)if(d<0||p<0||d+n>h.width||p+i>h.height){const t=this.cachedCanvases.getCanvas("maskExtension",n,i),e=t.context;e.drawImage(h,-d,-p),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(0,0,n,i),e.globalCompositeOperation="source-over",h=t.canvas,d=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(d,p,n,i),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(d,p,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(h,d,p,n,i,o,l,n,i),e.restore()}save(t){var e;this.inSMaskMode&&lh(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(e=this.dependencyTracker)||void 0===e||e.save(t)}restore(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.restore(t),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(t,e,n,i,r,s,a){var o;null===(o=this.dependencyTracker)||void 0===o||o.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[r]=n;if(!i)return r||(r=n[0]=new Path2D),void this[e](t,r);if(null!==this.dependencyTracker){const n=e===xi.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const t=n[0]=new Path2D;for(let e=0,n=r.length;e<n;)switch(r[e++]){case ki:t.moveTo(r[e++],r[e++]);break;case Ai:t.lineTo(r[e++],r[e++]);break;case Si:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Ei:t.closePath();break;default:Ri("Unrecognized drawing path operator: ".concat(r[e-1]))}r=t}Yi.axialAlignedBoundingBox(i,br(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,wr(r),ju,t),n){const t=new Path2D;t.addPath(e,r.getTransform().invertSelf().multiplySelf(n)),e=t}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,Du),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(ju,br(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.fillColor;let a=!1;if(this.current.patternFill){var o;const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(null===(o=this.dependencyTracker)||void 0===o||o.save(t),r.save(),r.fillStyle=s.getPattern(r,this,wr(r),Wu,t),n){const t=new Path2D;t.addPath(e,r.getTransform().invertSelf().multiplySelf(n)),e=t}a=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,Lu),a)&&(r.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(t));i&&this.consumePath(t,e,l)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,Iu).recordOperation(t)}clip(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=ph}eoClip(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=fh}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(e=this.dependencyTracker)||void 0===e||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==e&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",t),n.recordCloseMarker(t)}if(void 0!==e){const t=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:r,y:s,fontSize:a,path:o}of e)o&&t.addPath(o,new DOMMatrix(n).preMultiplySelf(i).translate(r,s).scale(a,-a));n.clip(t)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var i,r;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),a=this.current;if(!s)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=s.fontMatrix||Yn,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||Ri("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=(null===(r=s.systemFontInfo)||void 0===r?void 0:r.css)||'"'.concat(o,'", ').concat(s.fallbackName);let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=n;n<16?h=16:n>100&&(h=100),this.current.fontSizeScale=n/h,this.ctx.font="".concat(u," ").concat(c," ").concat(h,"px ").concat(l)}setTextRenderingMode(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){var e,n;this.moveText(t,0,this.current.leading),null===(e=this.dependencyTracker)||void 0===e||e.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:t)}paintChar(t,e,n,i,r,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&di,d=!!(c&pi),p=o.patternFill&&!l.missingFile,f=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||d||p||f)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,e)),g&&(l.disableFontFace||p||f)){var m;let e;if(a.save(),a.translate(n,i),a.scale(u,-u),null===(m=this.dependencyTracker)||void 0===m||m.recordCharacterBBox(t,a,l),h===li||h===ui)if(r){e=a.getTransform(),a.setTransform(...r);const t=Un(gh,this,bh).call(this,g,e,r);a.fill(t)}else a.fill(g);if(h===ci||h===ui)if(s){e||(e=a.getTransform()),a.setTransform(...s);const{a:t,b:n,c:i,d:r}=e,o=Yi.inverseTransform(s),l=Yi.transform([t,n,i,r,0,0],o);Yi.singularValueDecompose2dScale(l,eh),a.lineWidth*=Math.max(eh[0],eh[1])/u,a.stroke(Un(gh,this,bh).call(this,g,e,s))}else a.lineWidth/=u,a.stroke(g);a.restore()}else{var v;if(h===li||h===ui)a.fillText(e,n,i),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(t,a,l,u,n,i,()=>a.measureText(e));if(h===ci||h===ui){var y;if(this.dependencyTracker)null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(t,a,l,u,n,i,()=>a.measureText(e)).recordDependencies(t,Du);a.strokeText(e,n,i)}}if(d){var b;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:br(a),x:n,y:i,fontSize:u,path:g}),null===(b=this.dependencyTracker)||void 0===b||b.recordCharacterBBox(t,a,l,u,n,i)}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Fi(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Fu).resetBBox(t),this.current.textRenderingMode&pi&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;var s;if(r.isType3Font)return this.showType3Text(t,e),void(null===(s=this.dependencyTracker)||void 0===s||s.recordShowTextOperation(t));const a=i.fontSize;var o;if(0===a)return void(null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(t));const l=this.ctx,c=i.fontSizeScale,u=i.charSpacing,h=i.wordSpacing,d=i.fontDirection,p=i.textHScale*d,f=e.length,g=r.vertical,m=g?1:-1,v=r.defaultVMetrics,y=a*i.fontMatrix[0],b=i.textRenderingMode===li&&!r.disableFontFace&&!i.patternFill;let w,_;if(l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),d>0?l.scale(p,-1):l.scale(p,1),i.patternFill){l.save();const e=i.fillColor.getPattern(l,this,wr(l),Wu,t);w=br(l),l.restore(),l.fillStyle=e}if(i.patternStroke){l.save();const e=i.strokeColor.getPattern(l,this,wr(l),ju,t);_=br(l),l.restore(),l.strokeStyle=e}let x=i.lineWidth;const k=i.textMatrixScale;if(0===k||0===x){const t=i.textRenderingMode&di;t!==ci&&t!==ui||(x=this.getSinglePixelWidth())}else x/=k;if(1!==c&&(l.scale(c,c),x/=c),l.lineWidth=x,r.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;const s=n.join("");if(l.fillText(s,0,0),null!==this.dependencyTracker){const e=l.measureText(s);this.dependencyTracker.recordBBox(t,this.ctx,-e.actualBoundingBoxLeft,e.actualBoundingBoxRight,-e.actualBoundingBoxAscent,e.actualBoundingBoxDescent).recordShowTextOperation(t)}return i.x+=r*y*p,l.restore(),void this.compose()}let A,S=0;for(A=0;A<f;++A){const n=e[A];if("number"===typeof n){S+=m*n*a/1e3;continue}let i=!1;const s=(n.isSpace?h:0)+u,o=n.fontChar,p=n.accent;let f,x,k,C=n.width;if(g){const t=n.vmetric||v,e=-(n.vmetric?t[1]:.5*C)*y,i=t[2]*y;C=t?-t[0]:C,f=e/c,x=(S+i)/c}else f=S/c,x=0;if(r.remeasure&&C>0){k=l.measureText(o);const t=1e3*k.width/a*c;if(C<t&&this.isFontSubpixelAAEnabled){const e=C/t;i=!0,l.save(),l.scale(e,1),f/=e}else C!==t&&(f+=(C-t)/2e3*a/c)}var E;if(this.contentVisible&&(n.isInFont||r.missingFile))if(b&&!p)l.fillText(o,f,x),null===(E=this.dependencyTracker)||void 0===E||E.recordCharacterBBox(t,l,k?{bbox:null}:r,a/c,f,x,()=>null!==k&&void 0!==k?k:l.measureText(o));else if(this.paintChar(t,o,f,x,w,_),p){const e=f+a*p.offset.x/c,n=x-a*p.offset.y/c;this.paintChar(t,p.fontChar,e,n,w,_)}S+=g?C*y-s*d:C*y+s*d,i&&l.restore()}g?i.y-=S:i.x+=S*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*a,h=i.fontMatrix||Yn,d=e.length;let p,f,g,m;if(i.textRenderingMode===hi||0===s)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(u,a);const v=this.dependencyTracker;for(this.dependencyTracker=v?new Ru(v,t):null,p=0;p<d;++p){if(f=e[p],"number"===typeof f){m=o*f*s/1e3,this.ctx.translate(m,0),i.x+=m*u;continue}const t=(f.isSpace?c:0)+l,a=r.charProcOperatorList[f.operatorListId];a?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(a),this.restore()):Ri('Type3 character "'.concat(f.operatorListId,'" is not available.'));const d=[f.width,0];Yi.applyTransform(d,h),g=d[0]*s+t,n.translate(g,0),i.x+=g*u}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,r,s,a){var o;const l=new Path2D;l.rect(i,r,s-i,a-r),this.ctx.clip(l),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(t,this.ctx,i,s,r,a).recordClipBox(t,this.ctx,i,s,r,a),this.endPath(t)}getColorN_Pattern(t,e){let n;if("TilingPattern"===e[0]){const t=this.baseTransform||br(this.ctx),i={createCanvasGraphics:(t,e)=>new mh(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Ru(this.dependencyTracker,e,!0):null)};n=new $u(e,this.ctx,i,t)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("strokeColor",t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("fillColor",t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=function(t){switch(t[0]){case"RadialAxial":return new Vu(t);case"Mesh":return new Xu(t);case"Dummy":return new Yu}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t,e)),this.cachedPatterns.set(e,n)),i&&(n.matrix=i),n}shadingFill(t,e){var n;if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,wr(i),zu,t);const s=wr(i);if(s){const{width:t,height:e}=i.canvas,n=nh.slice();Yi.axialAlignedBoundingBox([0,0,t,e],s,n);const[r,a,o,l]=n;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ou).recordDependencies(t,Lu).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Di("Should not call beginInlineImage")}beginImageData(){Di("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=br(this.ctx),n)){var i;Yi.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[e,r,s,a]=n,o=new Path2D;o.rect(e,r,s-e,a-r),this.ctx.clip(o),null===(i=this.dependencyTracker)||void 0===i||i.recordClipBox(t,this.ctx,e,s,r,a),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var n;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Pi("TODO: Support non-isolated groups."),e.knockout&&Ri("Knockout groups not supported.");const r=br(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=nh.slice();Yi.axialAlignedBoundingBox(e.bbox,br(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=Yi.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),p=d.context;p.translate(-o,-l),p.transform(...r);let f=new Path2D;const[g,m,v,y]=e.bbox;if(f.rect(g,m,v-g,y-m),e.matrix){const t=new Path2D;t.addPath(f,new DOMMatrix(e.matrix)),f=t}p.clip(f),e.smask&&this.smaskStack.push({canvas:d.canvas,context:p,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),e.smask&&!this.dependencyTracker||(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),lh(i,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){var n;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const e=br(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...e);const n=nh.slice();Yi.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],e,n),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,n,i,r,s){if(Un(gh,this,vh).call(this),ch(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const r=n[2]-n[0],a=n[3]-n[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=r,n[3]=a,Yi.singularValueDecompose2dScale(br(this.ctx),eh);const{viewportScale:t}=this,s=Math.ceil(r*this.outputScaleX*t),o=Math.ceil(a*this.outputScaleY*t);this.annotationCanvas=this.canvasFactory.create(s,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(eh[0],0,0,-eh[1],0,a*eh[1]),ch(this.ctx)}else{ch(this.ctx),this.endPath(t);const e=new Path2D;e.rect(n[0],n[1],r,a),this.ctx.clip(e)}}this.current=new sh(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),Un(gh,this,yh).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var n;if(!this.contentVisible)return;const i=e.count;(e=this.getObject(t,e.data,e)).count=i;const r=this.ctx,s=this._createMaskCanvas(t,e),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=br(c);c.transform(n,s,a,o,0,0);const h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(t);for(let p=0,f=l.length;p<f;p+=2){var d;const e=Yi.transform(u,[n,s,a,o,l[p],l[p+1]]);c.drawImage(h.canvas,e[4],e[5]),null===(d=this.dependencyTracker)||void 0===d||d.recordBBox(t,this.ctx,e[4],e[4]+h.canvas.width,e[5],e[5]+h.canvas.height)}c.restore(),this.compose(),null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var n,i;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordDependencies(t,Bu);for(const l of e){var o;const{data:e,width:n,height:i,transform:c}=l,u=this.cachedCanvases.getCanvas("maskCanvas",n,i),h=u.context;h.save();oh(h,this.getObject(t,e,l)),h.globalCompositeOperation="source-in",h.fillStyle=a?s.getPattern(h,this,wr(r),Wu,t):s,h.fillRect(0,0,n,i),h.restore(),r.save(),r.transform(...c),r.scale(1,-1),rh(r,u.canvas,0,0,n,i,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(t,r,0,n,0,i),r.restore()}this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);n?this.paintInlineImageXObject(t,n):Ri("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,i,r){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s)return void Ri("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[n,0,0,i,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(t,s,l)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",r.canvas}paintInlineImageXObject(t,e){var n;if(!this.contentVisible)return;const i=e.width,r=e.height,s=this.ctx;this.save(t);const{filter:a}=s;let o;if("none"!==a&&""!==a&&(s.filter="none"),s.scale(1/i,-1/r),e.bitmap)o=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)o=e;else{const t=this.cachedCanvases.getCanvas("inlineImage",i,r).context;ah(t,e),o=this.applyTransferMapsToCanvas(t)}const l=this._scaleImage(o,wr(s));s.imageSmoothingEnabled=uh(br(s),e.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordBBox(t,s,0,i,-r,0).recordDependencies(t,Nu).recordOperation(t),rh(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var i,r;if(!this.contentVisible)return;const s=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ah(i,e),a=this.applyTransferMapsToCanvas(i)}null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(t);for(const l of n){var o;s.save(),s.transform(...l.transform),s.scale(1,-1),rh(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(t,s,0,1,-1,0),s.restore()}null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&(null===(e=this.dependencyTracker)||void 0===e||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Lu).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.beginMarkedContent(t),"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;var s,a;this.pendingClip?(i||(this.pendingClip===fh?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,null===(s=this.dependencyTracker)||void 0===s||s.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(t);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=br(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let s,a;if(0===n&&0===i){const n=Math.abs(e),i=Math.abs(r);if(n===i)if(0===t)s=a=1/n;else{const e=n*t;s=a=e<1?1/e:1}else if(0===t)s=1/n,a=1/i;else{const e=n*t,r=i*t;s=e<1?1/e:1,a=r<1?1/r:1}}else{const o=Math.abs(e*r-n*i),l=Math.hypot(e,n),c=Math.hypot(i,r);if(0===t)s=c/o,a=l/o;else{const e=t*o;s=c>e?c/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[r,s]=this.getScaleForStroking();if(r===s)return n.lineWidth=(i||1)*r,void n.stroke(t);const a=n.getLineDash();e&&n.save(),n.scale(r,s),th.a=1/r,th.d=1/s;const o=new Path2D;if(o.addPath(t,th),a.length>0){const t=Math.max(r,s);n.setLineDash(a.map(e=>e/t)),n.lineDashOffset/=t}n.lineWidth=i||1,n.stroke(o),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}function vh(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function yh(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}function bh(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}for(const Q_ in xi)void 0!==mh.prototype[Q_]&&(mh.prototype[xi[Q_]]=mh.prototype[Q_]);var wh=new WeakMap,_h=new WeakMap,xh=new WeakMap,kh=new WeakSet;class Ah{static write(t){const e=new TextEncoder,n={};let i=0;for(const l of Ah.strings){const r=e.encode(t[l]);n[l]=r,i+=4+r.length}const r=new ArrayBuffer(i),s=new Uint8Array(r),a=new DataView(r);let o=0;for(const l of Ah.strings){const t=n[l],e=t.length;a.setUint32(o,e),s.set(t,o+4),o+=4+e}return Li(o===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(t){jn(this,kh),zn(this,wh,void 0),zn(this,_h,void 0),zn(this,xh,void 0),Gn(wh,this,t),Gn(_h,this,new DataView(Vn(wh,this))),Gn(xh,this,new TextDecoder)}get fontFamily(){return Un(kh,this,Sh).call(this,0)}get fontWeight(){return Un(kh,this,Sh).call(this,1)}get italicAngle(){return Un(kh,this,Sh).call(this,2)}}function Sh(t){Li(t<kn.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=Vn(_h,this).getUint32(e)+4;const n=Vn(_h,this).getUint32(e);return Vn(xh,this).decode(new Uint8Array(Vn(wh,this),e+4,n))}kn=Ah,c(Ah,"strings",["fontFamily","fontWeight","italicAngle"]);var Eh=new WeakMap,Ch=new WeakMap,Mh=new WeakMap,Th=new WeakSet;class Ph{static write(t){const e=new TextEncoder,n={};let i=0;for(const h of Ph.strings){const r=e.encode(t[h]);n[h]=r,i+=4+r.length}i+=4;let r,s,a=1+i;t.style&&(r=e.encode(t.style.style),s=e.encode(t.style.weight),a+=4+r.length+4+s.length);const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let u=0;c.setUint8(u++,t.guessFallback?1:0),c.setUint32(u,0),u+=4,i=0;for(const h of Ph.strings){const t=n[h],e=t.length;i+=4+e,c.setUint32(u,e),l.set(t,u+4),u+=4+e}return c.setUint32(u-i-4,i),t.style&&(c.setUint32(u,r.length),l.set(r,u+4),u+=4+r.length,c.setUint32(u,s.length),l.set(s,u+4),u+=4+s.length),Li(u<=o.byteLength,"SubstitionInfo.write: Buffer overflow"),o.transferToFixedLength(u)}constructor(t){jn(this,Th),zn(this,Eh,void 0),zn(this,Ch,void 0),zn(this,Mh,void 0),Gn(Eh,this,t),Gn(Ch,this,new DataView(Vn(Eh,this))),Gn(Mh,this,new TextDecoder)}get guessFallback(){return 0!==Vn(Ch,this).getUint8(0)}get css(){return Un(Th,this,Rh).call(this,0)}get loadedName(){return Un(Th,this,Rh).call(this,1)}get baseFontName(){return Un(Th,this,Rh).call(this,2)}get src(){return Un(Th,this,Rh).call(this,3)}get style(){let t=1;t+=4+Vn(Ch,this).getUint32(t);const e=Vn(Ch,this).getUint32(t),n=Vn(Mh,this).decode(new Uint8Array(Vn(Eh,this),t+4,e));t+=4+e;const i=Vn(Ch,this).getUint32(t);return{style:n,weight:Vn(Mh,this).decode(new Uint8Array(Vn(Eh,this),t+4,i))}}}function Rh(t){Li(t<An.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=Vn(Ch,this).getUint32(e)+4;const n=Vn(Ch,this).getUint32(e);return Vn(Mh,this).decode(new Uint8Array(Vn(Eh,this),e+4,n))}An=Ph,c(Ph,"strings",["css","loadedName","baseFontName","src"]);var Dh=new WeakMap,Lh=new WeakMap,Nh=new WeakMap,Ih=new WeakSet;class Fh{constructor(t){let{data:e,extra:n}=t;jn(this,Ih),zn(this,Dh,void 0),zn(this,Lh,void 0),zn(this,Nh,void 0),Gn(Dh,this,e),Gn(Lh,this,new TextDecoder),Gn(Nh,this,new DataView(Vn(Dh,this))),n&&Object.assign(this,n)}get black(){return Un(Ih,this,Oh).call(this,0)}get bold(){return Un(Ih,this,Oh).call(this,1)}get disableFontFace(){return Un(Ih,this,Oh).call(this,2)}get fontExtraProperties(){return Un(Ih,this,Oh).call(this,3)}get isInvalidPDFjsFont(){return Un(Ih,this,Oh).call(this,4)}get isType3Font(){return Un(Ih,this,Oh).call(this,5)}get italic(){return Un(Ih,this,Oh).call(this,6)}get missingFile(){return Un(Ih,this,Oh).call(this,7)}get remeasure(){return Un(Ih,this,Oh).call(this,8)}get vertical(){return Un(Ih,this,Oh).call(this,9)}get ascent(){return Un(Ih,this,Bh).call(this,0)}get defaultWidth(){return Un(Ih,this,Bh).call(this,1)}get descent(){return Un(Ih,this,Bh).call(this,2)}get bbox(){let t=zh._;if(0===Vn(Nh,this).getUint8(t))return;t+=1;const e=[];for(let n=0;n<4;n++)e.push(Vn(Nh,this).getInt16(t,!0)),t+=2;return e}get fontMatrix(){let t=Uh._;if(0===Vn(Nh,this).getUint8(t))return;t+=1;const e=[];for(let n=0;n<6;n++)e.push(Vn(Nh,this).getFloat64(t,!0)),t+=8;return e}get defaultVMetrics(){let t=Hh._;if(0===Vn(Nh,this).getUint8(t))return;t+=1;const e=[];for(let n=0;n<3;n++)e.push(Vn(Nh,this).getInt16(t,!0)),t+=2;return e}get fallbackName(){return Un(Ih,this,Wh).call(this,0)}get loadedName(){return Un(Ih,this,Wh).call(this,1)}get mimetype(){return Un(Ih,this,Wh).call(this,2)}get name(){return Un(Ih,this,Wh).call(this,3)}get data(){let t=Vh._;t+=4+Vn(Nh,this).getUint32(t);t+=4+Vn(Nh,this).getUint32(t);t+=4+Vn(Nh,this).getUint32(t);const e=Vn(Nh,this).getUint32(t);if(0!==e)return new Uint8Array(Vn(Dh,this),t+4,e)}clearData(){let t=Vh._;t+=4+Vn(Nh,this).getUint32(t);t+=4+Vn(Nh,this).getUint32(t);t+=4+Vn(Nh,this).getUint32(t);const e=Vn(Nh,this).getUint32(t);new Uint8Array(Vn(Dh,this),t+4,e).fill(0),Vn(Nh,this).setUint32(t,0)}get cssFontInfo(){let t=Vh._;t+=4+Vn(Nh,this).getUint32(t);t+=4+Vn(Nh,this).getUint32(t);const e=Vn(Nh,this).getUint32(t);if(0===e)return null;const n=new Uint8Array(e);return n.set(new Uint8Array(Vn(Dh,this),t+4,e)),new Ah(n.buffer)}get systemFontInfo(){let t=Vh._;t+=4+Vn(Nh,this).getUint32(t);const e=Vn(Nh,this).getUint32(t);if(0===e)return null;const n=new Uint8Array(e);return n.set(new Uint8Array(Vn(Dh,this),t+4,e)),new Ph(n.buffer)}static write(t){const e=t.systemFontInfo?Ph.write(t.systemFontInfo):null,n=t.cssFontInfo?Ah.write(t.cssFontInfo):null,i=new TextEncoder,r={};let s=0;for(const f of Fh.strings)r[f]=i.encode(t[f]),s+=4+r[f].length;const a=Vh._+4+s+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let u=0;const h=Fh.bools.length;let d=0,p=0;for(let f=0;f<h;f++){const e=t[Fh.bools[f]];d|=(void 0===e?0:e?2:1)<<p,p+=2,8!==p&&f!==h-1||(c.setUint8(u++,d),d=0,p=0)}Li(u===jh._,"FontInfo.write: Boolean properties offset mismatch");for(const f of Fh.numbers)c.setFloat64(u,t[f]),u+=8;if(Li(u===zh._,"FontInfo.write: Number properties offset mismatch"),t.bbox){c.setUint8(u++,4);for(const e of t.bbox)c.setInt16(u,e,!0),u+=2}else c.setUint8(u++,0),u+=8;if(Li(u===Uh._,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){c.setUint8(u++,6);for(const e of t.fontMatrix)c.setFloat64(u,e,!0),u+=8}else c.setUint8(u++,0),u+=48;if(Li(u===Hh._,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){c.setUint8(u++,1);for(const e of t.defaultVMetrics)c.setInt16(u,e,!0),u+=2}else c.setUint8(u++,0),u+=6;Li(u===Vh._,"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(Vh._,0),u+=4;for(const f of Fh.strings){const t=r[f],e=t.length;c.setUint32(u,e),l.set(t,u+4),u+=4+e}if(c.setUint32(Vh._,u-Vh._-4),e){const t=e.byteLength;c.setUint32(u,t),Li(u+4+t<=o.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(e),u+4),u+=4+t}else c.setUint32(u,0),u+=4;if(n){const t=n.byteLength;c.setUint32(u,t),Li(u+4+t<=o.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(n),u+4),u+=4+t}else c.setUint32(u,0),u+=4;return void 0===t.data?(c.setUint32(u,0),u+=4):(c.setUint32(u,t.data.length),l.set(t.data,u+4),u+=4+t.data.length),Li(u<=o.byteLength,"FontInfo.write: Buffer overflow"),o.transferToFixedLength(u)}}function Oh(t){Li(t<Sn.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=2*t%8,i=Vn(Nh,this).getUint8(e)>>n&3;return 0===i?void 0:2===i}function Bh(t){return Li(t<Sn.numbers.length,"Invalid number index"),Vn(Nh,this).getFloat64(jh._+8*t)}function Wh(t){Li(t<Sn.strings.length,"Invalid string index");let e=Vh._+4;for(let r=0;r<t;r++)e+=Vn(Nh,this).getUint32(e)+4;const n=Vn(Nh,this).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(Vn(Dh,this),e+4,n)),Vn(Lh,this).decode(i)}Sn=Fh,c(Fh,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),c(Fh,"numbers",["ascent","defaultWidth","descent"]),c(Fh,"strings",["fallbackName","loadedName","mimetype","name"]);var jh={_:Math.ceil(2*Sn.bools.length/8)},zh={_:Un(Sn,Sn,jh)._+8*Sn.numbers.length},Uh={_:Un(Sn,Sn,zh)._+1+8},Hh={_:Un(Sn,Sn,Uh)._+1+48},Vh={_:Un(Sn,Sn,Hh)._+1+6};class Gh{static get workerPort(){return Un(Gh,this,qh)._}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");qh._=Un(Gh,this,t)}static get workerSrc(){return Un(Gh,this,Xh)._}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");Xh._=Un(Gh,this,t)}}var qh={_:null},Xh={_:""},Yh=new WeakMap,Kh=new WeakMap;class Qh{constructor(t){let{parsedData:e,rawData:n}=t;zn(this,Yh,void 0),zn(this,Kh,void 0),Gn(Yh,this,e),Gn(Kh,this,n)}getRaw(){return Vn(Kh,this)}get(t){var e;return null!==(e=Vn(Yh,this).get(t))&&void 0!==e?e:null}[Symbol.iterator](){return Vn(Yh,this).entries()}}const $h=Symbol("INTERNAL");var Jh=new WeakMap,Zh=new WeakMap,td=new WeakMap,ed=new WeakMap;class nd{constructor(t,e){let{name:n,intent:i,usage:r,rbGroups:s}=e;zn(this,Jh,!1),zn(this,Zh,!1),zn(this,td,!1),zn(this,ed,!0),Gn(Jh,this,!!(t&$n)),Gn(Zh,this,!!(t&Jn)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(Vn(td,this))return Vn(ed,this);if(!Vn(ed,this))return!1;const{print:t,view:e}=this.usage;return Vn(Jh,this)?"OFF"!==(null===e||void 0===e?void 0:e.viewState):!Vn(Zh,this)||"OFF"!==(null===t||void 0===t?void 0:t.printState)}_setVisible(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==$h&&Di("Internal method `_setVisible` called."),Gn(td,this,n),Gn(ed,this,e)}}var id=new WeakMap,rd=new WeakMap,sd=new WeakMap,ad=new WeakMap,od=new WeakSet;class ld{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$n;if(jn(this,od),zn(this,id,null),zn(this,rd,new Map),zn(this,sd,null),zn(this,ad,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,Gn(ad,this,t.order);for(const n of t.groups)Vn(rd,this).set(n.id,new nd(e,n));if("OFF"===t.baseState)for(const t of Vn(rd,this).values())t._setVisible($h,!1);for(const e of t.on)Vn(rd,this).get(e)._setVisible($h,!0);for(const e of t.off)Vn(rd,this).get(e)._setVisible($h,!1);Gn(sd,this,this.getHash())}}isVisible(t){if(0===Vn(rd,this).size)return!0;if(!t)return Pi("Optional content group not defined."),!0;if("OCG"===t.type)return Vn(rd,this).has(t.id)?Vn(rd,this).get(t.id).visible:(Ri("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return Un(od,this,cd).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!Vn(rd,this).has(e))return Ri("Optional content group not found: ".concat(e)),!0;if(Vn(rd,this).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!Vn(rd,this).has(e))return Ri("Optional content group not found: ".concat(e)),!0;if(!Vn(rd,this).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!Vn(rd,this).has(e))return Ri("Optional content group not found: ".concat(e)),!0;if(!Vn(rd,this).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!Vn(rd,this).has(e))return Ri("Optional content group not found: ".concat(e)),!0;if(Vn(rd,this).get(e).visible)return!1}return!0}return Ri("Unknown optional content policy ".concat(t.policy,".")),!0}return Ri("Unknown group type ".concat(t.type,".")),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Vn(rd,this).get(t);if(i){if(n&&e&&i.rbGroups.length)for(const e of i.rbGroups)for(const n of e){var r;if(n!==t)null===(r=Vn(rd,this).get(n))||void 0===r||r._setVisible($h,!1,!0)}i._setVisible($h,!!e,!0),Gn(id,this,null)}else Ri("Optional content group not found: ".concat(t))}setOCGState(t){let e,{state:n,preserveRB:i}=t;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":e=r;continue}const t=Vn(rd,this).get(r);if(t)switch(e){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!t.visible,i)}}Gn(id,this,null)}get hasInitialVisibility(){return null===Vn(sd,this)||this.getHash()===Vn(sd,this)}getOrder(){return Vn(rd,this).size?Vn(ad,this)?Vn(ad,this).slice():[...Vn(rd,this).keys()]:null}getGroup(t){return Vn(rd,this).get(t)||null}getHash(){if(null!==Vn(id,this))return Vn(id,this);const t=new Ml;for(const[e,n]of Vn(rd,this))t.update("".concat(e,":").concat(n.visible));return Gn(id,this,t.hexdigest())}[Symbol.iterator](){return Vn(rd,this).entries()}}function cd(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const e=t[i];let r;if(Array.isArray(e))r=Un(od,this,cd).call(this,e);else{if(!Vn(rd,this).has(e))return Ri("Optional content group not found: ".concat(e)),!0;r=Vn(rd,this).get(e).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class ud{constructor(t,e){let{disableRange:n=!1,disableStream:i=!1}=e;Li(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const t=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),t.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),t.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:n}=t;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Li(this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}_onProgress(t){var e,n,i,r;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Li(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new hd(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new dd(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class hd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=n||!1,this._filename=hr(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dd{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function pd(t,e){const n=new Headers;if(!t||!e||"object"!==typeof e)return n;for(const i in e){const t=e[i];void 0!==t&&n.append(i,t)}return n}function fd(t){var e,n;return null!==(e=null===(n=URL.parse(t))||void 0===n?void 0:n.origin)&&void 0!==e?e:null}function gd(t){let{responseHeaders:e,isHttp:n,rangeChunkSize:i,disableRange:r}=t;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*i)return s;if(r||!n)return s;if("bytes"!==e.get("Accept-Ranges"))return s;return"identity"!==(e.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function md(t){const e=t.get("Content-Disposition");if(e){let t=function(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let t=a(n);return t=unescape(t),t=o(t),t=l(t),s(t)}if(n=function(t){const e=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(t));){let[,t,i,r]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,r]}const s=[];for(let i=0;i<e.length&&i in e;++i){let[t,n]=e[i];n=a(n),t&&(n=unescape(n),0===i&&(n=o(n))),s.push(n)}return s.join("")}(t),n)return s(l(n));if(n=i("filename","i").exec(t),n){n=n[1];let t=a(n);return t=l(t),s(t)}function i(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function r(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(t,{fatal:!0}),r=Gi(n);n=i.decode(r),e=!1}catch(i){}}return n}function s(t){return e&&/[\x80-\xff]/.test(t)&&(t=r("utf-8",t),e&&(t=r("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:r(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,i){if("q"===n||"Q"===n)return r(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{i=atob(i)}catch(s){}return r(e,i)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(n){}if(hr(t))return t}return null}function vd(t,e){return new zi("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t,404===t||0===t&&e.startsWith("file:"))}function yd(t){return 200===t||206===t}function bd(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function wd(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Ri("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}class _d{constructor(t){c(this,"_responseOrigin",null),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=pd(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return Li(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xd(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new kd(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class xd{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,bd(n,this._withCredentials,this._abortController)).then(e=>{if(t._responseOrigin=fd(e.url),!yd(e.status))throw vd(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const n=e.headers,{allowRangeRequests:r,suggestedLength:s}=gd({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=md(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Hi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:wd(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class kd{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range","bytes=".concat(e,"-").concat(n-1));const s=i.url;fetch(s,bd(r,this._withCredentials,this._abortController)).then(e=>{const n=fd(e.url);if(n!==t._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(t._responseOrigin,'".'));if(!yd(e.status))throw vd(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded}),{value:wd(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class Ad{constructor(t){let{url:e,httpHeaders:n,withCredentials:i}=t;c(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=pd(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,s]of this.headers)e.setRequestHeader(r,s);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",Li(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var n;const i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===i.status&&this.isHttp)return void n.onError(i.status);const r=i.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(i.status);const s=function(t){const e=t.response;return"string"!==typeof e?e:Gi(e).buffer}(i);if(206===r){const t=i.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);e?n.onDone({begin:parseInt(e[1],10),chunk:s}):(Ri('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Sd{constructor(t){this._source=t,this._manager=new Ad(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Li(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ed(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Cd(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Ed{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=fd(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(t=>{const[e,...n]=t.split(": ");return[e,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:s}=gd({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=md(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=vd(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Cd{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=fd(null===(t=this._manager.getRequestXhr(this._requestId))||void 0===t?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(e,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){var e;null!==(e=this._storedError)&&void 0!==e||(this._storedError=vd(t,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Md=/^[a-z][a-z0-9\-+.]+:/i;class Td{constructor(t){this.source=t,this.url=function(t){if(Md.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(t.url),Li("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return Li(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Pd(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Rd(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Pd{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(t=>{this._contentLength=t.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},t=>{"ENOENT"===t.code&&(t=vd(0,this._url.href)),this._storedError=t,this._headersCapability.reject(t)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Hi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Rd{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Dd=Symbol("INITIAL_DATA");var Ld=new WeakMap,Nd=new WeakSet;class Id{constructor(){jn(this,Nd),zn(this,Ld,Object.create(null))}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const n=Un(Nd,this,Fd).call(this,t);return n.promise.then(()=>e(n.data)),null}const n=Vn(Ld,this)[t];if(!n||n.data===Dd)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}has(t){const e=Vn(Ld,this)[t];return!!e&&e.data!==Dd}delete(t){const e=Vn(Ld,this)[t];return!(!e||e.data===Dd)&&(delete Vn(Ld,this)[t],!0)}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Un(Nd,this,Fd).call(this,t);n.data=e,n.resolve()}clear(){for(const e in Vn(Ld,this)){var t;const{data:n}=Vn(Ld,this)[e];null===n||void 0===n||null===(t=n.bitmap)||void 0===t||t.close()}Gn(Ld,this,Object.create(null))}*[Symbol.iterator](){for(const t in Vn(Ld,this)){const{data:e}=Vn(Ld,this)[t];e!==Dd&&(yield[t,e])}}}function Fd(t){var e;return(e=Vn(Ld,this))[t]||(e[t]=h(h({},Promise.withResolvers()),{},{data:Dd}))}var Od=new WeakMap,Bd=new WeakMap,Wd=new WeakMap,jd=new WeakMap,zd=new WeakMap,Ud=new WeakMap,Hd=new WeakMap,Vd=new WeakMap,Gd=new WeakMap,qd=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,Kd=new WeakMap,Qd=new WeakMap,$d=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,tp=new WeakMap,ep=new WeakSet;class np{constructor(t){var e;let{textContentSource:n,container:i,viewport:r}=t;if(jn(this,ep),zn(this,Od,Promise.withResolvers()),zn(this,Bd,null),zn(this,Wd,!1),zn(this,jd,!(null===(e=globalThis.FontInspector)||void 0===e||!e.enabled)),zn(this,zd,null),zn(this,Ud,null),zn(this,Hd,0),zn(this,Vd,0),zn(this,Gd,null),zn(this,qd,null),zn(this,Xd,0),zn(this,Yd,0),zn(this,Kd,Object.create(null)),zn(this,Qd,[]),zn(this,$d,null),zn(this,Jd,[]),zn(this,Zd,new WeakMap),zn(this,tp,null),n instanceof ReadableStream)Gn($d,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');Gn($d,this,new ReadableStream({start(t){t.enqueue(n),t.close()}}))}Gn(Bd,this,Gn(qd,this,i)),Gn(Yd,this,r.scale*xr.pixelRatio),Gn(Xd,this,r.rotation),Gn(Ud,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=r.rawDims;Gn(tp,this,[1,0,0,-1,-o,l+a]),Gn(Vd,this,s),Gn(Hd,this,a),lp.call(np),_r(i,r),Vn(Od,this).promise.finally(()=>{fp._.delete(this),Gn(Ud,this,null),Gn(Kd,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=qi.platform;return Fi(this,"fontFamilyMap",new Map([["sans-serif","".concat(t&&e?"Calibri, ":"","sans-serif")],["monospace","".concat(t&&e?"Lucida Console, ":"","monospace")]]))}render(){const t=()=>{Vn(Gd,this).read().then(e=>{var n;let{value:i,done:r}=e;r?Vn(Od,this).resolve():(null!==(n=Vn(zd,this))&&void 0!==n||Gn(zd,this,i.lang),Object.assign(Vn(Kd,this),i.styles),Un(ep,this,ip).call(this,i.items),t())},Vn(Od,this).reject)};return Gn(Gd,this,Vn($d,this).getReader()),fp._.add(this),t(),Vn(Od,this).promise}update(t){let{viewport:e,onBefore:n=null}=t;const i=e.scale*xr.pixelRatio,r=e.rotation;if(r!==Vn(Xd,this)&&(null===n||void 0===n||n(),Gn(Xd,this,r),_r(Vn(qd,this),{rotation:r})),i!==Vn(Yd,this)){null===n||void 0===n||n(),Gn(Yd,this,i);const t={div:null,properties:null,ctx:ap.call(np,Vn(zd,this))};for(const e of Vn(Jd,this))t.properties=Vn(Zd,this).get(e),t.div=e,Un(ep,this,sp).call(this,t)}}cancel(){var t;const e=new Hi("TextLayer task cancelled.");null===(t=Vn(Gd,this))||void 0===t||t.cancel(e).catch(()=>{}),Gn(Gd,this,null),Vn(Od,this).reject(e)}get textDivs(){return Vn(Jd,this)}get textContentItemsStr(){return Vn(Qd,this)}static cleanup(){if(!(Un(np,this,fp)._.size>0)){Un(np,this,up)._.clear();for(const{canvas:t}of Un(np,this,hp)._.values())t.remove();Un(np,this,hp)._.clear()}}}function ip(t){var e,n;if(Vn(Wd,this))return;null!==(n=(e=Vn(Ud,this)).ctx)&&void 0!==n||(e.ctx=ap.call(En,Vn(zd,this)));const i=Vn(Jd,this),r=Vn(Qd,this);for(const s of t){if(i.length>1e5)return Ri("Ignoring additional textDivs for performance reasons."),void Gn(Wd,this,!0);if(void 0!==s.str)r.push(s.str),Un(ep,this,rp).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const t=Vn(Bd,this);Gn(Bd,this,document.createElement("span")),Vn(Bd,this).classList.add("markedContent"),s.id&&Vn(Bd,this).setAttribute("id","".concat(s.id)),t.append(Vn(Bd,this))}else"endMarkedContent"===s.type&&Gn(Bd,this,Vn(Bd,this).parentNode)}}function rp(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};Vn(Jd,this).push(e);const i=Yi.transform(Vn(tp,this),t.transform);let r=Math.atan2(i[1],i[0]);const s=Vn(Kd,this)[t.fontName];s.vertical&&(r+=Math.PI/2);let a=Vn(jd,this)&&s.fontSubstitution||s.fontFamily;a=En.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*cp.call(En,a,s,Vn(zd,this));let c,u;0===r?(c=i[4],u=i[5]-l):(c=i[4]+l*Math.sin(r),u=i[5]-l*Math.cos(r));const h="calc(var(--total-scale-factor) *",d=e.style;Vn(Bd,this)===Vn(qd,this)?(d.left="".concat((100*c/Vn(Vd,this)).toFixed(2),"%"),d.top="".concat((100*u/Vn(Hd,this)).toFixed(2),"%")):(d.left="".concat(h).concat(c.toFixed(2),"px)"),d.top="".concat(h).concat(u.toFixed(2),"px)")),d.fontSize="".concat(h).concat((pp._*o).toFixed(2),"px)"),d.fontFamily=a,n.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,Vn(jd,this)&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),0!==r&&(n.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?t.height:t.width),Vn(Zd,this).set(e,n),Vn(Ud,this).div=e,Vn(Ud,this).properties=n,Un(ep,this,sp).call(this,Vn(Ud,this)),n.hasText&&Vn(Bd,this).append(e),n.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),Vn(Bd,this).append(t)}}function sp(t){const{div:e,properties:n,ctx:i}=t,{style:r}=e;let s="";if(pp._>1&&(s="scale(".concat(1/pp._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:t}=r,{canvasWidth:a,fontSize:o}=n;op.call(En,i,o*Vn(Yd,this),t);const{width:l}=i.measureText(e.textContent);l>0&&(s="scaleX(".concat(a*Vn(Yd,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function ap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=Un(En,this,hp)._.get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Un(En,this,hp)._.set(t,e),Un(En,this,dp)._.set(e,{size:0,family:""})}return e}function op(t,e,n){const i=Un(En,this,dp)._.get(t);e===i.size&&n===i.family||(t.font="".concat(e,"px ").concat(n),i.size=e,i.family=n)}function lp(){if(null!==Un(En,this,pp)._)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),pp._=Un(En,this,t.getBoundingClientRect().height),t.remove()}function cp(t,e,n){const i=Un(En,this,up)._.get(t);if(i)return i;const r=Un(En,this,ap).call(this,n);r.canvas.width=r.canvas.height=30,Un(En,this,op).call(this,r,30,t);const s=r.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return a?l=a/(a+o):(qi.platform.isFirefox&&Ri("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?l=e.ascent:e.descent&&(l=1+e.descent)),Un(En,this,up)._.set(t,l),l}En=np;var up={_:new Map},hp={_:new Map},dp={_:new WeakMap},pp={_:null},fp={_:new Set};function gp(){var t,e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new mp,{docId:r}=i,s=n.url?function(t){if(t instanceof URL)return t.href;if("string"===typeof t){if(Xn)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(t){if(Xn&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return Gi(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(null===t||void 0===t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(t=n.password)&&void 0!==t?t:null,u=n.range instanceof kp?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let d=n.worker instanceof Np?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||ur(n.docBaseUrl)?null:n.docBaseUrl,g=Hl(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(Xn?Yc:yc),y=Hl(n.iccUrl),b=Hl(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Xn?Kc:Uc),_=Hl(n.wasmUrl),x=n.WasmFactory||(Xn?Qc:Vc),k=!0!==n.stopAtErrors,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Xn,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!Xn&&(qi.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T="boolean"===typeof n.disableFontFace?n.disableFontFace:Xn,P=!0===n.fontExtraProperties,R=!0===n.enableXfa,D=n.ownerDocument||globalThis.document,L=!0===n.disableRange,N=!0===n.disableStream,I=!0===n.disableAutoFetch,F=!0===n.pdfBug,O=n.CanvasFactory||(Xn?Xc:mc),B=n.FilterFactory||(Xn?qc:Mc),W=!0===n.enableHWA,j=!1!==n.useWasm,z=u?u.length:null!==(e=n.length)&&void 0!==e?e:NaN,U="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!Xn&&!T,H="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===yc&&w===Uc&&x===Vc&&g&&b&&_&&pr(g,document.baseURI)&&pr(b,document.baseURI)&&pr(_,document.baseURI));Mi(p);const V={canvasFactory:new O({ownerDocument:D,enableHWA:W}),filterFactory:new B({docId:r,ownerDocument:D}),cMapReaderFactory:H?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:H?null:new w({baseUrl:b}),wasmFactory:H?null:new x({baseUrl:_})};d||(d=Np.create({verbosity:p,port:Gh.workerPort}),i._worker=d);const G={docId:r,apiVersion:"5.4.296",data:a,password:c,disableAutoFetch:I,rangeChunkSize:h,length:z,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:A,disableFontFace:T,ignoreErrors:k,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:M,fontExtraProperties:P,useSystemFonts:U,useWasm:j,useWorkerFetch:H,cMapUrl:g,iccUrl:y,standardFontDataUrl:b,wasmUrl:_}},q={ownerDocument:D,pdfBug:F,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:R}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",G,a?[a.buffer]:null);let e;if(u)e=new ud(u,{disableRange:L,disableStream:N});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const t=pr(s)?_d:Xn?Td:Sd;e=new t({url:s,length:z,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:L,disableStream:N})}return t.then(t=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new cc(r,t,d.port),s=new Kp(n,i,e,q,V,W);i._transport=s,n.send("Ready",null)})}).catch(i._capability.reject),i}class mp{constructor(){c(this,"_capability",Promise.withResolvers()),c(this,"_transport",null),c(this,"_worker",null),c(this,"docId","d".concat((vp._=(Cn=vp._,Mn=Cn++,Cn),Mn))),c(this,"destroyed",!1),c(this,"onPassword",null),c(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0;try{var e,n;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(t=this._worker)||void 0===t||t.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var vp={_:0},yp=new WeakMap,bp=new WeakMap,wp=new WeakMap,_p=new WeakMap,xp=new WeakMap;class kp{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;zn(this,yp,Promise.withResolvers()),zn(this,bp,[]),zn(this,wp,[]),zn(this,_p,[]),zn(this,xp,[]),this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){Vn(xp,this).push(t)}addProgressListener(t){Vn(_p,this).push(t)}addProgressiveReadListener(t){Vn(wp,this).push(t)}addProgressiveDoneListener(t){Vn(bp,this).push(t)}onDataRange(t,e){for(const n of Vn(xp,this))n(t,e)}onDataProgress(t,e){Vn(yp,this).promise.then(()=>{for(const n of Vn(_p,this))n(t,e)})}onDataProgressiveRead(t){Vn(yp,this).promise.then(()=>{for(const e of Vn(wp,this))e(t)})}onDataProgressiveDone(){Vn(yp,this).promise.then(()=>{for(const t of Vn(bp,this))t()})}transportReady(){Vn(yp,this).resolve()}requestDataRange(t,e){Di("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Ap{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fi(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Sp=new WeakMap,Ep=new WeakSet;class Cp{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];jn(this,Ep),zn(this,Sp,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new dr:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Id,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new lr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fi(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null}render(t){var e,n,i;let{canvasContext:r,canvas:s=r.canvas,viewport:a,intent:o="display",annotationMode:l=ri.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:m=!1,operationsFilter:v=null}=t;null===(e=this._stats)||void 0===e||e.time("Overall");const y=this._transport.getRenderingIntent(o,l,f,g),{renderingIntent:b,cacheKey:w}=y;Gn(Sp,this,!1),h||(h=this._transport.getOptionalContentConfig(b));let _=this._intentStates.get(w);_||(_=Object.create(null),this._intentStates.set(w,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const x=!!(b&Jn);var k;_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(k=this._stats)||void 0===k||k.time("Page Request"),this._pumpOperatorList(y));const A=Boolean(this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),S=!this.recordedBBoxes&&(m||A),E=t=>{if(_.renderTasks.delete(C),S){var e;const t=null===(e=C.gfx)||void 0===e?void 0:e.dependencyTracker.take();t&&(C.stepper&&C.stepper.setOperatorBBoxes(t,C.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=t))}var n;(x&&Gn(Sp,this,!0),Un(Ep,this,Mp).call(this),t?(C.capability.reject(t),this._abortOperatorList({intentState:_,reason:t instanceof Error?t:new Error(t)})):C.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(n=globalThis.Stats)&&void 0!==n&&n.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new tf({callback:E,params:{canvas:s,canvasContext:r,dependencyTracker:S?new Au(s,_.operatorList.length,A):null,viewport:a,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:v});((i=_).renderTasks||(i.renderTasks=new Set)).add(C);const M=C.task;return Promise.all([_.displayReadyCapability.promise,h]).then(t=>{var e;let[n,i]=t;if(this.destroyed)E();else{if(null===(e=this._stats)||void 0===e||e.time("Rendering"),!(i.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:n,optionalContentConfig:i}),C.operatorListChanged()}}).catch(E),M}getOperatorList(){let{intent:t="display",annotationMode:e=ri.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(t,e,n,i,!0);let s,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(t=>ir.textContent(t));const e=this.streamTextContent(t);return new Promise(function(t,n){const i=e.getReader(),r={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then(function(n){var i;let{value:s,done:a}=n;a?t(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),e())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),Gn(Sp,this,!1),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Gn(Sp,this,!0);const e=Un(Ep,this,Mp).call(this);return t&&e&&this._stats&&(this._stats=new dr),e}_startRenderPage(t,e){var n,i;const r=this._intentStates.get(e);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&Un(Ep,this,Mp).call(this)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=t;const{map:s,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(t=>{let{value:e,done:n}=t;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,l),c())},t=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const t of l.renderTasks)t.operatorListChanged();Un(Ep,this,Mp).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(t);else{if(!l.opListReadCapability)throw t;l.opListReadCapability.reject(t)}}})};c()}_abortOperatorList(t){let{intentState:e,reason:n,force:i=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof cr){let t=100;return n.extraDelay>0&&n.extraDelay<1e3&&(t+=n.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},t))}}if(e.streamReader.cancel(new Hi(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}function Mp(){if(!Vn(Sp,this)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Gn(Sp,this,!1),!0}var Tp=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,Dp=new WeakMap,Lp=new WeakSet;class Np{constructor(){let{name:t=null,port:e=null,verbosity:n=Ti()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(jn(this,Lp),zn(this,Tp,Promise.withResolvers()),zn(this,Pp,null),zn(this,Rp,null),zn(this,Dp,null),this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Up._.has(e))throw new Error("Cannot use more than one PDFWorker per port.");Up._.set(e,this),Un(Lp,this,Fp).call(this,e)}else Un(Lp,this,Op).call(this)}get promise(){return Vn(Tp,this).promise}get port(){return Vn(Rp,this)}get messageHandler(){return Vn(Pp,this)}destroy(){var t,e;this.destroyed=!0,null===(t=Vn(Dp,this))||void 0===t||t.terminate(),Gn(Dp,this,null),Up._.delete(Vn(Rp,this)),Gn(Rp,this,null),null===(e=Vn(Pp,this))||void 0===e||e.destroy(),Gn(Pp,this,null)}static create(t){const e=Un(Np,this,Up)._.get(null===t||void 0===t?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Np(t)}static get workerSrc(){if(Gh.workerSrc)return Gh.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fi(this,"_setupFakeWorkerGlobal",(async()=>{if(Hn(Np,this,Wp))return Hn(Np,this,Wp);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function Ip(){Vn(Tp,this).resolve(),Vn(Pp,this).send("configure",{verbosity:this.verbosity})}function Fp(t){Gn(Rp,this,t),Gn(Pp,this,new cc("main","worker",t)),Vn(Pp,this).on("ready",()=>{}),Un(Lp,this,Ip).call(this)}function Op(){if(zp._||Wp(Tn))return void Un(Lp,this,Bp).call(this);let{workerSrc:t}=Tn;try{Tn._isSameOrigin(window.location,t)||(t=Tn._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new cc("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?Vn(Tp,this).reject(new Error("Worker was destroyed")):Un(Lp,this,Bp).call(this)},r=new AbortController;e.addEventListener("error",()=>{Vn(Dp,this)||i()},{signal:r.signal}),n.on("test",t=>{r.abort(),!this.destroyed&&t?(Gn(Pp,this,n),Gn(Rp,this,e),Gn(Dp,this,e),Un(Lp,this,Ip).call(this)):i()}),n.on("ready",t=>{if(r.abort(),this.destroyed)i();else try{s()}catch(e){Un(Lp,this,Bp).call(this)}});const s=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void s()}catch(e){Pi("The worker has been disabled.")}Un(Lp,this,Bp).call(this)}function Bp(){zp._||(Ri("Setting up fake worker."),zp._=!0),Tn._setupFakeWorkerGlobal.then(t=>{var e,n;if(this.destroyed)return void Vn(Tp,this).reject(new Error("Worker was destroyed"));const i=new Yl;Gn(Rp,this,i);const r="fake".concat((jp._=(e=jp._,n=e++,e),n)),s=new cc(r+"_worker",r,i);t.setup(s,i),Gn(Pp,this,new cc(r,r+"_worker",i)),Un(Lp,this,Ip).call(this)}).catch(t=>{Vn(Tp,this).reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))})}function Wp(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(n){return null}}Tn=Np;var jp={_:0},zp={_:!1},Up={_:new WeakMap};Xn&&(zp._=Un(Tn,Tn,!0),Gh.workerSrc||(Gh.workerSrc="./pdf.worker.mjs")),Tn._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(e,n);return n.origin===i.origin},Tn._createCDNWrapper=t=>{const e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Tn.fromPort=t=>{var e;if(e="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+e),null===t||void 0===t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Tn.create(t)};var Hp=new WeakMap,Vp=new WeakMap,Gp=new WeakMap,qp=new WeakMap,Xp=new WeakMap,Yp=new WeakSet;class Kp{constructor(t,e,n,i,r,s){jn(this,Yp),zn(this,Hp,new Map),zn(this,Vp,new Map),zn(this,Gp,new Map),zn(this,qp,new Map),zn(this,Xp,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Id,this.fontLoader=new jl({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Fi(this,"annotationStorage",new Il)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ri.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=$n,a=Tl;switch(t){case"any":s=Qn;break;case"display":break;case"print":s=Jn;break;default:Ri("getRenderingIntent - invalid intent: ".concat(t))}const o=s&Jn&&n instanceof Bl?n:this.annotationStorage;switch(e){case ri.DISABLE:s+=ei;break;case ri.ENABLE:break;case ri.ENABLE_FORMS:s+=Zn;break;case ri.ENABLE_STORAGE:s+=ti,a=o.serializable;break;default:Ri("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(s+=ni),r&&(s+=ii);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=Vn(Xp,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of Vn(Vp,this).values())e.push(i._destroy());Vn(Vp,this).clear(),Vn(Gp,this).clear(),Vn(qp,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var t,e;this.commonObjs.clear(),this.fontLoader.clear(),Vn(Hp,this).clear(),this.filterFactory.destroy(),np.cleanup(),null===(t=this._networkStream)||void 0===t||t.cancelAllRequests(new Hi("Worker was terminated.")),null===(e=this.messageHandler)||void 0===e||e.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{Li(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function(t){let{value:n,done:i}=t;i?e.close():(Li(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",async t=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=e.onProgress)||void 0===s||s.call(e,this._lastProgress);this._fullReader.onProgress=t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),t.on("GetRangeReader",(t,e)=>{Li(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then(function(t){let{value:n,done:i}=t;i?e.close():(Li(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{n.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",t=>{let{pdfInfo:n}=t;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Ap(n,this))}),t.on("DocException",t=>{e._capability.reject(ac(t))}),t.on("PasswordRequest",t=>{Gn(Xp,this,Promise.withResolvers());try{if(!e.onPassword)throw ac(t);const n=t=>{t instanceof Error?Vn(Xp,this).reject(t):Vn(Xp,this).resolve({password:t})};e.onPassword(n,t.code)}catch(n){Vn(Xp,this).reject(n)}return Vn(Xp,this).promise}),t.on("DataLoaded",t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{if(this.destroyed)return;Vn(Vp,this).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),t.on("commonobj",e=>{var n;let[i,r,s]=e;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const t=s.error;Ri("Error during font loading: ".concat(t)),this.commonObjs.resolve(i,t);break}const e=new Fh(s),a=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,o=new Ul(e,a,s.extra,s.charProcOperatorList);this.fontLoader.bind(o).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(i,o)});break;case"CopyLocalImage":const{imageRef:l}=s;Li(l,"The imageRef must be defined.");for(const t of Vn(Vp,this).values())for(const[,e]of t.objs)if((null===e||void 0===e?void 0:e.ref)===l)return e.dataLen?(this.commonObjs.resolve(i,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),t.on("obj",t=>{let[e,n,i,r]=t;if(this.destroyed)return;const s=Vn(Vp,this).get(n);var a;if(!s.objs.has(e))if(0!==s._intentStates.size)switch(i){case"Image":case"Pattern":s.objs.resolve(e,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),t.on("DocProgress",t=>{var n;this.destroyed||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}),t.on("FetchBinaryData",async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");const e=this[t.type];if(!e)throw new Error("".concat(t.type," not initialized, see the `useWorkerFetch` parameter."));return e.fetch(t)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t,e;this.annotationStorage.size<=0&&Ri("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=Vn(Gp,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Vn(qp,this).set(n.refStr,t);const i=new Cp(e,n,this,this._params.pdfBug);return Vn(Vp,this).set(e,i),i});return Vn(Gp,this).set(e,i),i}getPageIndex(t){return Vl(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return Un(Yp,this,Qp).call(this,"GetFieldObjects")}hasJSActions(){return Un(Yp,this,Qp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return Un(Yp,this,Qp).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return Un(Yp,this,Qp).call(this,"GetOptionalContentConfig").then(e=>new ld(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=Vn(Hp,this).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(t=>{var e,n,i,r;return{info:t[0],metadata:t[1]?new Qh(t[1]):null,contentDispositionFilename:null!==(e=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==e?e:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}});return Vn(Hp,this).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of Vn(Vp,this).values()){if(!t.cleanup())throw new Error("startCleanup: Page ".concat(t.pageNumber," is currently rendering."))}this.commonObjs.clear(),t||this.fontLoader.clear(),Vn(Hp,this).clear(),this.filterFactory.destroy(!0),np.cleanup()}}cachedPageNumber(t){var e;if(!Vl(t))return null;const n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=Vn(qp,this).get(n))&&void 0!==e?e:null}}function Qp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Vn(Hp,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return Vn(Hp,this).set(t,i),i}var $p=new WeakMap;class Jp{constructor(t){zn(this,$p,null),c(this,"onContinue",null),c(this,"onError",null),Gn($p,this,t)}get promise(){return Vn($p,this).capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Vn($p,this).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=Vn($p,this).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=Vn($p,this);return t.form||t.canvas&&(null===e||void 0===e?void 0:e.size)>0}}var Zp=new WeakMap;class tf{constructor(t){let{callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:p=!1,operationsFilter:f=null}=t;zn(this,Zp,null),this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Jp(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(t){var e,n;let{transparency:i=!1,optionalContentConfig:r}=t;if(this.cancelled)return;if(this._canvas){if(ef._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ef._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new mh(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:i,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var t,e,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),Vn(Zp,this)&&(window.cancelAnimationFrame(Vn(Zp,this)),Gn(Zp,this,null)),ef._.delete(this._canvas),i||(i=new cr("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(e=(n=this.task).onError)||void 0===e||e.call(n,i)}operatorListChanged(){var t,e;this.graphicsReady?(null===(t=this.gfx.dependencyTracker)||void 0===t||t.growOperationsCount(this.operatorList.fnArray.length),null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Gn(Zp,this,window.requestAnimationFrame(()=>{Gn(Zp,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ef._.delete(this._canvas),this.callback())))}}var ef={_:new WeakSet};var nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakMap,cf=new WeakMap,uf=new WeakMap,hf=new WeakMap,df=new WeakMap,pf=new WeakSet;class ff{static get _keyboardManager(){return Fi(this,"_keyboardManager",new ms([[["Escape","mac+Escape"],ff.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ff.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ff.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ff.prototype._moveToPrevious],[["Home","mac+Home"],ff.prototype._moveToBeginning],[["End","mac+End"],ff.prototype._moveToEnd]]))}constructor(t){var e,n;let{editor:i=null,uiManager:r=null}=t;jn(this,pf),zn(this,nf,null),zn(this,rf,null),zn(this,sf,void 0),zn(this,af,null),zn(this,of,!1),zn(this,lf,!1),zn(this,cf,null),zn(this,uf,void 0),zn(this,hf,null),zn(this,df,null),i?(Gn(lf,this,!1),Gn(cf,this,i)):Gn(lf,this,!0),Gn(df,this,(null===i||void 0===i?void 0:i._uiManager)||r),Gn(uf,this,Vn(df,this)._eventBus),Gn(sf,this,(null===i||void 0===i||null===(e=i.color)||void 0===e?void 0:e.toUpperCase())||(null===(n=Vn(df,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),_f._||(_f._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const t=Gn(nf,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",Vn(cf,this)&&(t.ariaControls="".concat(Vn(cf,this).id,"_colorpicker_dropdown"));const e=Vn(df,this)._signal;t.addEventListener("click",Un(pf,this,yf).bind(this),{signal:e}),t.addEventListener("keydown",Un(pf,this,vf).bind(this),{signal:e});const n=Gn(rf,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=Vn(sf,this),t.append(n),t}renderMainDropdown(){const t=Gn(af,this,Un(pf,this,gf).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===Vn(nf,this))return void Un(pf,this,yf).call(this,t);const e=t.target.getAttribute("data-color");e&&Un(pf,this,mf).call(this,e,t)}_moveToNext(t){var e,n;Hn(pf,this,wf)?t.target!==Vn(nf,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=Vn(af,this).firstChild)||void 0===n||n.focus():Un(pf,this,yf).call(this,t)}_moveToPrevious(t){var e,n;t.target!==(null===(e=Vn(af,this))||void 0===e?void 0:e.firstChild)&&t.target!==Vn(nf,this)?(Hn(pf,this,wf)||Un(pf,this,yf).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):Hn(pf,this,wf)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;Hn(pf,this,wf)?null===(e=Vn(af,this).firstChild)||void 0===e||e.focus():Un(pf,this,yf).call(this,t)}_moveToEnd(t){var e;Hn(pf,this,wf)?null===(e=Vn(af,this).lastChild)||void 0===e||e.focus():Un(pf,this,yf).call(this,t)}hideDropdown(){var t,e;null===(t=Vn(af,this))||void 0===t||t.classList.add("hidden"),Vn(nf,this).ariaExpanded="false",null===(e=Vn(hf,this))||void 0===e||e.abort(),Gn(hf,this,null)}_hideDropdownFromKeyboard(){var t;Vn(lf,this)||(Hn(pf,this,wf)?(this.hideDropdown(),Vn(nf,this).focus({preventScroll:!0,focusVisible:Vn(of,this)})):null===(t=Vn(cf,this))||void 0===t||t.unselect())}updateColor(t){if(Vn(rf,this)&&(Vn(rf,this).style.backgroundColor=t),!Vn(af,this))return;const e=Vn(df,this).highlightColors.values();for(const n of Vn(af,this).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;null===(t=Vn(nf,this))||void 0===t||t.remove(),Gn(nf,this,null),Gn(rf,this,null),null===(e=Vn(af,this))||void 0===e||e.remove(),Gn(af,this,null)}}function gf(){const t=document.createElement("div"),e=Vn(df,this)._signal;t.addEventListener("contextmenu",fr,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Vn(cf,this)&&(t.id="".concat(Vn(cf,this).id,"_colorpicker_dropdown"));for(const[n,i]of Vn(df,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",_f._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.ariaSelected=i===Vn(sf,this),r.addEventListener("click",Un(pf,this,mf).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",Un(pf,this,vf).bind(this),{signal:e}),t}function mf(t,e){e.stopPropagation(),Vn(uf,this).dispatch("switchannotationeditorparams",{source:this,type:oi.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}function vf(t){Pn._keyboardManager.exec(this,t)}function yf(t){if(Hn(pf,this,wf))return void this.hideDropdown();if(Gn(of,this,0===t.detail),Vn(hf,this)||(Gn(hf,this,new AbortController),window.addEventListener("pointerdown",Un(pf,this,bf).bind(this),{signal:Vn(df,this).combinedSignal(Vn(hf,this))})),Vn(nf,this).ariaExpanded="true",Vn(af,this))return void Vn(af,this).classList.remove("hidden");const e=Gn(af,this,Un(pf,this,gf).call(this));Vn(nf,this).append(e)}function bf(t){var e;null!==(e=Vn(af,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function wf(t){return Vn(af,t)&&!Vn(af,t).classList.contains("hidden")}Pn=ff;var _f={_:null},xf=new WeakMap,kf=new WeakMap,Af=new WeakMap;class Sf{constructor(t){zn(this,xf,null),zn(this,kf,null),zn(this,Af,null),Gn(kf,this,t),Gn(Af,this,t._uiManager),Ef._||(Ef._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Vn(xf,this))return Vn(xf,this);const{editorType:t,colorType:e,colorValue:n}=Vn(kf,this),i=Gn(xf,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Ef._[t]),i.addEventListener("input",()=>{Vn(Af,this).updateParams(e,i.value)},{signal:Vn(Af,this)._signal}),i}update(t){Vn(xf,this)&&(Vn(xf,this).value=t)}destroy(){var t;null===(t=Vn(xf,this))||void 0===t||t.remove(),Gn(xf,this,null)}hideDropdown(){}}var Ef={_:null};function Cf(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function Mf(t){return Math.max(0,Math.min(255,255*t))}class Tf{static CMYK_G(t){let[e,n,i,r]=t;return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=Mf(e),[e,e,e]}static G_HTML(t){let[e]=t;const n=Cf(e);return"#".concat(n).concat(n).concat(n)}static RGB_G(t){let[e,n,i]=t;return["G",.3*e+.59*n+.11*i]}static RGB_rgb(t){return t.map(Mf)}static RGB_HTML(t){return"#".concat(t.map(Cf).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,n,i,r]=t;return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(t){let[e,n,i,r]=t;return[Mf(1-Math.min(1,e+r)),Mf(1-Math.min(1,i+r)),Mf(1-Math.min(1,n+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,n,i]=t;const r=1-e,s=1-n,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class Pf{create(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Di("Abstract method `_createSVG` called.")}}class Rf extends Pf{_createSVG(t){return document.createElementNS(sr,t)}}const Df=new WeakSet,Lf=60*(new Date).getTimezoneOffset()*1e3;class Nf{static create(t){switch(t.data.annotationType){case gi.LINK:return new Hf(t);case gi.TEXT:return new Xf(t);case gi.WIDGET:switch(t.data.fieldType){case"Tx":return new Kf(t);case"Btn":return t.data.radioButton?new Jf(t):t.data.checkBox?new $f(t):new Zf(t);case"Ch":return new tg(t);case"Sig":return new Qf(t)}return new Yf(t);case gi.POPUP:return new ng(t);case gi.FREETEXT:return new Gg(t);case gi.LINE:return new Xg(t);case gi.SQUARE:return new Kg(t);case gi.CIRCLE:return new $g(t);case gi.POLYLINE:return new Zg(t);case gi.CARET:return new em(t);case gi.INK:return new sm(t);case gi.POLYGON:return new tm(t);case gi.HIGHLIGHT:return new om(t);case gi.UNDERLINE:return new lm(t);case gi.SQUIGGLY:return new cm(t);case gi.STRIKEOUT:return new um(t);case gi.STAMP:return new hm(t);case gi.FILEATTACHMENT:return new fm(t);default:return new Wf(t)}}}var If=new WeakMap,Ff=new WeakMap,Of=new WeakMap,Bf=new WeakSet;class Wf{constructor(t){let{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jn(this,Bf),zn(this,If,null),zn(this,Ff,!1),zn(this,Of,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(t){let{contentsObj:e,richText:n}=t;return!!(null!==e&&void 0!==e&&e.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Wf._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var t;const{data:e}=this,n=null===(t=this.annotationStorage)||void 0===t?void 0:t.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var t;const e=null===(t=this.annotationStorage)||void 0===t?void 0:t.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if((null===n||void 0===n?void 0:n.length)>=8){for(let t=0;t<n.length;t+=8)n[t+1]>a?(a=n[t+1],s=n[t+2]):n[t+1]===a&&(s=Math.max(s,n[t+2]));return[s,a]}if((null===i||void 0===i?void 0:i.length)>=1){for(const t of i)for(let e=0,n=t.length;e<n;e+=2)t[e+1]>a?(a=t[e+1],s=t[e]):t[e+1]===a&&(s=Math.max(s,t[e]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-s)/i,t}get commentText(){var t,e;const{data:n}=this;return(null===(t=this.annotationStorage.getRawValue("".concat(si).concat(n.id)))||void 0===t||null===(t=t.popup)||void 0===t?void 0:t.contents)||(null===(e=n.contentsObj)||void 0===e?void 0:e.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue("".concat(si).concat(e.id),{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;null===(t=(null===(e=Vn(Of,this))||void 0===e?void 0:e.popup)||this.popup)||void 0===t||t.remove(),Gn(Of,this,this.popup=null)}updateEdited(t){var e;if(!this.container)return;t.rect&&(Vn(If,this)||Gn(If,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=t;n&&Un(Bf,this,jf).call(this,n);let r=(null===(e=Vn(Of,this))||void 0===e?void 0:e.popup)||this.popup;!r&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),r=Vn(Of,this).popup),r&&(r.updateEdited(t),null!==i&&void 0!==i&&i.deleted&&(r.remove(),Gn(Of,this,null),this.popup=null))}resetEdited(){var t;Vn(If,this)&&(Un(Bf,this,jf).call(this,Vn(If,this).rect),null===(t=Vn(Of,this))||void 0===t||t.popup.resetEdited(),Gn(If,this,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Yf||this instanceof Hf||(r.tabIndex=0);const{style:s}=r;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof ng){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,r),r}const{width:a,height:o}=this;if(!t&&e.borderStyle.width>0){s.borderWidth="".concat(e.borderStyle.width,"px");const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e="calc(".concat(t,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=e}else if(this instanceof Jf){const t="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");s.borderRadius=t}switch(e.borderStyle.style){case mi:s.borderStyle="solid";break;case vi:s.borderStyle="dashed";break;case yi:Ri("Unimplemented border style: beveled");break;case bi:Ri("Unimplemented border style: inset");break;case wi:s.borderBottomStyle="solid"}const i=e.borderColor||null;i?(Gn(Ff,this,!0),s.borderColor=Yi.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=Yi.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:d}=i.rawDims;s.left="".concat(100*(l[0]-h)/c,"%"),s.top="".concat(100*(l[1]-d)/u,"%");const{rotation:p}=e;return e.hasOwnCanvas||0===p?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/u,"%")):this.setRotation(p,r),r}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:s}=this;t%180!==0&&([r,s]=[s,r]),e.style.width="".concat(100*r/n,"%"),e.style.height="".concat(100*s/i,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const i=n.detail[t],r=i[0],s=i.slice(1);n.target.style[e]=Tf["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[e]:Tf["".concat(r,"_rgb")](s)})};return Fi(this,"_commonActions",{display:t=>{const{display:e}=t.detail,n=e%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];null===r||void 0===r||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const s=n[i];if(s){s({detail:{[i]:r},target:t}),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(t=>Math.fround(t));if(8===t.length){const[s,a,o,l]=t.subarray(2,6);if(i===s&&r===a&&e===o&&n===l)return}const{style:s}=this.container;let a;if(Vn(Ff,this)){const{borderColor:t,borderWidth:e}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(e,'">')],this.container.classList.add("hasBorder")}const o=i-e,l=r-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const h=c.createElement("defs");u.append(h);const d=c.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let g=2,m=t.length;g<m;g+=8){var f;const n=t[g],i=t[g+1],s=t[g+2],u=t[g+3],h=c.createElement("rect"),p=(s-e)/o,m=(r-i)/l,v=(n-s)/o,y=(i-u)/l;h.setAttribute("x",p),h.setAttribute("y",m),h.setAttribute("width",v),h.setAttribute("height",y),d.append(h),null===(f=a)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(y,'"/>'))}Vn(Ff,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const r=Gn(Of,this,new ng({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(Vn(Of,this)||this.popup||this.data.popupRef)}get extraPopupElement(){return Vn(Of,this)}render(){Di("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:r,exportValues:s}of i){if(-1===t)continue;if(r===e)continue;const i="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||Df.has(a)?n.push({id:r,exportValue:i,domElement:a}):Ri("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,r=i.getAttribute("data-element-id");r!==e&&(Df.has(i)&&n.push({id:r,exportValue:t,domElement:i}))}return n}show(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function jf(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...t),e.left="".concat(100*(t[0]-a)/r,"%"),e.top="".concat(100*(s-t[3]+o)/s,"%"),0===i?(e.width="".concat(100*(t[2]-t[0])/r,"%"),e.height="".concat(100*(t[3]-t[1])/s,"%")):this.setRotation(i)}class zf extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Uf=new WeakSet;class Hf extends Wf{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null===e||void 0===e||!e.ignoreBorder),createQuadrilaterals:!0}),jn(this,Uf),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(Un(Uf,this,Gf).call(this,n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(Un(Uf,this,qf).call(this,n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&Un(Uf,this,Vf).call(this),n&&(t.title=n)}_bindNamedAction(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),Un(Uf,this,Vf).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=n.get(i);r&&(t[r]=()=>{var t;return null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1})}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),Un(Uf,this,Vf).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),Un(Uf,this,Vf).call(this),!this._fieldObjects)return Ri('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{null===n||void 0===n||n();const{fields:t,refs:i,include:r}=e,s=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===r&&s.push(n)}else for(const e of Object.values(this._fieldObjects))s.push(...e);const a=this.annotationStorage,o=[];for(const e of s){const{id:t}=e;switch(o.push(t),e.type){case"text":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;a.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(t,'"]'));n&&(Df.has(n)?n.dispatchEvent(new Event("resetform")):Ri("_bindResetFormAction - element not allowed: ".concat(t)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Vf(){this.container.setAttribute("data-internal-link","")}function Gf(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>{var t;return null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,i),!1},Un(Uf,this,Vf).call(this)}function qf(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),Un(Uf,this,Vf).call(this)}class Xf extends Wf{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Yf extends Wf{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return qi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,t=>{var e;null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(n,t=>{var s;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}}))})}_setEventListeners(t,e,n,i){for(const[o,l]of n){var r,s,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||e||(e={focused:!1}),this._setEventListener(t,e,o,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Yi.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=t.style;let s;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(Kn*i))||1);s=Math.min(i,a(e/Kn))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,a(t/Kn))}r.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),r.color=Yi.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Kf extends Yf{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=n),r.setValue(s.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Df.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:d}=this.data,p=!!h&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",t=>{var e;const i=null!==(e=this.data.defaultFieldValue)&&void 0!==e?e:"";n.value=c.userValue=i,c.formattedValue=null});let f=t=>{const{formattedValue:e}=c;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",t=>{var e;if(c.focused)return;const{target:n}=t;if(p&&(n.type=h,d&&(n.step=d)),c.userValue){const t=c.userValue;if(p)if("time"===h){const e=new Date(t),i=[e.getHours(),e.getMinutes(),e.getSeconds()];n.value=i.map(t=>t.toString().padStart(2,"0")).join(":")}else n.value=new Date(t-Lf).toISOString().split("date"===h?"T":".",1)[0];else n.value=t}c.lastCommittedValue=n.value,c.commitKey=1,null!==(e=this.data.actions)&&void 0!==e&&e.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",p||t.setValue(e,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const r={formattedValue:i};p&&(r.value=i),t.setValue(e,r)},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),s.value=c.userValue=a,t.setValue(e,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",t=>{var n;c.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=t.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});const i=f;f=null,n.addEventListener("blur",t=>{var n;if(!c.focused||!t.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:r}=t;let{value:s}=r;if(p){if(s&&"time"===h){const t=s.split(":").map(t=>parseInt(t,10));s=new Date(2e3,0,1,t[0],t[1],t[2]||0).valueOf(),r.step=""}else s.includes("T")||(s="".concat(s,"T00:00")),s=new Date(s).valueOf();r.type="text"}var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}));i(t)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",t=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=t,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,u=o;switch(t.inputType){case"deleteWordBackward":{const t=s.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=s.substring(a).match(/^[^\w]*\w*/);t&&(u+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(u+=1)}t.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:u}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(t,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Qf extends Yf{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class $f extends Yf{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Df.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const a of this._getElementsByName(r,n)){const n=s&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=n),t.setValue(a.id,{value:n})}t.setValue(n,{value:s})}),r.addEventListener("resetform",t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",e=>{const i={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(i,e)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Jf extends Yf{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof i&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const s of this._getElementsByName(e.fieldName,n))t.setValue(s.id,{value:!1});const r=document.createElement("input");if(Df.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",e=>{const{name:i,checked:r}=e.target;for(const s of this._getElementsByName(i,n))t.setValue(s.id,{value:!1});t.setValue(n,{value:r})}),r.addEventListener("resetform",t=>{const n=e.defaultFieldValue;t.target.checked=null!==n&&void 0!==n&&n===e.buttonValue}),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;r.addEventListener("updatefromsandbox",e=>{const r={value:e=>{const r=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){const e=r&&i.id===n;i.domElement&&(i.domElement.checked=e),t.setValue(i.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Zf extends Hf{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})),t}}class tg extends Yf{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Df.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===e});for(const c of this.data.options){const t=document.createElement("option");t.textContent=c.displayValue,t.value=c.exportValue,n.value.includes(c.exportValue)&&(t.setAttribute("selected",!0),r=!1),i.append(t)}let s=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),s=()=>{t.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=t=>{const e=t?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,t=>t.selected).map(t=>t[e]):-1===n.selectedIndex?null:n[n.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,t=>({displayValue:t.textContent,exportValue:t.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const t of i.options)t.selected=c.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,t=>t.selected)&&(r[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,u=i.children[r],h=document.createElement("option");h.textContent=s,h.value=c,u?u.before(h):i.append(h),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const t of r){const{displayValue:e,exportValue:n}=t,r=document.createElement("option");r.textContent=e,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const t of n.target.options)t.selected=i.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=a(!0),s=a(!1);t.setValue(e,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],t=>t.target.value)):i.addEventListener("input",function(n){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var eg=new WeakSet;class ng extends Wf{constructor(t){const{data:e,elements:n,parent:i}=t,r=!!i._commentManager;if(super(t,{isRenderable:!r&&Wf._hasPopupData(e)}),jn(this,eg),this.elements=n,r&&Wf._hasPopupData(e)){const t=this.popup=Un(eg,this,ig).call(this);for(const e of n)e.popup=t}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=Un(eg,this,ig).call(this),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(t=>"".concat(tr).concat(t)).join(",")),this.container}}function ig(){return new Rg({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}var rg=new WeakMap,sg=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,dg=new WeakMap,pg=new WeakMap,fg=new WeakMap,gg=new WeakMap,mg=new WeakMap,vg=new WeakMap,yg=new WeakMap,bg=new WeakMap,wg=new WeakMap,_g=new WeakMap,xg=new WeakMap,kg=new WeakMap,Ag=new WeakMap,Sg=new WeakMap,Eg=new WeakMap,Cg=new WeakMap,Mg=new WeakMap,Tg=new WeakMap,Pg=new WeakSet;class Rg{constructor(t){let{container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h,commentManager:d=null}=t;jn(this,Pg),zn(this,rg,null),zn(this,sg,Un(Pg,this,jg).bind(this)),zn(this,ag,Un(Pg,this,Vg).bind(this)),zn(this,og,Un(Pg,this,Hg).bind(this)),zn(this,lg,Un(Pg,this,Ug).bind(this)),zn(this,cg,null),zn(this,ug,null),zn(this,hg,null),zn(this,dg,null),zn(this,pg,null),zn(this,fg,null),zn(this,gg,null),zn(this,mg,!1),zn(this,vg,null),zn(this,yg,null),zn(this,bg,null),zn(this,wg,null),zn(this,_g,null),zn(this,xg,null),zn(this,kg,null),zn(this,Ag,null),zn(this,Sg,null),zn(this,Eg,null),zn(this,Cg,!1),zn(this,Mg,null),zn(this,Tg,null),Gn(ug,this,e),Gn(Sg,this,r),Gn(hg,this,a),Gn(Ag,this,o),Gn(fg,this,l),Gn(cg,this,n),Gn(kg,this,c),Gn(gg,this,u),Gn(pg,this,i),Gn(rg,this,d),Gn(Mg,this,i[0]),Gn(dg,this,mr.toDateObject(s)),this.trigger=i.flatMap(t=>t.getElementsToTriggerPopup()),d?this.renderCommentButton():(Un(Pg,this,Dg).call(this),Vn(ug,this).hidden=!0,h&&Un(Pg,this,Ug).call(this))}renderCommentButton(){if(Vn(wg,this))return;if(Vn(_g,this)||Un(Pg,this,Lg).call(this),!Vn(_g,this))return;const{signal:t}=Gn(yg,this,new AbortController),e=!!Vn(Mg,this).extraPopupElement,n=()=>{Vn(rg,this).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{Vn(rg,this).toggleCommentPopup(this,!1,!0,!e)},r=()=>{Vn(rg,this).toggleCommentPopup(this,!1,!1)};if(e){Gn(wg,this,Vn(Mg,this).container);for(const e of this.trigger)e.ariaHasPopup="dialog",e.ariaControls="commentPopup",e.addEventListener("keydown",Vn(sg,this),{signal:t}),e.addEventListener("click",n,{signal:t}),e.addEventListener("pointerenter",i,{signal:t}),e.addEventListener("pointerleave",r,{signal:t}),e.classList.add("popupTriggerArea")}else{const e=Gn(wg,this,document.createElement("button"));e.className="annotationCommentButton";const s=Vn(Mg,this).container;e.style.zIndex=s.style.zIndex+1,e.tabIndex=0,e.ariaHasPopup="dialog",e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Un(Pg,this,Ig).call(this),Un(Pg,this,Ng).call(this),e.addEventListener("keydown",Vn(sg,this),{signal:t}),e.addEventListener("click",n,{signal:t}),e.addEventListener("pointerenter",i,{signal:t}),e.addEventListener("pointerleave",r,{signal:t}),s.after(e)}}get commentButtonColor(){const{color:t,opacity:e}=Vn(Mg,this).commentData;return t?Vn(fg,this)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;null===(t=Vn(wg,this))||void 0===t||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}=Vn(Mg,this).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return Vn(wg,this)}get comment(){return Vn(Tg,this)||Gn(Tg,this,Vn(Mg,this).commentText),Vn(Tg,this)}set comment(t){t!==this.comment&&(Vn(Mg,this).commentText=Gn(Tg,this,t))}get parentBoundingClientRect(){return Vn(Mg,this).layer.getBoundingClientRect()}setCommentButtonStates(t){let{selected:e,hasPopup:n}=t;Vn(wg,this)&&(Vn(wg,this).classList.toggle("selected",e),Vn(wg,this).ariaExpanded=n)}setSelectedCommentButton(t){Vn(wg,this).classList.toggle("selected",t)}get commentPopupPosition(){if(Vn(xg,this))return Vn(xg,this);const{x:t,y:e,height:n}=Vn(wg,this).getBoundingClientRect(),{x:i,y:r,width:s,height:a}=Vn(Mg,this).layer.getBoundingClientRect();return[(t-i)/s,(e+n-r)/a]}set commentPopupPosition(t){Gn(xg,this,t)}hasDefaultPopupPosition(){return null===Vn(xg,this)}get commentButtonPosition(){return Vn(_g,this)}get commentButtonWidth(){return Vn(wg,this).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=Vn(xg,this)||this.commentButtonPosition.map(t=>t/100),i=this.parentBoundingClientRect,{x:r,y:s,width:a,height:o}=i;Vn(rg,this).showDialog(null,this,r+e*a,s+n*o,h(h({},t),{},{parentDimensions:i}))}render(){var t,e;if(Vn(vg,this))return;const n=Gn(vg,this,document.createElement("div"));if(n.className="popup",Vn(cg,this)){const t=n.style.outlineColor=Yi.makeHexColor(...Vn(cg,this));n.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const i=document.createElement("span");if(i.className="header",null!==(t=Vn(Sg,this))&&void 0!==t&&t.str){const t=document.createElement("span");t.className="title",i.append(t),({dir:t.dir,str:t.textContent}=Vn(Sg,this))}if(n.append(i),Vn(dg,this)){const t=document.createElement("time");t.className="popupDate",t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:Vn(dg,this).valueOf()})),t.dateTime=Vn(dg,this).toISOString(),i.append(t)}Pr({html:Hn(Pg,this,Fg)||Vn(hg,this).str,dir:null===(e=Vn(hg,this))||void 0===e?void 0:e.dir,className:"popupContent"},n),Vn(ug,this).append(n)}updateEdited(t){var e;let{rect:n,popup:i,deleted:r}=t;if(Vn(rg,this))return r?(this.remove(),Gn(Tg,this,null)):i&&(i.deleted?this.remove():(Un(Pg,this,Ig).call(this),Gn(Tg,this,i.text))),void(n&&(Gn(_g,this,null),Un(Pg,this,Lg).call(this),Un(Pg,this,Ng).call(this)));r||null!==i&&void 0!==i&&i.deleted?this.remove():(Un(Pg,this,Dg).call(this),Vn(Eg,this)||Gn(Eg,this,{contentsObj:Vn(hg,this),richText:Vn(Ag,this)}),n&&Gn(bg,this,null),i&&i.text&&(Gn(Ag,this,Un(Pg,this,Wg).call(this,i.text)),Gn(dg,this,mr.toDateObject(i.date)),Gn(hg,this,null)),null===(e=Vn(vg,this))||void 0===e||e.remove(),Gn(vg,this,null))}resetEdited(){var t;Vn(Eg,this)&&(({contentsObj:Bn(Gn,[hg,this])._,richText:Bn(Gn,[Ag,this])._}=Vn(Eg,this)),Gn(Eg,this,null),null===(t=Vn(vg,this))||void 0===t||t.remove(),Gn(vg,this,null),Gn(bg,this,null))}remove(){var t,e,n;if(null===(t=Vn(yg,this))||void 0===t||t.abort(),Gn(yg,this,null),null===(e=Vn(vg,this))||void 0===e||e.remove(),Gn(vg,this,null),Gn(Cg,this,!1),Gn(mg,this,!1),null===(n=Vn(wg,this))||void 0===n||n.remove(),Gn(wg,this,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){Gn(Cg,this,this.isVisible),Vn(Cg,this)&&(Vn(ug,this).hidden=!0)}maybeShow(){Vn(rg,this)||(Un(Pg,this,Dg).call(this),Vn(Cg,this)&&(Vn(vg,this)||Un(Pg,this,Hg).call(this),Gn(Cg,this,!1),Vn(ug,this).hidden=!1))}get isVisible(){return!Vn(rg,this)&&!1===Vn(ug,this).hidden}}function Dg(){if(Vn(yg,this))return;Gn(yg,this,new AbortController);const{signal:t}=Vn(yg,this);for(const n of this.trigger)n.addEventListener("click",Vn(lg,this),{signal:t}),n.addEventListener("pointerenter",Vn(og,this),{signal:t}),n.addEventListener("pointerleave",Vn(ag,this),{signal:t}),n.classList.add("popupTriggerArea");for(const n of Vn(pg,this)){var e;null===(e=n.container)||void 0===e||e.addEventListener("keydown",Vn(sg,this),{signal:t})}}function Lg(){const t=Vn(pg,this).find(t=>t.hasCommentButton);t&&Gn(_g,this,t._normalizePoint(t.commentButtonPosition))}function Ng(){if(Vn(Mg,this).extraPopupElement&&!Vn(Mg,this).editor)return;this.renderCommentButton();const[t,e]=Vn(_g,this),{style:n}=Vn(wg,this);n.left="calc(".concat(t,"%)"),n.top="calc(".concat(e,"% - var(--comment-button-dim))")}function Ig(){Vn(Mg,this).extraPopupElement||(this.renderCommentButton(),Vn(wg,this).style.backgroundColor=this.commentButtonColor||"")}function Fg(t){const e=Vn(Ag,t),n=Vn(hg,t);return null===e||void 0===e||!e.str||null!==n&&void 0!==n&&n.str&&n.str!==e.str?null:Vn(Ag,t).html||null}function Og(t){var e;return(null===(e=Hn(Pg,t,Fg))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function Bg(t){var e;return(null===(e=Hn(Pg,t,Fg))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function Wg(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:Hn(Pg,this,Bg),fontSize:Hn(Pg,this,Og)?"calc(".concat(Hn(Pg,this,Og),"px * var(--total-scale-factor))"):""}};for(const r of t.split("\n"))e.push({name:"span",value:r,attributes:i});return n}function jg(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&Vn(mg,this))&&Un(Pg,this,Ug).call(this)}function zg(){if(null!==Vn(bg,this))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=Vn(fg,this);let s=!!Vn(gg,this),a=Vn(s?gg:kg,this);for(const d of Vn(pg,this))if(!a||null!==Yi.intersect(d.data.rect,a)){a=d.data.rect,s=!0;break}const o=Yi.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,u=o[1];Gn(bg,this,[100*(c-i)/e,100*(u-r)/n]);const{style:h}=Vn(ug,this);h.left="".concat(Vn(bg,this)[0],"%"),h.top="".concat(Vn(bg,this)[1],"%")}function Ug(){Vn(rg,this)?Vn(rg,this).toggleCommentPopup(this,!1):(Gn(mg,this,!Vn(mg,this)),Vn(mg,this)?(Un(Pg,this,Hg).call(this),Vn(ug,this).addEventListener("click",Vn(lg,this)),Vn(ug,this).addEventListener("keydown",Vn(sg,this))):(Un(Pg,this,Vg).call(this),Vn(ug,this).removeEventListener("click",Vn(lg,this)),Vn(ug,this).removeEventListener("keydown",Vn(sg,this))))}function Hg(){Vn(vg,this)||this.render(),this.isVisible?Vn(mg,this)&&Vn(ug,this).classList.add("focused"):(Un(Pg,this,zg).call(this),Vn(ug,this).hidden=!1,Vn(ug,this).style.zIndex=parseInt(Vn(ug,this).style.zIndex)+1e3)}function Vg(){Vn(ug,this).classList.remove("focused"),!Vn(mg,this)&&this.isVisible&&(Vn(ug,this).hidden=!0,Vn(ug,this).style.zIndex=parseInt(Vn(ug,this).style.zIndex)-1e3)}class Gg extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ai.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qg=new WeakMap;class Xg extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),zn(this,qg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=Gn(qg,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vn(qg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Yg=new WeakMap;class Kg extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),zn(this,Yg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,s=Gn(Yg,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",e-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vn(Yg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Qg=new WeakMap;class $g extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),zn(this,Qg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,s=Gn(Qg,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",e/2),s.setAttribute("cy",n/2),s.setAttribute("rx",e/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vn(Qg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Jg=new WeakMap;class Zg extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),zn(this,Jg,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:r,height:s}=this;if(!e)return this.container;const a=this.svgFactory.create(r,s,!0);let o=[];for(let c=0,u=e.length;c<u;c+=2){const n=e[c]-t[0],i=t[3]-e[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=Gn(Jg,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vn(Jg,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class tm extends Zg{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class em extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var nm=new WeakMap,im=new WeakMap,rm=new WeakSet;class sm extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),jn(this,rm),zn(this,nm,null),zn(this,im,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?ai.HIGHLIGHT:ai.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:s,width:a,height:o}=Un(rm,this,am).call(this,e,t),l=this.svgFactory.create(a,o,!0),c=Gn(nm,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let u=0,h=n.length;u<h;u++){const t=this.svgFactory.createElement(this.svgElementName);Vn(im,this).push(t),t.setAttribute("points",n[u].join(",")),c.append(t)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,r=Vn(nm,this);if(e>=0&&r.setAttribute("stroke-width",e||1),n)for(let s=0,a=Vn(im,this).length;s<a;s++)Vn(im,this)[s].setAttribute("points",n[s].join(","));if(i){const{transform:t,width:e,height:n}=Un(rm,this,am).call(this,this.data.rotation,i);r.parentElement.setAttribute("viewBox","0 0 ".concat(e," ").concat(n)),r.setAttribute("transform",t)}}getElementsToTriggerPopup(){return Vn(im,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function am(t,e){switch(t){case 90:return{transform:"rotate(90) translate(".concat(-e[0],",").concat(e[1],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:"rotate(180) translate(".concat(-e[2],",").concat(e[1],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:"rotate(270) translate(".concat(-e[2],",").concat(e[3],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:"translate(".concat(-e[0],",").concat(e[3],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]}}}class om extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ai.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const e=document.createElement("mark");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class lm extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class cm extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class um extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const e=document.createElement("s");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class hm extends Wf{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ai.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dm=new WeakMap,pm=new WeakSet;class fm extends Wf{constructor(t){var e;super(t,{isRenderable:!0}),jn(this,pm),zn(this,dm,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("fileattachmentannotation",h({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||0===e.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(e.name)?"paperclip":"pushpin",".svg"),e.fillAlpha&&e.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*e.fillAlpha),"%);"))),n.addEventListener("dblclick",Un(pm,this,gm).bind(this)),Gn(dm,this,n);const{isMac:i}=qi.platform;return t.addEventListener("keydown",t=>{"Enter"===t.key&&(i?t.metaKey:t.ctrlKey)&&Un(pm,this,gm).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return Vn(dm,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function gm(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var mm=new WeakMap,vm=new WeakMap,ym=new WeakMap,bm=new WeakMap,wm=new WeakMap,_m=new WeakMap,xm=new WeakSet;class km{constructor(t){let{div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:u}=t;jn(this,xm),zn(this,mm,null),zn(this,vm,null),zn(this,ym,null),zn(this,bm,new Map),zn(this,wm,null),zn(this,_m,null),this.div=e,Gn(mm,this,n),Gn(vm,this,i),Gn(wm,this,o||null),Gn(_m,this,c||null),Gn(ym,this,u||new Il),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return Vn(bm,this).size>0}async render(t){const{annotations:e}=t,n=this.div;_r(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:Vn(_m,this),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new Rf,annotationStorage:Vn(ym,this),enableComment:!0===t.enableComment,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){var s;if(o.noHTML)continue;const t=o.annotationType===gi.POPUP;if(t){const t=i.get(o.id);if(!t)continue;r.elements=t}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const e=Nf.create(r);if(!e.isRenderable)continue;if(!t&&o.popupRef){const t=i.get(o.popupRef);t?t.push(e):i.set(o.popupRef,[e])}const n=e.render();var a;if(o.hidden&&(n.style.visibility="hidden"),await Un(xm,this,Am).call(this,n,o.id,r.elements),null===(s=e.extraPopupElement)||void 0===s||null===(s=s.popup)||void 0===s||s.renderCommentButton(),e._isEditable)Vn(bm,this).set(e.data.id,e),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(e)}Un(xm,this,Sm).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:Vn(_m,this),svgFactory:new Rf,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=km._defaultBorderStyle),e.data=n;const t=Nf.create(e);if(!t.isRenderable)continue;const i=t.render();await Un(xm,this,Am).call(this,i,n.id,null)}}update(t){let{viewport:e}=t;const n=this.div;this.viewport=e,_r(n,{rotation:e.rotation}),Un(xm,this,Sm).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(Vn(bm,this).values())}getEditableAnnotation(t){return Vn(bm,this).get(t)}addFakeAnnotation(t){var e;const{div:n}=this,{id:i,rotation:r}=t,s=new zf({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:n,parent:this,enableComment:!!this._commentManager,linkService:Vn(_m,this),annotationStorage:Vn(ym,this)}),a=s.render();return n.append(a),null===(e=Vn(mm,this))||void 0===e||e.moveElementInDOM(n,a,a,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return Fi(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:mi,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function Am(t,e,n){var i;const r=t.firstChild||t,s=r.id="".concat(tr).concat(e),a=await(null===(i=Vn(wm,this))||void 0===i?void 0:i.getAriaAttributes(s));if(a)for(const[l,c]of a)r.setAttribute(l,c);var o;n?n.at(-1).container.after(t):(this.div.append(t),null===(o=Vn(mm,this))||void 0===o||o.moveElementInDOM(this.div,t,r,!1))}function Sm(){if(!Vn(vm,this))return;const t=this.div;for(const[n,i]of Vn(vm,this)){const r=t.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=Vn(bm,this).get(n);var e;if(a)if(a._hasNoCanvas)null===(e=this._annotationEditorUIManager)||void 0===e||e.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1;else a.canvas=i}Vn(vm,this).clear()}const Em=/\r\n?|\n/g;var Cm=new WeakMap,Mm=new WeakMap,Tm=new WeakMap,Pm=new WeakMap,Rm=new WeakSet;class Dm extends rl{static get _keyboardManager(){const t=Dm.prototype,e=t=>t.isEmpty(),n=ga.TRANSLATE_SMALL,i=ga.TRANSLATE_BIG;return Fi(this,"_keyboardManager",new ms([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}constructor(t){super(h(h({},t),{},{name:"freeTextEditor"})),jn(this,Rm),zn(this,Cm,""),zn(this,Mm,"".concat(this.id,"-editor")),zn(this,Tm,null),zn(this,Pm,void 0),c(this,"_colorPicker",null),this.color=t.color||Dm._defaultColor||rl._defaultLineColor,Gn(Pm,this,t.fontSize||Dm._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){rl.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case oi.FREETEXT_SIZE:Dm._defaultFontSize=e;break;case oi.FREETEXT_COLOR:Dm._defaultColor=e}}updateParams(t,e){switch(t){case oi.FREETEXT_SIZE:Un(Rm,this,Lm).call(this,e);break;case oi.FREETEXT_COLOR:Un(Rm,this,Nm).call(this,e)}}static get defaultPropertiesToUpdate(){return[[oi.FREETEXT_SIZE,Dm._defaultFontSize],[oi.FREETEXT_COLOR,Dm._defaultColor||rl._defaultLineColor]]}get propertiesToUpdate(){return[[oi.FREETEXT_SIZE,Vn(Pm,this)],[oi.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Sf(this)),[["colorPicker",this._colorPicker]]}get colorType(){return oi.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,null===(t=this._colorPicker)||void 0===t||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Dm._internalPadding*t,-(Dm._internalPadding+Vn(Pm,this))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Gn(Tm,this,new AbortController);const t=this._uiManager.combinedSignal(Vn(Tm,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Vn(Mm,this)),this._isDraggable=!0,null===(t=Vn(Tm,this))||void 0===t||t.abort(),Gn(Tm,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var e;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=Vn(Cm,this),e=Gn(Cm,this,Un(Rm,this,Im).call(this).trimEnd());if(t===e)return;const n=t=>{Gn(Cm,this,t),t?(Un(Rm,this,Bm).call(this),this._uiManager.rebuild(this),Un(Rm,this,Fm).call(this)):this.remove()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),Un(Rm,this,Fm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Dm._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Vn(Mm,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(Vn(Pm,this),"px * var(--total-scale-factor))"),n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,u]=this.pageTranslation;let h,d;switch(this.rotation){case 0:h=t+(r[0]-c)/o,d=e+this.height-(r[1]-u)/l;break;case 90:h=t+(r[0]-c)/o,d=e-(r[1]-u)/l,[s,a]=[a,-s];break;case 180:h=t-this.width+(r[0]-c)/o,d=e-(r[1]-u)/l,[s,a]=[-s,-a];break;case 270:h=t+(r[0]-c-this.height*l)/o,d=e+(r[1]-u-this.width*o)/l,[s,a]=[-a,s]}this.setAt(h*n,d*i,s,a)}else this._moveAfterPaste(t,e);Un(Rm,this,Bm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(1===n.length&&"text/plain"===n[0])return;t.preventDefault();const i=jm.call(Dm,e.getData("text")||"").replaceAll(Em,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Em,"")),t!==this.editorDiv){let e=l;for(const n of this.editorDiv.childNodes)n!==t?e.push(Om.call(Dm,n)):e=c}l.push(a.nodeValue.slice(0,o).replaceAll(Em,""))}else if(a===this.editorDiv){let t=l,e=0;for(const n of this.editorDiv.childNodes)e++===o&&(t=c),t.push(Om.call(Dm,n))}Gn(Cm,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),Un(Rm,this,Bm).call(this);const u=new Range;let h=Math.sumPrecise(l.map(t=>t.length));for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const t=d.nodeValue.length;if(h<=t){u.setStart(d,h),u.setEnd(d,h);break}h-=t}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Dm._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let i=null;if(t instanceof Gg){const{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:r,rotation:s,id:a,popupRef:o,richText:l,contentsObj:c,creationDate:u,modificationDate:h},textContent:d,textPosition:p,parent:{page:{pageNumber:f}}}=t;if(!d||0===d.length)return null;i=t={annotationType:ai.FREETEXT,color:Array.from(n),fontSize:e,value:d.join("\n"),position:p,pageIndex:f-1,rect:r.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===c||void 0===c?void 0:c.str)||null,richText:l,creationDate:u,modificationDate:h}}const r=await super.deserialize(t,e,n);return Gn(Pm,r,t.fontSize),r.color=Yi.makeHexColor(...t.color),Gn(Cm,r,jm.call(Dm,t.value)),r._initialData=i,t.comment&&r.setCommentData(t),r}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=rl._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:Vn(Pm,this),value:Un(Rm,this,Wm).call(this)});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!Un(Rm,this,zm).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize="calc(".concat(Vn(Pm,this),"px * var(--total-scale-factor))"),n.color=this.color,e.replaceChildren();for(const i of Vn(Cm,this).split("\n")){const t=document.createElement("div");t.append(i?document.createTextNode(i):document.createElement("br")),e.append(t)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Vn(Cm,this)}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}function Lm(t){const e=t=>{this.editorDiv.style.fontSize="calc(".concat(t,"px * var(--total-scale-factor))"),this.translate(0,-(t-Vn(Pm,this))*this.parentScale),Gn(Pm,this,t),Un(Rm,this,Fm).call(this)},n=Vn(Pm,this);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oi.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Nm(t){const e=t=>{this.color=t,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oi.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Im(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=e)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(t.push(Om.call(Rn,i)),e=i)}return t.join("\n")}function Fm(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,i=e.style.display,r=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=i,e.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}function Om(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Em,"")}function Bm(){if(this.editorDiv.replaceChildren(),Vn(Cm,this))for(const t of Vn(Cm,this).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}function Wm(){return Vn(Cm,this).replaceAll("\xa0"," ")}function jm(t){return t.replaceAll(" ","\xa0")}function zm(t){const{value:e,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((t,e)=>t!==i[e])||t.pageIndex!==r}Rn=Dm,c(Dm,"_freeTextDefaultContent",""),c(Dm,"_internalPadding",0),c(Dm,"_defaultColor",null),c(Dm,"_defaultFontSize",10),c(Dm,"_type","freetext"),c(Dm,"_editorType",ai.FREETEXT);class Um{toSVGPath(){Di("Abstract method `toSVGPath` must be implemented.")}get box(){Di("Abstract getter `box` must be implemented.")}serialize(t,e){Di("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,s){s||(s=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a]*i,s[a+1]=n+t[a+1]*r;return s}static _rescaleAndSwap(t,e,n,i,r,s){s||(s=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a+1]*i,s[a+1]=n+t[a]*r;return s}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,s=t.length;r<s;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,s){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+s)/6,(n+r)/2,(i+s)/2]}}c(Um,"PRECISION",1e-4);var Hm=new WeakMap,Vm=new WeakMap,Gm=new WeakMap,qm=new WeakMap,Xm=new WeakMap,Ym=new WeakMap,Km=new WeakMap,Qm=new WeakMap,$m=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,tv=new WeakMap,ev=new WeakMap,nv=new WeakSet;class iv{constructor(t,e,n,i,r){let{x:s,y:a}=t,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;jn(this,nv),zn(this,Hm,void 0),zn(this,Vm,[]),zn(this,Gm,void 0),zn(this,qm,void 0),zn(this,Xm,[]),zn(this,Ym,new Float32Array(18)),zn(this,Km,void 0),zn(this,Qm,void 0),zn(this,$m,void 0),zn(this,Jm,void 0),zn(this,Zm,void 0),zn(this,tv,void 0),zn(this,ev,[]),Gn(Hm,this,e),Gn(tv,this,i*n),Gn(qm,this,r),Vn(Ym,this).set([NaN,NaN,NaN,NaN,s,a],6),Gn(Gm,this,o),Gn(Jm,this,hv._*n),Gn($m,this,dv._*n),Gn(Zm,this,n),Vn(ev,this).push(s,a)}isEmpty(){return isNaN(Vn(Ym,this)[8])}add(t){var e;let{x:n,y:i}=t;Gn(Km,this,n),Gn(Qm,this,i);const[r,s,a,o]=Vn(Hm,this);let[l,c,u,h]=Vn(Ym,this).subarray(8,12);const d=n-u,p=i-h,f=Math.hypot(d,p);if(f<Vn($m,this))return!1;const g=f-Vn(Jm,this),m=g/f,v=m*d,y=m*p;let b=l,w=c;l=u,c=h,u+=v,h+=y,null===(e=Vn(ev,this))||void 0===e||e.push(n,i);const _=v/g,x=-y/g*Vn(tv,this),k=_*Vn(tv,this);if(Vn(Ym,this).set(Vn(Ym,this).subarray(2,8),0),Vn(Ym,this).set([u+x,h+k],4),Vn(Ym,this).set(Vn(Ym,this).subarray(14,18),12),Vn(Ym,this).set([u-x,h-k],16),isNaN(Vn(Ym,this)[6]))return 0===Vn(Xm,this).length&&(Vn(Ym,this).set([l+x,c+k],2),Vn(Xm,this).push(NaN,NaN,NaN,NaN,(l+x-r)/a,(c+k-s)/o),Vn(Ym,this).set([l-x,c-k],14),Vn(Vm,this).push(NaN,NaN,NaN,NaN,(l-x-r)/a,(c-k-s)/o)),Vn(Ym,this).set([b,w,l,c,u,h],6),!this.isEmpty();Vn(Ym,this).set([b,w,l,c,u,h],6);return Math.abs(Math.atan2(w-c,b-l)-Math.atan2(y,v))<Math.PI/2?([l,c,u,h]=Vn(Ym,this).subarray(2,6),Vn(Xm,this).push(NaN,NaN,NaN,NaN,((l+u)/2-r)/a,((c+h)/2-s)/o),[l,c,b,w]=Vn(Ym,this).subarray(14,18),Vn(Vm,this).push(NaN,NaN,NaN,NaN,((b+l)/2-r)/a,((w+c)/2-s)/o),!0):([b,w,l,c,u,h]=Vn(Ym,this).subarray(0,6),Vn(Xm,this).push(((b+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),[u,h,l,c,b,w]=Vn(Ym,this).subarray(12,18),Vn(Vm,this).push(((b+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const t=Vn(Xm,this),e=Vn(Vm,this);if(isNaN(Vn(Ym,this)[6])&&!this.isEmpty())return Un(nv,this,sv).call(this);const n=[];n.push("M".concat(t[4]," ").concat(t[5]));for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));Un(nv,this,ov).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));return Un(nv,this,av).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,s){return new _v(t,e,n,i,r,s)}getOutlines(){var t,e;const n=Vn(Xm,this),i=Vn(Vm,this),r=Vn(Ym,this),[s,a,o,l]=Vn(Hm,this),c=new Float32Array((null!==(t=null===(e=Vn(ev,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2);for(let d=0,p=c.length-2;d<p;d+=2)c[d]=(Vn(ev,this)[d]-s)/o,c[d+1]=(Vn(ev,this)[d+1]-a)/l;if(c[c.length-2]=(Vn(Km,this)-s)/o,c[c.length-1]=(Vn(Qm,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return Un(nv,this,lv).call(this,c);const u=new Float32Array(Vn(Xm,this).length+24+Vn(Vm,this).length);let h=n.length;for(let d=0;d<h;d+=2)isNaN(n[d])?u[d]=u[d+1]=NaN:(u[d]=n[d],u[d+1]=n[d+1]);h=Un(nv,this,uv).call(this,u,h);for(let d=i.length-6;d>=6;d-=6)for(let t=0;t<6;t+=2)isNaN(i[d+t])?(u[h]=u[h+1]=NaN,h+=2):(u[h]=i[d+t],u[h+1]=i[d+t+1],h+=2);return Un(nv,this,cv).call(this,u,h),this.newFreeDrawOutline(u,c,Vn(Hm,this),Vn(Zm,this),Vn(Gm,this),Vn(qm,this))}}function rv(){const t=Vn(Ym,this).subarray(4,6),e=Vn(Ym,this).subarray(16,18),[n,i,r,s]=Vn(Hm,this);return[(Vn(Km,this)+(t[0]-e[0])/2-n)/r,(Vn(Qm,this)+(t[1]-e[1])/2-i)/s,(Vn(Km,this)+(e[0]-t[0])/2-n)/r,(Vn(Qm,this)+(e[1]-t[1])/2-i)/s]}function sv(){const[t,e,n,i]=Vn(Hm,this),[r,s,a,o]=Un(nv,this,rv).call(this);return"M".concat((Vn(Ym,this)[2]-t)/n," ").concat((Vn(Ym,this)[3]-e)/i," L").concat((Vn(Ym,this)[4]-t)/n," ").concat((Vn(Ym,this)[5]-e)/i," L").concat(r," ").concat(s," L").concat(a," ").concat(o," L").concat((Vn(Ym,this)[16]-t)/n," ").concat((Vn(Ym,this)[17]-e)/i," L").concat((Vn(Ym,this)[14]-t)/n," ").concat((Vn(Ym,this)[15]-e)/i," Z")}function av(t){const e=Vn(Vm,this);t.push("L".concat(e[4]," ").concat(e[5]," Z"))}function ov(t){const[e,n,i,r]=Vn(Hm,this),s=Vn(Ym,this).subarray(4,6),a=Vn(Ym,this).subarray(16,18),[o,l,c,u]=Un(nv,this,rv).call(this);t.push("L".concat((s[0]-e)/i," ").concat((s[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(u," L").concat((a[0]-e)/i," ").concat((a[1]-n)/r))}function lv(t){const e=Vn(Ym,this),[n,i,r,s]=Vn(Hm,this),[a,o,l,c]=Un(nv,this,rv).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/s,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/s,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/s],0),this.newFreeDrawOutline(u,t,Vn(Hm,this),Vn(Zm,this),Vn(Gm,this),Vn(qm,this))}function cv(t,e){const n=Vn(Vm,this);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+6}function uv(t,e){const n=Vn(Ym,this).subarray(4,6),i=Vn(Ym,this).subarray(16,18),[r,s,a,o]=Vn(Hm,this),[l,c,u,h]=Un(nv,this,rv).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o],e),e+24}var hv={_:8},dv={_:hv._+2},pv=new WeakMap,fv=new WeakMap,gv=new WeakMap,mv=new WeakMap,vv=new WeakMap,yv=new WeakMap,bv=new WeakMap,wv=new WeakSet;class _v extends Um{constructor(t,e,n,i,r,s){super(),jn(this,wv),zn(this,pv,void 0),zn(this,fv,new Float32Array(4)),zn(this,gv,void 0),zn(this,mv,void 0),zn(this,vv,void 0),zn(this,yv,void 0),zn(this,bv,void 0),Gn(bv,this,t),Gn(vv,this,e),Gn(pv,this,n),Gn(yv,this,i),Gn(gv,this,r),Gn(mv,this,s),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Un(wv,this,xv).call(this,s);const[a,o,l,c]=Vn(fv,this);for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-a)/l,t[u+1]=(t[u+1]-o)/c;for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-a)/l,e[u+1]=(e[u+1]-o)/c}toSVGPath(){const t=["M".concat(Vn(bv,this)[4]," ").concat(Vn(bv,this)[5])];for(let e=6,n=Vn(bv,this).length;e<n;e+=6)isNaN(Vn(bv,this)[e])?t.push("L".concat(Vn(bv,this)[e+4]," ").concat(Vn(bv,this)[e+5])):t.push("C".concat(Vn(bv,this)[e]," ").concat(Vn(bv,this)[e+1]," ").concat(Vn(bv,this)[e+2]," ").concat(Vn(bv,this)[e+3]," ").concat(Vn(bv,this)[e+4]," ").concat(Vn(bv,this)[e+5]));return t.push("Z"),t.join(" ")}serialize(t,e){let[n,i,r,s]=t;const a=r-n,o=s-i;let l,c;switch(e){case 0:l=Um._rescale(Vn(bv,this),n,s,a,-o),c=Um._rescale(Vn(vv,this),n,s,a,-o);break;case 90:l=Um._rescaleAndSwap(Vn(bv,this),n,i,a,o),c=Um._rescaleAndSwap(Vn(vv,this),n,i,a,o);break;case 180:l=Um._rescale(Vn(bv,this),r,i,-a,o),c=Um._rescale(Vn(vv,this),r,i,-a,o);break;case 270:l=Um._rescaleAndSwap(Vn(bv,this),r,s,-a,-o),c=Um._rescaleAndSwap(Vn(vv,this),r,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return Vn(fv,this)}newOutliner(t,e,n,i,r){return new iv(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(t,e){const[n,i,r,s]=Vn(fv,this),[a,o,l,c]=Vn(pv,this),u=r*l,h=s*c,d=n*l+a,p=i*c+o,f=this.newOutliner({x:Vn(vv,this)[0]*u+d,y:Vn(vv,this)[1]*h+p},Vn(pv,this),Vn(yv,this),t,Vn(mv,this),null!==e&&void 0!==e?e:Vn(gv,this));for(let g=2;g<Vn(vv,this).length;g+=2)f.add({x:Vn(vv,this)[g]*u+d,y:Vn(vv,this)[g+1]*h+p});return f.getOutlines()}}function xv(t){const e=Vn(bv,this);let n=e[4],i=e[5];const r=[n,i,n,i];let s=n,a=i,o=n,l=i;const c=t?Math.max:Math.min,u=new Float32Array(4);for(let d=6,p=e.length;d<p;d+=6){const t=e[d+4],h=e[d+5];isNaN(e[d])?(Yi.pointBoundingBox(t,h,r),a>h?(s=t,a=h):a===h&&(s=c(s,t)),l<h?(o=t,l=h):l===h&&(o=c(o,t))):(u[0]=u[1]=1/0,u[2]=u[3]=-1/0,Yi.bezierBoundingBox(n,i,...e.slice(d,d+6),u),Yi.rectBoundingBox(u[0],u[1],u[2],u[3],r),a>u[1]?(s=u[0],a=u[1]):a===u[1]&&(s=c(s,u[0])),l<u[3]?(o=u[2],l=u[3]):l===u[3]&&(o=c(o,u[2]))),n=t,i=h}const h=Vn(fv,this);h[0]=r[0]-Vn(gv,this),h[1]=r[1]-Vn(gv,this),h[2]=r[2]-r[0]+2*Vn(gv,this),h[3]=r[3]-r[1]+2*Vn(gv,this),this.firstPoint=[s,a],this.lastPoint=[o,l]}var kv=new WeakMap,Av=new WeakMap,Sv=new WeakMap,Ev=new WeakMap,Cv=new WeakMap,Mv=new WeakSet;class Tv{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];jn(this,Mv),zn(this,kv,void 0),zn(this,Av,void 0),zn(this,Sv,void 0),zn(this,Ev,[]),zn(this,Cv,[]);const r=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:f,y:g,width:m,height:v}of t){const t=Math.floor((f-e)/s)*s,n=Math.ceil((f+m+e)/s)*s,i=Math.floor((g-e)/s)*s,a=Math.ceil((g+v+e)/s)*s,o=[t,i,a,!0],l=[n,i,a,!1];Vn(Ev,this).push(o,l),Yi.rectBoundingBox(t,i,n,a,r)}const a=r[2]-r[0]+2*n,o=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n;let u=i?-1/0:1/0,h=1/0;const d=Vn(Ev,this).at(i?-1:-2),p=[d[0],d[2]];for(const f of Vn(Ev,this)){const[t,e,n,r]=f;!r&&i?e<h?(h=e,u=t):e===h&&(u=Math.max(u,t)):r&&!i&&(e<h?(h=e,u=t):e===h&&(u=Math.min(u,t))),f[0]=(t-l)/a,f[1]=(e-c)/o,f[2]=(n-c)/o}Gn(kv,this,new Float32Array([l,c,a,o])),Gn(Av,this,[u,h]),Gn(Sv,this,p)}getOutlines(){Vn(Ev,this).sort((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]);const t=[];for(const e of Vn(Ev,this))e[3]?(t.push(...Un(Mv,this,Nv).call(this,e)),Un(Mv,this,Dv).call(this,e)):(Un(Mv,this,Lv).call(this,e),t.push(...Un(Mv,this,Nv).call(this,e)));return Un(Mv,this,Pv).call(this,t)}}function Pv(t){const e=[],n=new Set;for(const s of t){const[t,n,i]=s;e.push([t,n,s],[t,i,s])}e.sort((t,e)=>t[1]-e[1]||t[0]-e[0]);for(let s=0,a=e.length;s<a;s+=2){const t=e[s][2],i=e[s+1][2];t.push(i),i.push(t),n.add(t),n.add(i)}const i=[];let r;for(;n.size>0;){const t=n.values().next().value;let[e,s,a,o,l]=t;n.delete(t);let c=e,u=s;for(r=[e,a],i.push(r);;){let t;if(n.has(o))t=o;else{if(!n.has(l))break;t=l}n.delete(t),[e,s,a,o,l]=t,c!==e&&(r.push(c,u,e,u===s?s:a),c=e),u=u===s?a:s}r.push(c,u)}return new Ov(i,Vn(kv,this),Vn(Av,this),Vn(Sv,this))}function Rv(t){const e=Vn(Cv,this);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,s=e[r][0];if(s===t)return r;s<t?n=r+1:i=r-1}return i+1}function Dv(t){let[,e,n]=t;const i=Un(Mv,this,Rv).call(this,e);Vn(Cv,this).splice(i,0,[e,n])}function Lv(t){let[,e,n]=t;const i=Un(Mv,this,Rv).call(this,e);for(let r=i;r<Vn(Cv,this).length;r++){const[t,i]=Vn(Cv,this)[r];if(t!==e)break;if(t===e&&i===n)return void Vn(Cv,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[t,i]=Vn(Cv,this)[r];if(t!==e)break;if(t===e&&i===n)return void Vn(Cv,this).splice(r,1)}}function Nv(t){const[e,n,i]=t,r=[[e,n,i]],s=Un(Mv,this,Rv).call(this,i);for(let a=0;a<s;a++){const[t,n]=Vn(Cv,this)[a];for(let i=0,s=r.length;i<s;i++){const[,a,o]=r[i];if(!(n<=a||o<=t))if(a>=t)if(o>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=t,o>n&&r.push([e,n,o])}}return r}var Iv=new WeakMap,Fv=new WeakMap;class Ov extends Um{constructor(t,e,n,i){super(),zn(this,Iv,void 0),zn(this,Fv,void 0),Gn(Fv,this,t),Gn(Iv,this,e),this.firstPoint=n,this.lastPoint=i}toSVGPath(){const t=[];for(const e of Vn(Fv,this)){let[n,i]=e;t.push("M".concat(n," ").concat(i));for(let r=2;r<e.length;r+=2){const s=e[r],a=e[r+1];s===n?(t.push("V".concat(a)),i=a):a===i&&(t.push("H".concat(s)),n=s)}t.push("Z")}return t.join(" ")}serialize(t,e){let[n,i,r,s]=t;const a=[],o=r-n,l=s-i;for(const c of Vn(Fv,this)){const t=new Array(c.length);for(let e=0;e<c.length;e+=2)t[e]=n+c[e]*o,t[e+1]=s-c[e+1]*l;a.push(t)}return a}get box(){return Vn(Iv,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Bv extends iv{newFreeDrawOutline(t,e,n,i,r,s){return new Wv(t,e,n,i,r,s)}}class Wv extends _v{newOutliner(t,e,n,i,r){return new Bv(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var jv=new WeakMap,zv=new WeakMap,Uv=new WeakMap,Hv=new WeakMap,Vv=new WeakMap,Gv=new WeakMap,qv=new WeakMap,Xv=new WeakMap,Yv=new WeakMap,Kv=new WeakMap,Qv=new WeakMap,$v=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,ty=new WeakMap,ey=new WeakMap,ny=new WeakMap,iy=new WeakMap,ry=new WeakSet;class sy extends rl{static get _keyboardManager(){const t=sy.prototype;return Fi(this,"_keyboardManager",new ms([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(h(h({},t),{},{name:"highlightEditor"})),jn(this,ry),zn(this,jv,null),zn(this,zv,0),zn(this,Uv,void 0),zn(this,Hv,null),zn(this,Vv,null),zn(this,Gv,null),zn(this,qv,null),zn(this,Xv,0),zn(this,Yv,null),zn(this,Kv,null),zn(this,Qv,null),zn(this,$v,!1),zn(this,Jv,null),zn(this,Zv,null),zn(this,ty,null),zn(this,ey,""),zn(this,ny,void 0),zn(this,iy,""),this.color=t.color||sy._defaultColor,Gn(ny,this,t.thickness||sy._defaultThickness),this.opacity=t.opacity||sy._defaultOpacity,Gn(Uv,this,t.boxes||null),Gn(iy,this,t.methodOfCreation||""),Gn(ey,this,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(Gn($v,this,!0),Un(ry,this,oy).call(this,t),Un(ry,this,dy).call(this)):Vn(Uv,this)&&(Gn(jv,this,t.anchorNode),Gn(zv,this,t.anchorOffset),Gn(qv,this,t.focusNode),Gn(Xv,this,t.focusOffset),Un(ry,this,ay).call(this),Un(ry,this,dy).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:Vn($v,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Vn(ny,this),methodOfCreation:Vn(iy,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;rl.initialize(t,e),sy._defaultColor||(sy._defaultColor=(null===(n=e.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case oi.HIGHLIGHT_COLOR:sy._defaultColor=e;break;case oi.HIGHLIGHT_THICKNESS:sy._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return Vn(Zv,this)}get commentButtonPosition(){return Vn(Jv,this)}updateParams(t,e){switch(t){case oi.HIGHLIGHT_COLOR:Un(ry,this,ly).call(this,e);break;case oi.HIGHLIGHT_THICKNESS:Un(ry,this,cy).call(this,e)}}static get defaultPropertiesToUpdate(){return[[oi.HIGHLIGHT_COLOR,sy._defaultColor],[oi.HIGHLIGHT_THICKNESS,sy._defaultThickness]]}get propertiesToUpdate(){return[[oi.HIGHLIGHT_COLOR,this.color||sy._defaultColor],[oi.HIGHLIGHT_THICKNESS,Vn(ny,this)||sy._defaultThickness],[oi.HIGHLIGHT_FREE,Vn($v,this)]]}onUpdatedColor(){var t,e;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(Vn(Qv,this),{root:{fill:this.color,"fill-opacity":this.opacity}}),null===(e=Vn(Vv,this))||void 0===e||e.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",Gn(Vv,this,new ff({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Un(ry,this,my).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,Un(ry,this,my).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){Un(ry,this,hy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Un(ry,this,dy).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)Un(ry,this,hy).call(this);else if(t){var n;Un(ry,this,dy).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),this.show(this._isVisible),e&&this.select()}rotate(t){const{drawLayer:e}=this.parent;let n;Vn($v,this)?(t=(t-this.rotation+360)%360,n=py.call(sy,Vn(Kv,this).box,t)):n=py.call(sy,[this.x,this.y,this.width,this.height],t),e.updateProperties(Vn(Qv,this),{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(Vn(ty,this),{bbox:py.call(sy,Vn(Gv,this).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();Vn(ey,this)&&(t.setAttribute("aria-label",Vn(ey,this)),t.setAttribute("role","mark")),Vn($v,this)?t.classList.add("free"):this.div.addEventListener("keydown",Un(ry,this,fy).bind(this),{signal:this._uiManager._signal});const e=Gn(Yv,this,document.createElement("div"));return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=Vn(Hv,this),this.setDims(this.width,this.height),es(this,Vn(Yv,this),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(Vn(ty,this),{rootClass:{hovered:!0}}))}pointerleave(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(Vn(ty,this),{rootClass:{hovered:!1}}))}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:Un(ry,this,gy).call(this,!0);break;case 1:case 3:Un(ry,this,gy).call(this,!1)}}select(){var t;super.select(),Vn(ty,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(Vn(ty,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),Vn(ty,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(Vn(ty,this),{rootClass:{selected:!1}}),Vn($v,this)||Un(ry,this,gy).call(this,!1))}get _mustFixPosition(){return!Vn($v,this)}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(Vn(Qv,this),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(Vn(ty,this),{rootClass:{hidden:!t}}))}static startHighlighting(t,e,n){let{target:i,x:r,y:s}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),d=e=>{u.abort(),Un(sy,this,wy).call(this,t,e)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",gr,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",fr,{signal:h}),i.addEventListener("pointermove",Un(sy,this,by).bind(this,t),{signal:h}),this._freeHighlight=new Bv({x:r,y:s},[a,o,l,c],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(t,e,n){let i=null;if(t instanceof om){const{data:{quadPoints:e,rect:n,rotation:r,id:s,color:a,opacity:o,popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=t;i=t={annotationType:ai.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:e,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}else if(t instanceof sm){const{data:{inkLists:e,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=t;i=t={annotationType:ai.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:e,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=t,l=await super.deserialize(t,e,n);l.color=Yi.makeHexColor(...r),l.opacity=o||1,a&&Gn(ny,l,t.thickness),l._initialData=i,t.comment&&l.setCommentData(t);const[c,u]=l.pageDimensions,[h,d]=l.pageTranslation;if(s){const t=Gn(Uv,l,[]);for(let e=0;e<s.length;e+=8)t.push({x:(s[e]-h)/c,y:1-(s[e+1]-d)/u,width:(s[e+2]-s[e])/c,height:(s[e+1]-s[e+5])/u});Un(ry,l,ay).call(l),Un(ry,l,dy).call(l),l.rotate(l.rotation)}else if(a){Gn($v,l,!0);const t=a[0],n={x:t[0]-h,y:u-(t[1]-d)},i=new Bv(n,[0,0,c,u],1,Vn(ny,l)/2,!0,.001);for(let e=0,a=t.length;e<a;e+=2)n.x=t[e]-h,n.y=u-(t[e+1]-d),i.add(n);const{id:r,clipPathId:s}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);Un(ry,l,oy).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),Un(ry,l,dy).call(l),l.rotate(l.parentRotation)}return l}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=rl._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:Vn(ny,this),quadPoints:Un(ry,this,vy).call(this),outlines:Un(ry,this,yy).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!Un(ry,this,_y).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}function ay(){const t=new Tv(Vn(Uv,this),.001);Gn(Kv,this,t.getOutlines()),[this.x,this.y,this.width,this.height]=Vn(Kv,this).box;const e=new Tv(Vn(Uv,this),.0025,.001,"ltr"===this._uiManager.direction);Gn(Gv,this,e.getOutlines());const{firstPoint:n}=Vn(Kv,this);Gn(Jv,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:i}=Vn(Gv,this);Gn(Zv,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function oy(t){let{highlightOutlines:e,highlightId:n,clipPathId:i}=t;Gn(Kv,this,e);if(Gn(Gv,this,e.getNewOutline(Vn(ny,this)/2+1.5,.0025)),n>=0)Gn(Qv,this,n),Gn(Hv,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),Gn(ty,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Vn(Gv,this).box,path:{d:Vn(Gv,this).toSVGPath()}},!0));else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Vn(Qv,this),{bbox:py.call(Dn,Vn(Kv,this).box,(t-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(Vn(ty,this),{bbox:py.call(Dn,Vn(Gv,this).box,t),path:{d:Vn(Gv,this).toSVGPath()}})}const[r,s,a,o]=e.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=a,this.height=o;break;case 90:{const[t,e]=this.parentDimensions;this.x=s,this.y=1-r,this.width=a*e/t,this.height=o*t/e;break}case 180:this.x=1-r,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-s,this.y=r,this.width=a*e/t,this.height=o*t/e;break}}const{firstPoint:l}=e;Gn(Jv,this,[(l[0]-r)/a,(l[1]-s)/o]);const{lastPoint:c}=Vn(Gv,this);Gn(Zv,this,[(c[0]-r)/a,(c[1]-s)/o])}function ly(t){const e=(t,e)=>{this.color=t,this.opacity=e,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,Dn._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oi.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}function cy(t){const e=Vn(ny,this),n=t=>{Gn(ny,this,t),Un(ry,this,uy).call(this,t)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:oi.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function uy(t){Vn($v,this)&&(Un(ry,this,oy).call(this,{highlightOutlines:Vn(Kv,this).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}function hy(){null!==Vn(Qv,this)&&this.parent&&(this.parent.drawLayer.remove(Vn(Qv,this)),Gn(Qv,this,null),this.parent.drawLayer.remove(Vn(ty,this)),Gn(ty,this,null))}function dy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===Vn(Qv,this)&&(({id:Bn(Gn,[Qv,this])._,clipPathId:Bn(Gn,[Hv,this])._}=t.drawLayer.draw({bbox:Vn(Kv,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Vn($v,this)},path:{d:Vn(Kv,this).toSVGPath()}},!1,!0)),Gn(ty,this,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Vn($v,this)},bbox:Vn(Gv,this).box,path:{d:Vn(Gv,this).toSVGPath()}},Vn($v,this))),Vn(Yv,this)&&(Vn(Yv,this).style.clipPath=Vn(Hv,this)))}function py(t,e){let[n,i,r,s]=t;switch(e){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]}function fy(t){Dn._keyboardManager.exec(this,t)}function gy(t){if(!Vn(jv,this))return;const e=window.getSelection();t?e.setPosition(Vn(jv,this),Vn(zv,this)):e.setPosition(Vn(qv,this),Vn(Xv,this))}function my(){return Vn($v,this)?this.rotation:0}function vy(){if(Vn($v,this))return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,r=Vn(Uv,this),s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:u}of r){const r=o*t+n,h=(1-l)*e+i;s[a]=s[a+4]=r,s[a+1]=s[a+3]=h,s[a+2]=s[a+6]=r+c*t,s[a+5]=s[a+7]=h-u*e,a+=8}return s}function yy(t){return Vn(Kv,this).serialize(t,Un(ry,this,my).call(this))}function by(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function wy(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function _y(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((t,n)=>t!==e[n])}Dn=sy,c(sy,"_defaultColor",null),c(sy,"_defaultOpacity",1),c(sy,"_defaultThickness",12),c(sy,"_type","highlight"),c(sy,"_editorType",ai.HIGHLIGHT),c(sy,"_freeHighlightId",-1),c(sy,"_freeHighlight",null),c(sy,"_freeHighlightClipId","");var xy=new WeakMap;class ky{constructor(){zn(this,xy,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){Vn(xy,this)[t]=e}toSVGProperties(){const t=Vn(xy,this);return Gn(xy,this,Object.create(null)),{root:t}}reset(){Gn(xy,this,Object.create(null))}updateAll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(t)}clone(){Di("Not implemented")}}var Ay=new WeakMap,Sy=new WeakMap,Ey=new WeakSet;class Cy extends rl{constructor(t){super(t),jn(this,Ey),zn(this,Ay,null),zn(this,Sy,void 0),c(this,"_colorPicker",null),c(this,"_drawId",null),Gn(Sy,this,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;null===(t=this._colorPicker)||void 0===t||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(Un(Ey,this,My).call(this,t),Un(Ey,this,Ry).call(this))}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,r]of Object.entries(e))n.has(i)?Object.assign(t[i],r):t[i]=r;return t}static getDefaultDrawingOptions(t){Di("Not implemented")}static get typesMap(){Di("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(Fy._.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,r=i[e],s=n=>{var r;i.updateProperty(e,n);const s=Vn(Ay,this).updateProperty(e,n);s&&Un(Ey,this,Ny).call(this,s),null===(r=this.parent)||void 0===r||r.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,Cy._mergeSVGProperties(Vn(Ay,this).getPathResizingSVGProperties(Un(Ey,this,Ly).call(this)),{bbox:Un(Ey,this,Iy).call(this)}))}_onResized(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,Cy._mergeSVGProperties(Vn(Ay,this).getPathResizedSVGProperties(Un(Ey,this,Ly).call(this)),{bbox:Un(Ey,this,Iy).call(this)}))}_onTranslating(t,e){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:Un(Ey,this,Iy).call(this)})}_onTranslated(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,Cy._mergeSVGProperties(Vn(Ay,this).getPathTranslatedSVGProperties(Un(Ey,this,Ly).call(this),this.parentDimensions),{bbox:Un(Ey,this,Iy).call(this)}))}_onStartDragging(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Vn(Sy,this)&&(Gn(Sy,this,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){Un(Ey,this,Py).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Un(Ey,this,Ry).call(this),Un(Ey,this,Ny).call(this,Vn(Ay,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)this._uiManager.removeShouldRescale(this),Un(Ey,this,Py).call(this);else if(t){var n;this._uiManager.addShouldRescale(this),Un(Ey,this,Ry).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),e&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Cy._mergeSVGProperties({bbox:Un(Ey,this,Iy).call(this)},Vn(Ay,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Un(Ey,this,Ny).call(this,Vn(Ay,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,r){Di("Not implemented")}static startDrawing(t,e,n,i){var r,s;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=i;if(jy._&&jy._!==u)return;const{viewport:{rotation:h}}=t,{width:d,height:p}=a.getBoundingClientRect(),f=Oy._=new AbortController,g=t.combinedSignal(f);Wy._||(Wy._=c),null!==(r=jy._)&&void 0!==r||(jy._=u),window.addEventListener("pointerup",t=>{var e;Wy._===t.pointerId?this._endDraw(t):null===(e=zy._)||void 0===e||e.delete(t.pointerId)},{signal:g}),window.addEventListener("pointercancel",t=>{var e;Wy._===t.pointerId?this._currentParent.endDrawingSession():null===(e=zy._)||void 0===e||e.delete(t.pointerId)},{signal:g}),window.addEventListener("pointerdown",t=>{jy._===t.pointerType&&((zy._||(zy._=new Set)).add(t.pointerId),Fy._.isCancellable()&&(Fy._.removeLastElement(),Fy._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",fr,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",t=>{t.timeStamp===Uy._&&gr(t)},{signal:g}),t.toggleDrawing(),null===(s=e._editorUndoBar)||void 0===s||s.hide(),Fy._?t.drawLayer.updateProperties(this._currentDrawId,Fy._.startNew(o,l,d,p,h)):(e.updateUIForDefaultProperties(this),Fy._=this.createDrawerInstance(o,l,d,p,h),By._=this.getDefaultDrawingOptions(),this._currentParent=t,({id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(By._.toSVGProperties(),Fy._.defaultSVGProperties),!0,!1)))}static _drawMove(t){var e;if(Uy._=-1,!Fy._)return;const{offsetX:n,offsetY:i,pointerId:r}=t;Wy._===r&&((null===(e=zy._)||void 0===e?void 0:e.size)>=1?this._endDraw(t):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,Fy._.add(n,i)),Uy._=t.timeStamp,gr(t)))}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Fy._=null,By._=null,jy._=null,Uy._=NaN),Oy._&&(Oy._.abort(),Oy._=null,Wy._=NaN,zy._=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),(null===t||void 0===t?void 0:t.target)===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Fy._.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const t=Fy._,n=this._currentDrawId,i=t.getLastElement();return void e.addCommands({cmd:()=>{e.drawLayer.updateProperties(n,t.setLastElement(i))},undo:()=>{e.drawLayer.updateProperties(n,t.removeLastElement())},mustExec:!1,type:oi.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(oi.DRAW_STEP),!Fy._.isEmpty()){const{pageDimensions:[n,i],scale:r}=e,s=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Fy._.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:By._,mustBeCommitted:!t});return this._cleanup(!0),s}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,r,s){Di("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=e.viewport,o=this.deserializeDraw(s,a,i,r,this._INNER_MARGIN,t),l=await super.deserialize(t,e,n);return l.createDrawingOptions(t),Un(Ey,l,My).call(l,{drawOutlines:o}),Un(Ey,l,Ry).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(t){const[e,n]=this.pageTranslation,[i,r]=this.pageDimensions;return Vn(Ay,this).serialize([e,n,i,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function My(t){let{drawOutlines:e,drawId:n,drawingOptions:i}=t;Gn(Ay,this,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=Un(Ey,this,Ty).call(this,e,this.parent),Un(Ey,this,Ny).call(this,e.box)}function Ty(t,e){const{id:n}=e.drawLayer.draw(Ln._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}function Py(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function Ry(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=Un(Ey,this,Ty).call(this,Vn(Ay,this),t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))}function Dy(t){let[e,n,i,r]=t;const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-e,i*(a/s),r*(s/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/s),r*(s/a)];default:return[e,n,i,r]}}function Ly(){const{x:t,y:e,width:n,height:i,parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[1-e,t,n*(r/s),i*(s/r)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(r/s),i*(s/r)];default:return[t,e,n,i]}}function Ny(t){[this.x,this.y,this.width,this.height]=Un(Ey,this,Dy).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}function Iy(){const{x:t,y:e,width:n,height:i,rotation:r,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*r+s)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-e,t,n*(a/o),i*(o/a)];case 6:return[1-t-i*(o/a),1-e,i*(o/a),n*(a/o)];case 7:return[e-n*(a/o),1-t-i*(o/a),n*(a/o),i*(o/a)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(o/a),e,i*(o/a),n*(a/o)];case 13:return[1-e-n*(a/o),t-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-t,1-e-n*(a/o),i*(o/a),n*(a/o)];case 15:return[e,1-t,n*(a/o),i*(o/a)];default:return[t,e,n,i]}}Ln=Cy,c(Cy,"_currentDrawId",-1),c(Cy,"_currentParent",null);var Fy={_:null},Oy={_:null},By={_:null},Wy={_:NaN},jy={_:null},zy={_:null},Uy={_:NaN};c(Cy,"_INNER_MARGIN",3);var Hy=new WeakMap,Vy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Xy=new WeakMap,Yy=new WeakMap,Ky=new WeakMap,Qy=new WeakMap,$y=new WeakMap,Jy=new WeakMap,Zy=new WeakMap,tb=new WeakSet;class eb{constructor(t,e,n,i,r,s){jn(this,tb),zn(this,Hy,new Float64Array(6)),zn(this,Vy,void 0),zn(this,Gy,void 0),zn(this,qy,void 0),zn(this,Xy,void 0),zn(this,Yy,void 0),zn(this,Ky,""),zn(this,Qy,0),zn(this,$y,new pb),zn(this,Jy,void 0),zn(this,Zy,void 0),Gn(Jy,this,n),Gn(Zy,this,i),Gn(qy,this,r),Gn(Xy,this,s),[t,e]=Un(tb,this,nb).call(this,t,e);const a=Gn(Vy,this,[NaN,NaN,NaN,NaN,t,e]);Gn(Yy,this,[t,e]),Gn(Gy,this,[{line:a,points:Vn(Yy,this)}]),Vn(Hy,this).set(a,0)}updateProperty(t,e){"stroke-width"===t&&Gn(Xy,this,e)}isEmpty(){return!Vn(Gy,this)||0===Vn(Gy,this).length}isCancellable(){return Vn(Yy,this).length<=10}add(t,e){[t,e]=Un(tb,this,nb).call(this,t,e);const[n,i,r,s]=Vn(Hy,this).subarray(2,6),a=t-r,o=e-s;return Math.hypot(Vn(Jy,this)*a,Vn(Zy,this)*o)<=2?null:(Vn(Yy,this).push(t,e),isNaN(n)?(Vn(Hy,this).set([r,s,t,e],2),Vn(Vy,this).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(Vn(Hy,this)[0])&&Vn(Vy,this).splice(6,6),Vn(Hy,this).set([n,i,r,s,t,e],0),Vn(Vy,this).push(...Um.createBezierPoints(n,i,r,s,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(2===Vn(Yy,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){Gn(Jy,this,n),Gn(Zy,this,i),Gn(qy,this,r),[t,e]=Un(tb,this,nb).call(this,t,e);const s=Gn(Vy,this,[NaN,NaN,NaN,NaN,t,e]);Gn(Yy,this,[t,e]);const a=Vn(Gy,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),Vn(Gy,this).push({line:s,points:Vn(Yy,this)}),Vn(Hy,this).set(s,0),Gn(Qy,this,0),this.toSVGPath(),null}getLastElement(){return Vn(Gy,this).at(-1)}setLastElement(t){return Vn(Gy,this)?(Vn(Gy,this).push(t),Gn(Vy,this,t.line),Gn(Yy,this,t.points),Gn(Qy,this,0),{path:{d:this.toSVGPath()}}):Vn($y,this).setLastElement(t)}removeLastElement(){if(!Vn(Gy,this))return Vn($y,this).removeLastElement();Vn(Gy,this).pop(),Gn(Ky,this,"");for(let t=0,e=Vn(Gy,this).length;t<e;t++){const{line:e,points:n}=Vn(Gy,this)[t];Gn(Vy,this,e),Gn(Yy,this,n),Gn(Qy,this,0),this.toSVGPath()}return{path:{d:Vn(Ky,this)}}}toSVGPath(){const t=Um.svgRound(Vn(Vy,this)[4]),e=Um.svgRound(Vn(Vy,this)[5]);if(2===Vn(Yy,this).length)return Gn(Ky,this,"".concat(Vn(Ky,this)," M ").concat(t," ").concat(e," Z")),Vn(Ky,this);if(Vn(Yy,this).length<=6){const n=Vn(Ky,this).lastIndexOf("M");Gn(Ky,this,"".concat(Vn(Ky,this).slice(0,n)," M ").concat(t," ").concat(e)),Gn(Qy,this,6)}if(4===Vn(Yy,this).length){const t=Um.svgRound(Vn(Vy,this)[10]),e=Um.svgRound(Vn(Vy,this)[11]);return Gn(Ky,this,"".concat(Vn(Ky,this)," L ").concat(t," ").concat(e)),Gn(Qy,this,12),Vn(Ky,this)}const n=[];0===Vn(Qy,this)&&(n.push("M ".concat(t," ").concat(e)),Gn(Qy,this,6));for(let i=Vn(Qy,this),r=Vn(Vy,this).length;i<r;i+=6){const[t,e,r,s,a,o]=Vn(Vy,this).slice(i,i+6).map(Um.svgRound);n.push("C".concat(t," ").concat(e," ").concat(r," ").concat(s," ").concat(a," ").concat(o))}return Gn(Ky,this,Vn(Ky,this)+n.join(" ")),Gn(Qy,this,Vn(Vy,this).length),Vn(Ky,this)}getOutlines(t,e,n,i){const r=Vn(Gy,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),Vn($y,this).build(Vn(Gy,this),t,e,n,Vn(qy,this),Vn(Xy,this),i),Gn(Hy,this,null),Gn(Vy,this,null),Gn(Gy,this,null),Gn(Ky,this,null),Vn($y,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function nb(t,e){return Um._normalizePoint(t,e,Vn(Jy,this),Vn(Zy,this),Vn(qy,this))}var ib=new WeakMap,rb=new WeakMap,sb=new WeakMap,ab=new WeakMap,ob=new WeakMap,lb=new WeakMap,cb=new WeakMap,ub=new WeakMap,hb=new WeakMap,db=new WeakSet;class pb extends Um{constructor(){super(...arguments),jn(this,db),zn(this,ib,void 0),zn(this,rb,0),zn(this,sb,void 0),zn(this,ab,void 0),zn(this,ob,void 0),zn(this,lb,void 0),zn(this,cb,void 0),zn(this,ub,void 0),zn(this,hb,void 0)}build(t,e,n,i,r,s,a){Gn(ob,this,e),Gn(lb,this,n),Gn(cb,this,i),Gn(ub,this,r),Gn(hb,this,s),Gn(sb,this,null!==a&&void 0!==a?a:0),Gn(ab,this,t),Un(db,this,mb).call(this)}get thickness(){return Vn(hb,this)}setLastElement(t){return Vn(ab,this).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return Vn(ab,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of Vn(ab,this))if(t.push("M".concat(Um.svgRound(e[4])," ").concat(Um.svgRound(e[5]))),6!==e.length)if(12===e.length&&isNaN(e[6]))t.push("L".concat(Um.svgRound(e[10])," ").concat(Um.svgRound(e[11])));else for(let n=6,i=e.length;n<i;n+=6){const[i,r,s,a,o,l]=e.subarray(n,n+6).map(Um.svgRound);t.push("C".concat(i," ").concat(r," ").concat(s," ").concat(a," ").concat(o," ").concat(l))}else t.push("Z");return t.join("")}serialize(t,e){let[n,i,r,s]=t;const a=[],o=[],[l,c,u,h]=Un(db,this,gb).call(this);let d,p,f,g,m,v,y,b,w;switch(Vn(ub,this)){case 0:w=Um._rescale,d=n,p=i+s,f=r,g=-s,m=n+l*r,v=i+(1-c-h)*s,y=n+(l+u)*r,b=i+(1-c)*s;break;case 90:w=Um._rescaleAndSwap,d=n,p=i,f=r,g=s,m=n+c*r,v=i+l*s,y=n+(c+h)*r,b=i+(l+u)*s;break;case 180:w=Um._rescale,d=n+r,p=i,f=-r,g=s,m=n+(1-l-u)*r,v=i+c*s,y=n+(1-l)*r,b=i+(c+h)*s;break;case 270:w=Um._rescaleAndSwap,d=n+r,p=i+s,f=-r,g=-s,m=n+(1-c-h)*r,v=i+(1-l-u)*s,y=n+(1-c)*r,b=i+(1-l)*s}for(const{line:_,points:x}of Vn(ab,this))a.push(w(_,d,p,f,g,e?new Array(_.length):null)),o.push(w(x,d,p,f,g,e?new Array(x.length):null));return{lines:a,points:o,rect:[m,v,y,b]}}static deserialize(t,e,n,i,r,s){let{paths:{lines:a,points:o},rotation:l,thickness:c}=s;const u=[];let h,d,p,f,g;switch(l){case 0:g=Um._rescale,h=-t/n,d=e/i+1,p=1/n,f=-1/i;break;case 90:g=Um._rescaleAndSwap,h=-e/i,d=-t/n,p=1/i,f=1/n;break;case 180:g=Um._rescale,h=t/n+1,d=-e/i,p=-1/n,f=1/i;break;case 270:g=Um._rescaleAndSwap,h=e/i+1,d=t/n+1,p=-1/i,f=-1/n}if(!a){a=[];for(const t of o){const e=t.length;if(2===e){a.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1]]));continue}if(4===e){a.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1],NaN,NaN,NaN,NaN,t[2],t[3]]));continue}const n=new Float32Array(3*(e-2));a.push(n);let[i,r,s,o]=t.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,r],0);for(let a=4;a<e;a+=2){const e=t[a],l=t[a+1];n.set(Um.createBezierPoints(i,r,s,o,e,l),3*(a-2)),[i,r,s,o]=[s,o,e,l]}}}for(let v=0,y=a.length;v<y;v++)u.push({line:g(a[v].map(t=>null!==t&&void 0!==t?t:NaN),h,d,p,f),points:g(o[v].map(t=>null!==t&&void 0!==t?t:NaN),h,d,p,f)});const m=new this.prototype.constructor;return m.build(u,n,i,1,l,c,r),m}get box(){return Vn(ib,this)}updateProperty(t,e){return"stroke-width"===t?Un(db,this,vb).call(this,e):null}updateParentDimensions(t,e){let[n,i]=t;const[r,s]=Un(db,this,fb).call(this);Gn(ob,this,n),Gn(lb,this,i),Gn(cb,this,e);const[a,o]=Un(db,this,fb).call(this),l=a-r,c=o-s,u=Vn(ib,this);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return Gn(rb,this,t),{path:{transform:this.rotationTransform}}}get viewBox(){return Vn(ib,this).map(Um.svgRound).join(" ")}get defaultProperties(){const[t,e]=Vn(ib,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Um.svgRound(t)," ").concat(Um.svgRound(e))}}}get rotationTransform(){const[,,t,e]=Vn(ib,this);let n=0,i=0,r=0,s=0,a=0,o=0;switch(Vn(rb,this)){case 90:i=e/t,r=-t/e,a=t;break;case 180:n=-1,s=-1,a=t,o=e;break;case 270:i=-e/t,r=t/e,o=e;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(Um.svgRound(a)," ").concat(Um.svgRound(o),")")}getPathResizingSVGProperties(t){let[e,n,i,r]=t;const[s,a]=Un(db,this,fb).call(this),[o,l,c,u]=Vn(ib,this);if(Math.abs(c-s)<=Um.PRECISION||Math.abs(u-a)<=Um.PRECISION){const t=e+i/2-(o+c/2),s=n+r/2-(l+u/2);return{path:{"transform-origin":"".concat(Um.svgRound(e)," ").concat(Um.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(t," ").concat(s,")")}}}const h=(i-2*s)/(c-2*s),d=(r-2*a)/(u-2*a),p=c/i,f=u/r;return{path:{"transform-origin":"".concat(Um.svgRound(o)," ").concat(Um.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(Um.svgRound(s)," ").concat(Um.svgRound(a),") scale(").concat(h," ").concat(d,") ")+"translate(".concat(Um.svgRound(-s)," ").concat(Um.svgRound(-a),")")}}}getPathResizedSVGProperties(t){let[e,n,i,r]=t;const[s,a]=Un(db,this,fb).call(this),o=Vn(ib,this),[l,c,u,h]=o;if(o[0]=e,o[1]=n,o[2]=i,o[3]=r,Math.abs(u-s)<=Um.PRECISION||Math.abs(h-a)<=Um.PRECISION){const t=e+i/2-(l+u/2),s=n+r/2-(c+h/2);for(const{line:e,points:n}of Vn(ab,this))Um._translate(e,t,s,e),Um._translate(n,t,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Um.svgRound(e)," ").concat(Um.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(u-2*s),p=(r-2*a)/(h-2*a),f=-d*(l+s)+e+s,g=-p*(c+a)+n+a;if(1!==d||1!==p||0!==f||0!==g)for(const{line:m,points:v}of Vn(ab,this))Um._rescale(m,f,g,d,p,m),Um._rescale(v,f,g,d,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Um.svgRound(e)," ").concat(Um.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(t,e){let[n,i]=t;const[r,s]=e,a=Vn(ib,this),o=n-a[0],l=i-a[1];if(Vn(ob,this)===r&&Vn(lb,this)===s)for(const{line:c,points:u}of Vn(ab,this))Um._translate(c,o,l,c),Um._translate(u,o,l,u);else{const t=Vn(ob,this)/r,e=Vn(lb,this)/s;Gn(ob,this,r),Gn(lb,this,s);for(const{line:n,points:i}of Vn(ab,this))Um._rescale(n,o,l,t,e,n),Um._rescale(i,o,l,t,e,i);a[2]*=t,a[3]*=e}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Um.svgRound(n)," ").concat(Um.svgRound(i))}}}get defaultSVGProperties(){const t=Vn(ib,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Um.svgRound(t[0])," ").concat(Um.svgRound(t[1])),transform:this.rotationTransform||null},bbox:t}}}function fb(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn(hb,this);const e=Vn(sb,this)+t/2*Vn(cb,this);return Vn(ub,this)%180===0?[e/Vn(ob,this),e/Vn(lb,this)]:[e/Vn(lb,this),e/Vn(ob,this)]}function gb(){const[t,e,n,i]=Vn(ib,this),[r,s]=Un(db,this,fb).call(this,0);return[t+r,e+s,n-2*r,i-2*s]}function mb(){const t=Gn(ib,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of Vn(ab,this)){if(i.length<=12){for(let e=4,n=i.length;e<n;e+=6)Yi.pointBoundingBox(i[e],i[e+1],t);continue}let e=i[4],n=i[5];for(let r=6,s=i.length;r<s;r+=6){const[s,a,o,l,c,u]=i.subarray(r,r+6);Yi.bezierBoundingBox(e,n,s,a,o,l,c,u,t),e=c,n=u}}const[e,n]=Un(db,this,fb).call(this);t[0]=er(t[0]-e,0,1),t[1]=er(t[1]-n,0,1),t[2]=er(t[2]+e,0,1),t[3]=er(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}function vb(t){const[e,n]=Un(db,this,fb).call(this);Gn(hb,this,t);const[i,r]=Un(db,this,fb).call(this),[s,a]=[i-e,r-n],o=Vn(ib,this);return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}class yb extends ky{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:rl._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){"stroke-width"===t&&(null!==e&&void 0!==e||(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new yb(this._viewParameters);return t.updateAll(this),t}}var bb=new WeakSet;class wb extends Cy{constructor(t){super(h(h({},t),{},{name:"inkEditor"})),jn(this,bb),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){rl.initialize(t,e),this._defaultDrawingOptions=new yb(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fi(this,"typesMap",new Map([[oi.INK_THICKNESS,"stroke-width"],[oi.INK_COLOR,"stroke"],[oi.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,r){return new eb(t,e,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,r,s){return pb.deserialize(t,e,n,i,r,s)}static async deserialize(t,e,n){let i=null;if(t instanceof sm){const{data:{inkLists:e,rect:n,rotation:r,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,richText:u,contentsObj:h,creationDate:d,modificationDate:p},parent:{page:{pageNumber:f}}}=t;i=t={annotationType:ai.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:e},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:c,richText:u,comment:(null===h||void 0===h?void 0:h.str)||null,creationDate:d,modificationDate:p}}const r=await super.deserialize(t,e,n);return r._initialData=i,t.comment&&r.setCommentData(t),r}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Sf(this)),[["colorPicker",this._colorPicker]]}get colorType(){return oi.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(t){let{color:e,thickness:n,opacity:i}=t;this._drawingOptions=wb.getDefaultDrawingOptions({stroke:Yi.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{color:rl._colorManager.convert(i),opacity:r,thickness:s,paths:{lines:e,points:n}});return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!Un(bb,this,_b).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}function _b(t){const{color:e,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((t,n)=>t!==e[n])||t.thickness!==n||t.opacity!==i||t.pageIndex!==r}c(wb,"_type","ink"),c(wb,"_editorType",ai.INK),c(wb,"_defaultDrawingOptions",null);class xb extends pb{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}class kb{static extractContoursFromText(t,e,n,i,r,s){let{fontFamily:a,fontStyle:o,fontWeight:l}=e,c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=u.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:y}=u.measureText(t),b=1.5,w=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,y)*b),_=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*b);c=new OffscreenCanvas(w,_),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,w,_),u.fillStyle="black",u.fillText(t,.5*w/2,1.5*_/2);const x=Un(kb,this,Db).call(this,u.getImageData(0,0,w,_).data),k=Un(kb,this,Rb).call(this,x),A=Un(kb,this,Lb).call(this,k),S=Un(kb,this,Cb).call(this,x,w,_,A);return this.processDrawnLines({lines:{curves:S,width:w,height:_},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,r){const[s,a,o]=Un(kb,this,Nb).call(this,t),[l,c]=Un(kb,this,Pb).call(this,s,a,o,Math.hypot(a,o)*Un(kb,this,Ib)._.sigmaSFactor,Un(kb,this,Ib)._.sigmaR,Un(kb,this,Ib)._.kernelSize),u=Un(kb,this,Lb).call(this,c),h=Un(kb,this,Cb).call(this,l,a,o,u);return this.processDrawnLines({lines:{curves:h,width:a,height:o},pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(t){var e;let{lines:n,pageWidth:i,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}=t;s%180!==0&&([i,r]=[r,i]);const{curves:c,width:u,height:h}=n,d=null!==(e=n.thickness)&&void 0!==e?e:0,p=[],f=Math.min(i/u,r/h),g=f/i,m=f/r,v=[];for(const{points:b}of c){const t=o?Un(kb,this,Tb).call(this,b):b;if(!t)continue;v.push(t);const e=t.length,n=new Float32Array(e),i=new Float32Array(3*(2===e?2:e-2));if(p.push({line:i,points:n}),2===e){n[0]=t[0]*g,n[1]=t[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,s,a,l]=t;r*=g,s*=m,a*=g,l*=m,n.set([r,s,a,l],0),i.set([NaN,NaN,NaN,NaN,r,s],0);for(let o=4;o<e;o+=2){const e=n[o]=t[o]*g,c=n[o+1]=t[o+1]*m;i.set(Um.createBezierPoints(r,s,a,l,e,c),3*(o-2)),[r,s,a,l]=[a,l,e,c]}}if(0===p.length)return null;const y=l?new xb:new pb;return y.build(p,i,r,1,s,l?0:d,a),{outline:y,newCurves:v,areContours:l,thickness:d,width:u,height:h}}static async compressSignature(t){let e,{outlines:n,areContours:i,thickness:r,width:s,height:a}=t,o=1/0,l=-1/0,c=0;for(const y of n){c+=y.length;for(let t=2,e=y.length;t<e;t++){const e=y[t]-y[t-2];o=Math.min(o,e),l=Math.max(l,e)}}e=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const u=n.length,h=8+3*u,d=new Uint32Array(h);let p=0;d[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*e.BYTES_PER_ELEMENT,d[p++]=0,d[p++]=s,d[p++]=a,d[p++]=i?0:1,d[p++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),d[p++]=u,d[p++]=e.BYTES_PER_ELEMENT;for(const y of n)d[p++]=y.length-2,d[p++]=y[0],d[p++]=y[1];const f=new CompressionStream("deflate-raw"),g=f.writable.getWriter();await g.ready,g.write(d);const m=e.prototype.constructor;for(const y of n){const t=new m(y.length-2);for(let e=2,n=y.length;e<n;e++)t[e-2]=y[e]-y[e-2];g.write(t)}g.close();const v=await new Response(f.readable).arrayBuffer();return nr(new Uint8Array(v))}static async decompressSignature(t){try{const l=(a=t,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Gi(atob(a))),{readable:c,writable:u}=new DecompressionStream("deflate-raw"),h=u.getWriter();await h.ready,h.write(l).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let d=null,p=0;var e,n=!1,i=!1;try{for(var r,s=function(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new qn(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(r=await s.next()).done;n=!1){const t=r.value;d||(d=new Uint8Array(new Uint32Array(t.buffer,0,4)[0])),d.set(t,p),p+=t.length}}catch(o){i=!0,e=o}finally{try{n&&null!=s.return&&await s.return()}finally{if(i)throw e}}const f=new Uint32Array(d.buffer,0,d.length>>2),g=f[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=f[2],v=f[3],y=0===f[4],b=f[5],w=f[6],_=f[7],x=[],k=(8+3*w)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(_){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(d.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(d.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(d.buffer,k)}p=0;for(let t=0;t<w;t++){const e=f[3*t+8],n=new Float32Array(e+2);x.push(n);for(let i=0;i<2;i++)n[i]=f[3*t+8+i+1];for(let t=0;t<e;t++)n[t+2]=n[t]+A[p++]}return{areContours:y,thickness:b,outlines:x,width:m,height:v}}catch(K_){return Ri("decompressSignature: ".concat(K_)),null}var a}}function Ab(t,e,n,i){return i-=e,0===(n-=t)?i>0?0:4:1===n?i+6:2-i}function Sb(t,e,n,i,r,s,a){const o=Un(Nn,this,Ab).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(-l+o-a+16)%8;if(0!==t[(n+Un(Nn,this,Fb)._[2*r])*e+(i+Un(Nn,this,Fb)._[2*r+1])])return r}return-1}function Eb(t,e,n,i,r,s,a){const o=Un(Nn,this,Ab).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(l+o+a+16)%8;if(0!==t[(n+Un(Nn,this,Fb)._[2*r])*e+(i+Un(Nn,this,Fb)._[2*r+1])])return r}return-1}function Cb(t,e,n,i){const r=t.length,s=new Int32Array(r);for(let c=0;c<r;c++)s[c]=t[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*e]=s[c*e+e-1]=0;for(let c=0;c<e;c++)s[c]=s[e*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let t=1;t<e-1;t++){const n=c*e+t,i=s[n];if(0===i)continue;let r=c,u=t;if(1===i&&0===s[n-1])o+=1,u-=1;else{if(!(i>=1&&0===s[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,u+=1,i>1&&(a=i)}const h=[t,c],d=u===t+1,p={isHole:d,points:h,id:o,parent:0};let f;l.push(p);for(const t of l)if(t.id===a){f=t;break}f?f.isHole?p.parent=d?f.parent:a:p.parent=d?a:f.parent:p.parent=d?a:0;const g=Un(Nn,this,Sb).call(this,s,e,c,t,r,u,0);if(-1===g){s[n]=-o,1!==s[n]&&(a=Math.abs(s[n]));continue}let m=Un(Nn,this,Fb)._[2*g],v=Un(Nn,this,Fb)._[2*g+1];const y=c+m,b=t+v;r=y,u=b;let w=c,_=t;for(;;){const i=Un(Nn,this,Eb).call(this,s,e,w,_,r,u,1);m=Un(Nn,this,Fb)._[2*i],v=Un(Nn,this,Fb)._[2*i+1];const l=w+m,d=_+v;h.push(d,l);const p=w*e+_;if(0===s[p+1]?s[p]=-o:1===s[p]&&(s[p]=o),l===c&&d===t&&w===y&&_===b){1!==s[n]&&(a=Math.abs(s[n]));break}r=w,u=_,w=l,_=d}}}return l}function Mb(t,e,n,i){if(n-e<=4){for(let r=e;r<n-2;r+=2)i.push(t[r],t[r+1]);return}const r=t[e],s=t[e+1],a=t[n-4]-r,o=t[n-3]-s,l=Math.hypot(a,o),c=a/l,u=o/l,h=c*s-u*r,d=o/a,p=1/l,f=Math.atan(d),g=Math.cos(f),m=Math.sin(f),v=p*(Math.abs(g)+Math.abs(m)),y=p*(1-v+v**2),b=Math.max(Math.atan(Math.abs(m+g)*y),Math.atan(Math.abs(m-g)*y));let w=0,_=e;for(let x=e+2;x<n-2;x+=2){const e=Math.abs(h-c*t[x+1]+u*t[x]);e>w&&(_=x,w=e)}w>(l*b)**2?(Un(Nn,this,Mb).call(this,t,e,_+2,i),Un(Nn,this,Mb).call(this,t,_,n,i)):i.push(r,s)}function Tb(t){const e=[],n=t.length;return Un(Nn,this,Mb).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}function Pb(t,e,n,i,r,s){const a=new Float32Array(s**2),o=-2*i**2,l=s>>1;for(let f=0;f<s;f++){const t=(f-l)**2;for(let e=0;e<s;e++)a[f*s+e]=Math.exp((t+(e-l)**2)/o)}const c=new Float32Array(256),u=-2*r**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/u);const h=t.length,d=new Uint8Array(h),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<e;i++){const r=f*e+i,o=t[r];let u=0,h=0;for(let d=0;d<s;d++){const r=f+d-l;if(!(r<0||r>=n))for(let n=0;n<s;n++){const p=i+n-l;if(p<0||p>=e)continue;const f=t[r*e+p],g=a[d*s+n]*c[Math.abs(f-o)];u+=f*g,h+=g}}p[d[r]=Math.round(u/h)]++}return[d,p]}function Rb(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}function Db(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let a=0,o=n.length;a<o;a++){const e=n[a]=t[a<<2];i=Math.max(i,e),r=Math.min(r,e)}const s=255/(i-r);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-r)*s;return n}function Lb(t){let e,n=-1/0,i=-1/0;const r=t.findIndex(t=>0!==t);let s=r,a=r;for(e=r;e<256;e++){const r=t[e];r>n&&(e-s>i&&(i=e-s,a=e-1),n=r,s=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}function Nb(t){const e=t,{width:n,height:i}=t,{maxDim:r}=Un(Nn,this,Ib)._;let s=n,a=i;if(n>r||i>r){let o=n,l=i,c=Math.log2(Math.max(n,i)/r);const u=Math.floor(c);c=c===u?u-1:u;for(let n=0;n<c;n++){s=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(s,a);n.getContext("2d").drawImage(t,0,0,o,l,0,0,s,a),o=s,l=a,t!==e&&t.close(),t=n.transferToImageBitmap()}const h=Math.min(r/s,r/a);s=Math.round(s*h),a=Math.round(a*h)}const o=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,s,a),o.filter="grayscale(1)",o.drawImage(t,0,0,t.width,t.height,0,0,s,a);const l=o.getImageData(0,0,s,a).data;return[Un(Nn,this,Db).call(this,l),s,a]}Nn=kb;var Ib={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},Fb={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class Ob extends ky{constructor(){super(),super.updateProperties({fill:rl._defaultLineColor,"stroke-width":0})}clone(){const t=new Ob;return t.updateAll(this),t}}class Bb extends yb{constructor(t){super(t),super.updateProperties({stroke:rl._defaultLineColor,"stroke-width":1})}clone(){const t=new Bb(this._viewParameters);return t.updateAll(this),t}}var Wb=new WeakMap,jb=new WeakMap,zb=new WeakMap,Ub=new WeakMap;class Hb extends Cy{constructor(t){super(h(h({},t),{},{mustBeCommitted:!0,name:"signatureEditor"})),zn(this,Wb,!1),zn(this,jb,null),zn(this,zb,null),zn(this,Ub,null),this._willKeepAspectRatio=!0,Gn(zb,this,t.signatureData||null),Gn(jb,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){rl.initialize(t,e),this._defaultDrawingOptions=new Ob,this._defaultDrawnSignatureOptions=new Bb(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fi(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Vn(jb,this)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasDescription");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),null===this._drawId)if(Vn(zb,this)){const{lines:t,mustSmooth:e,areContours:n,description:i,uuid:r,heightInPage:s}=Vn(zb,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=kb.processDrawnLines({lines:t,pageWidth:a,pageHeight:o,rotation:l,innerMargin:Hb._INNER_MARGIN,mustSmooth:e,areContours:n});this.addSignature(c,s,i,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Vn(jb,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){Gn(Ub,this,t),this.addEditToolbar()}getUuid(){return Vn(Ub,this)}get description(){return Vn(jb,this)}set description(t){Gn(jb,this,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{null===e||void 0===e||e.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:r}=Vn(zb,this),s=Math.max(i,r);return{areContours:e,outline:kb.processDrawnLines({lines:{curves:t.map(t=>({points:t})),thickness:n,width:i,height:r},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,i){const{x:r,y:s}=this,{outline:a}=Gn(zb,this,t);let o;Gn(Wb,this,a instanceof xb),this.description=n,Vn(Wb,this)?o=Hb.getDefaultDrawingOptions():(o=Hb._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[,l]=this.pageDimensions;let c=e/l;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=r,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return kb.process(t,e,n,i,Hb._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return kb.extractContoursFromText(t,e,n,i,r,Hb._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return kb.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:Hb._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(t){let{areContours:e,thickness:n}=t;e?this._drawingOptions=Hb.getDefaultDrawingOptions():(this._drawingOptions=Hb._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(t),{isSignature:!0,areContours:Vn(Wb,this),color:[0,0,0],thickness:Vn(Wb,this)?0:i});return this.addComment(r),t?(r.paths={lines:e,points:n},r.uuid=Vn(Ub,this),r.isCopy=!0):r.lines=e,Vn(jb,this)&&(r.accessibilityData={type:"Figure",alt:Vn(jb,this)}),r}static deserializeDraw(t,e,n,i,r,s){return s.areContours?xb.deserialize(t,e,n,i,r,s):pb.deserialize(t,e,n,i,r,s)}static async deserialize(t,e,n){var i;const r=await super.deserialize(t,e,n);return Gn(Wb,r,t.areContours),r.description=(null===(i=t.accessibilityData)||void 0===i?void 0:i.alt)||"",Gn(Ub,r,t.uuid),r}}c(Hb,"_type","signature"),c(Hb,"_editorType",ai.SIGNATURE),c(Hb,"_defaultDrawingOptions",null);var Vb=new WeakMap,Gb=new WeakMap,qb=new WeakMap,Xb=new WeakMap,Yb=new WeakMap,Kb=new WeakMap,Qb=new WeakMap,$b=new WeakMap,Jb=new WeakMap,Zb=new WeakMap,tw=new WeakMap,ew=new WeakSet;class nw extends rl{constructor(t){super(h(h({},t),{},{name:"stampEditor"})),jn(this,ew),zn(this,Vb,null),zn(this,Gb,null),zn(this,qb,null),zn(this,Xb,null),zn(this,Yb,null),zn(this,Kb,""),zn(this,Qb,null),zn(this,$b,!1),zn(this,Jb,null),zn(this,Zb,!1),zn(this,tw,!1),Gn(Xb,this,t.bitmapUrl),Gn(Yb,this,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){rl.initialize(t,e)}static isHandlingMimeForPasting(t){return kr.includes(t)}static paste(t,e){e.pasteEditor({mode:ai.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!(null===(t=this.altTextData)||void 0===t||!t.altText)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasAltText");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=t||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var t;Vn(Gb,this)&&(Gn(Vb,this,null),this._uiManager.imageManager.deleteId(Vn(Gb,this)),null===(t=Vn(Qb,this))||void 0===t||t.remove(),Gn(Qb,this,null),Vn(Jb,this)&&(clearTimeout(Vn(Jb,this)),Gn(Jb,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Vn(Gb,this)&&null===Vn(Qb,this)&&Un(ew,this,sw).call(this),this.isAttachedToDOM||this.parent.add(this))):Vn(Gb,this)&&Un(ew,this,sw).call(this)}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(Vn(qb,this)||Vn(Vb,this)||Vn(Xb,this)||Vn(Yb,this)||Vn(Gb,this)||Vn($b,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Vn($b,this)||(Vn(Vb,this)?Un(ew,this,aw).call(this):Un(ew,this,sw).call(this)),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(Gn(Gb,this,n),i&&Gn(Vb,this,i),Gn($b,this,!1),Un(ew,this,aw).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==Vn(Jb,this)&&clearTimeout(Vn(Jb,this));Gn(Jb,this,setTimeout(()=>{Gn(Jb,this,null),Un(ew,this,lw).call(this)},200))}copyCanvas(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=224);const{width:i,height:r}=Vn(Vb,this),s=new xr;let a=Vn(Vb,this),o=i,l=r,c=null;if(e){if(i>e||r>e){const t=Math.min(e/i,e/r);o=Math.floor(i*t),l=Math.floor(r*t)}c=document.createElement("canvas");const t=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);Vn(Zb,this)||(a=Un(ew,this,ow).call(this,t,n));const u=c.getContext("2d");u.filter=this._uiManager.hcmFilter;let h="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":Ar.isDarkMode&&(h="#8f8f9d",d="#42414d");const p=15,f=p*s.sx,g=p*s.sy,m=new OffscreenCanvas(2*f,2*g),v=m.getContext("2d");v.fillStyle=h,v.fillRect(0,0,2*f,2*g),v.fillStyle=d,v.fillRect(0,0,f,g),v.fillRect(f,g,f,g),u.fillStyle=u.createPattern(m,"repeat"),u.fillRect(0,0,t,n),u.drawImage(a,0,0,a.width,a.height,0,0,t,n)}let u=null;if(n){let e,n;if(s.symmetric&&a.width<t&&a.height<t)e=a.width,n=a.height;else if(a=Vn(Vb,this),i>t||r>t){const s=Math.min(t/i,t/r);e=Math.floor(i*s),n=Math.floor(r*s),Vn(Zb,this)||(a=Un(ew,this,ow).call(this,e,n))}const o=new OffscreenCanvas(e,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,e,n),u={width:e,height:n,data:o.getImageData(0,0,e,n).data}}return{canvas:c,width:o,height:l,imageData:u}}static async deserialize(t,e,n){let i=null,r=!1;if(t instanceof hm){var s;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:u,richText:h,contentsObj:d,creationDate:p,modificationDate:f},container:g,parent:{page:{pageNumber:m}},canvas:v}=t;let y,b;v?(delete t.canvas,({id:y,bitmap:b}=n.imageManager.getFromCanvas(g.id,v)),v.remove()):(r=!0,t._hasNoCanvas=!0);const w=(null===(s=await e._structTree.getAriaAttributes("".concat(tr).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";i=t={annotationType:ai.STAMP,bitmapId:y,bitmap:b,pageIndex:m-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:w},isSvg:!1,structParent:c,popupRef:u,richText:h,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:p,modificationDate:f}}const a=await super.deserialize(t,e,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=t;r?(n.addMissingCanvas(t.id,a),Gn($b,a,!0)):u&&n.imageManager.isValidId(u)?(Gn(Gb,a,u),l&&Gn(Vb,a,l)):Gn(Xb,a,c),Gn(Zb,a,h);const[p,f]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/f,d&&(a.altTextData=d),a._initialData=i,t.comment&&a.setCommentData(t),Gn(tw,a,!!i),a}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:Vn(Gb,this),isSvg:Vn(Zb,this)});if(this.addComment(n),t)return n.bitmapUrl=Un(ew,this,cw).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const t=Un(ew,this,uw).call(this,n);if(t.isSame)return null;var s;if(t.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1;return n.id=this.annotationElementId,delete n.bitmapId,n}if(null===e)return n;e.stamps||(e.stamps=new Map);const a=Vn(Zb,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(Vn(Gb,this))){if(Vn(Zb,this)){const t=e.stamps.get(Vn(Gb,this));a>t.area&&(t.area=a,t.serialized.bitmap.close(),t.serialized.bitmap=Un(ew,this,cw).call(this,!1))}}else e.stamps.set(Vn(Gb,this),{area:a,serialized:n}),n.bitmap=Un(ew,this,cw).call(this,!1);return n}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}function iw(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(Gn(Vb,this,t.bitmap),e||(Gn(Gb,this,t.id),Gn(Zb,this,t.isSvg)),t.file&&Gn(Kb,this,t.file.name),Un(ew,this,aw).call(this)):this.remove()}function rw(){if(Gn(qb,this,null),this._uiManager.enableWaiting(!1),Vn(Qb,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Vn(Vb,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Vn(Vb,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(t){}}this.div.focus()}}function sw(){if(Vn(Gb,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Vn(Gb,this)).then(t=>Un(ew,this,iw).call(this,t,!0)).finally(()=>Un(ew,this,rw).call(this));if(Vn(Xb,this)){const t=Vn(Xb,this);return Gn(Xb,this,null),this._uiManager.enableWaiting(!0),void Gn(qb,this,this._uiManager.imageManager.getFromUrl(t).then(t=>Un(ew,this,iw).call(this,t)).finally(()=>Un(ew,this,rw).call(this)))}if(Vn(Yb,this)){const t=Vn(Yb,this);return Gn(Yb,this,null),this._uiManager.enableWaiting(!0),void Gn(qb,this,this._uiManager.imageManager.getFromFile(t).then(t=>Un(ew,this,iw).call(this,t)).finally(()=>Un(ew,this,rw).call(this)))}const t=document.createElement("input");t.type="file",t.accept=kr.join(",");const e=this._uiManager._signal;Gn(qb,this,new Promise(n=>{t.addEventListener("change",async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Un(ew,this,iw).call(this,e)}else this.remove();n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>Un(ew,this,rw).call(this))),t.click()}function aw(){var t;const{div:e}=this;let{width:n,height:i}=Vn(Vb,this);const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const t=Math.min(a*r/n,a*s/i);n*=t,i*=t}this._uiManager.enableWaiting(!1);const o=Gn(Qb,this,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=n/r,this.height=i/s,this.setDims(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),Un(ew,this,lw).call(this),Vn(tw,this)||(this.parent.addUndoableEditor(this),Gn(tw,this,!0)),this._reportTelemetry({action:"inserted_image"}),Vn(Kb,this)&&this.div.setAttribute("aria-description",Vn(Kb,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function ow(t,e){const{width:n,height:i}=Vn(Vb,this);let r=n,s=i,a=Vn(Vb,this);for(;r>2*t||s>2*e;){const n=r,i=s;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,n,i,0,0,r,s),a=o.transferToImageBitmap()}return a}function lw(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,r=new xr,s=Math.ceil(n*t*r.sx),a=Math.ceil(i*e*r.sy),o=Vn(Qb,this);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=Vn(Zb,this)?Vn(Vb,this):Un(ew,this,ow).call(this,s,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,a)}function cw(t){if(t){if(Vn(Zb,this)){const t=this._uiManager.imageManager.getSvgUrl(Vn(Gb,this));if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=Vn(Vb,this));return t.getContext("2d").drawImage(Vn(Vb,this),0,0),t.toDataURL()}if(Vn(Zb,this)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*ar.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*ar.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(Vn(Vb,this),0,0,Vn(Vb,this).width,Vn(Vb,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(Vn(Vb,this))}function uw(t){var e;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===n,s=((null===(e=t.accessibilityData)||void 0===e?void 0:e.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}c(nw,"_type","stamp"),c(nw,"_editorType",ai.STAMP);var hw=new WeakMap,dw=new WeakMap,pw=new WeakMap,fw=new WeakMap,gw=new WeakMap,mw=new WeakMap,vw=new WeakMap,yw=new WeakMap,bw=new WeakMap,ww=new WeakMap,_w=new WeakMap,xw=new WeakMap,kw=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,Ew=new WeakMap,Cw=new WeakSet;class Mw{constructor(t){let{uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}=t;jn(this,Cw),zn(this,hw,void 0),zn(this,dw,!1),zn(this,pw,null),zn(this,fw,null),zn(this,gw,null),zn(this,mw,new Map),zn(this,vw,!1),zn(this,yw,!1),zn(this,bw,!1),zn(this,ww,null),zn(this,_w,null),zn(this,xw,null),zn(this,kw,null),zn(this,Aw,null),zn(this,Sw,-1),zn(this,Ew,void 0);const h=[...Iw._.values()];if(!Mw._initialized){Mw._initialized=!0;for(const t of h)t.initialize(u,e)}e.registerEditorTypes(h),Gn(Ew,this,e),this.pageIndex=n,this.div=i,Gn(hw,this,s),Gn(pw,this,a),this.viewport=c,Gn(xw,this,l),this.drawLayer=o,this._structTree=r,Vn(Ew,this).addLayer(this)}get isEmpty(){return 0===Vn(mw,this).size}get isInvisible(){return this.isEmpty&&Vn(Ew,this).getMode()===ai.NONE}updateToolbar(t){Vn(Ew,this).updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn(Ew,this).getMode();switch(Un(Cw,this,Nw).call(this),t){case ai.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case ai.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ai.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===ai.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Iw._.values())e.toggle("".concat(n._type,"Editing"),t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===(null===(e=Vn(xw,this))||void 0===e?void 0:e.div)}setEditingState(t){Vn(Ew,this).setEditingState(t)}addCommands(t){Vn(Ew,this).addCommands(t)}cleanUndoStack(t){Vn(Ew,this).cleanUndoStack(t)}toggleDrawing(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=Vn(pw,this))||void 0===t||t.div.classList.toggle("disabled",!e)}async enable(){var t;Gn(bw,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null===(t=Vn(Aw,this))||void 0===t||t.abort(),Gn(Aw,this,null);const e=new Set;for(const i of Hn(Cw,this,Tw))i.enableEditing(),i.show(!0),i.annotationElementId&&(Vn(Ew,this).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=Vn(pw,this);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),Vn(Ew,this).isDeletedAnnotationElement(i.data.id))continue;if(e.has(i.data.id))continue;const t=await this.deserialize(i);t&&(this.addOrRebuild(t),t.enableEditing())}Gn(bw,this,!1),Vn(Ew,this)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(Gn(yw,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Vn(xw,this)&&!Vn(Aw,this)){Gn(Aw,this,new AbortController);const t=Vn(Ew,this).combinedSignal(Vn(Aw,this));Vn(xw,this).div.addEventListener("pointerdown",t=>{const{clientX:e,clientY:n,timeStamp:i}=t;if(i-Vn(Sw,this)>500)return void Gn(Sw,this,i);Gn(Sw,this,-1);const{classList:r}=this.div;r.toggle("getElements",!0);const s=document.elementsFromPoint(e,n);if(r.toggle("getElements",!1),!this.div.contains(s[0]))return;let a;const o=new RegExp("^".concat(si,"[0-9]+$"));for(const c of s)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=Vn(mw,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(t.stopPropagation(),t.preventDefault(),l.dblclick(t))},{signal:t,capture:!0})}const t=Vn(pw,this);if(t){const n=new Map,i=new Map;for(const s of Hn(Cw,this,Tw)){var e;s.disableEditing(),s.annotationElementId?null===s.serialize()?(i.set(s.annotationElementId,s),null===(e=this.getEditableAnnotation(s.annotationElementId))||void 0===e||e.show(),s.remove()):n.set(s.annotationElementId,s):s.updateFakeAnnotationElement(t)}const r=t.getEditableAnnotations();for(const t of r){const{id:e}=t.data;if(Vn(Ew,this).isDeletedAnnotationElement(e)){t.updateEdited({deleted:!0});continue}let r=i.get(e);r?(r.resetAnnotationElement(t),r.show(!1),t.show()):(r=n.get(e),r&&(Vn(Ew,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(t)&&r.show(!1)),t.show())}}Un(Cw,this,Nw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of Iw._.values())n.remove("".concat(i._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Gn(yw,this,!1)}getEditableAnnotation(t){var e;return(null===(e=Vn(pw,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){Vn(Ew,this).getActive()!==t&&Vn(Ew,this).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,null!==(t=Vn(xw,this))&&void 0!==t&&t.div&&!Vn(kw,this)){Gn(kw,this,new AbortController);const t=Vn(Ew,this).combinedSignal(Vn(kw,this));Vn(xw,this).div.addEventListener("pointerdown",Un(Cw,this,Pw).bind(this),{signal:t}),Vn(xw,this).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,null!==(t=Vn(xw,this))&&void 0!==t&&t.div&&Vn(kw,this)&&(Vn(kw,this).abort(),Gn(kw,this,null),Vn(xw,this).div.classList.remove("highlighting"))}enableClick(){if(Vn(fw,this))return;Gn(fw,this,new AbortController);const t=Vn(Ew,this).combinedSignal(Vn(fw,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;null===(t=Vn(fw,this))||void 0===t||t.abort(),Gn(fw,this,null)}attach(t){Vn(mw,this).set(t.id,t);const{annotationElementId:e}=t;e&&Vn(Ew,this).isDeletedAnnotationElement(e)&&Vn(Ew,this).removeDeletedAnnotationElement(t)}detach(t){var e;Vn(mw,this).delete(t.id),null===(e=Vn(hw,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!Vn(yw,this)&&t.annotationElementId&&Vn(Ew,this).addDeletedAnnotationElement(t)}remove(t){this.detach(t),Vn(Ew,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(Vn(Ew,this).addDeletedAnnotationElement(t.annotationElementId),rl.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),Vn(Ew,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!Vn(bw,this)),Vn(Ew,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!Vn(gw,this)&&(t._focusEventsAllowed=!1,Gn(gw,this,setTimeout(()=>{Gn(gw,this,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:Vn(Ew,this)._signal}),n.focus())},0))),t._structTreeParentId=null===(e=Vn(hw,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getEditorByUID(t){for(const e of Vn(mw,this).values())if(e.uid===t)return e;return null}getNextId(){return Vn(Ew,this).getId()}combinedSignal(t){return Vn(Ew,this).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return null===(t=Hn(Cw,this,Rw))||void 0===t?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await Vn(Ew,this).updateMode(t.mode);const{offsetX:n,offsetY:i}=Un(Cw,this,Lw).call(this),r=this.getNextId(),s=Un(Cw,this,Dw).call(this,h({parent:this,id:r,x:n,y:i,uiManager:Vn(Ew,this),isCentered:!0},e));s&&this.add(s)}async deserialize(t){var e,n;return await(null===(e=Iw._.get(null!==(n=t.annotationType)&&void 0!==n?n:t.annotationEditorType))||void 0===e?void 0:e.deserialize(t,this,Vn(Ew,this)))||null}createAndAddNewEditor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=Un(Cw,this,Dw).call(this,h({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:Vn(Ew,this),isCentered:e},n));return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(Un(Cw,this,Lw).call(this),!0,t)}setSelected(t){Vn(Ew,this).setSelected(t)}toggleSelected(t){Vn(Ew,this).toggleSelected(t)}unselect(t){Vn(Ew,this).unselect(t)}pointerup(t){var e;const{isMac:n}=qi.platform;if(0!==t.button||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(!Vn(vw,this))return;if(Gn(vw,this,!1),null!==(e=Hn(Cw,this,Rw))&&void 0!==e&&e.isDrawer&&Hn(Cw,this,Rw).supportMultipleDrawings)return;if(!Vn(dw,this))return void Gn(dw,this,!0);const i=Vn(Ew,this).getMode();i!==ai.STAMP&&i!==ai.SIGNATURE?this.createAndAddNewEditor(t,!1):Vn(Ew,this).unselectAll()}pointerdown(t){var e;if(Vn(Ew,this).getMode()===ai.HIGHLIGHT&&this.enableTextSelection(),Vn(vw,this))return void Gn(vw,this,!1);const{isMac:n}=qi.platform;if(0!==t.button||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(Gn(vw,this,!0),null!==(e=Hn(Cw,this,Rw))&&void 0!==e&&e.isDrawer)return void this.startDrawingSession(t);const i=Vn(Ew,this).getActive();Gn(dw,this,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),Vn(ww,this))return void Hn(Cw,this,Rw).startDrawing(this,Vn(Ew,this),!1,t);Vn(Ew,this).setCurrentDrawingSession(this),Gn(ww,this,new AbortController);const e=Vn(Ew,this).combinedSignal(Vn(ww,this));this.div.addEventListener("blur",t=>{let{relatedTarget:e}=t;e&&!this.div.contains(e)&&(Gn(_w,this,null),this.commitOrRemove())},{signal:e}),Hn(Cw,this,Rw).startDrawing(this,Vn(Ew,this),!1,t)}pause(t){if(t){const{activeElement:t}=document;return void(this.div.contains(t)&&Gn(_w,this,t))}Vn(_w,this)&&setTimeout(()=>{var t;null===(t=Vn(_w,this))||void 0===t||t.focus(),Gn(_w,this,null)},0)}endDrawingSession(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Vn(ww,this)?(Vn(Ew,this).setCurrentDrawingSession(null),Vn(ww,this).abort(),Gn(ww,this,null),Gn(_w,this,null),Hn(Cw,this,Rw).endDrawing(t)):null}findNewParent(t,e,n){const i=Vn(Ew,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}commitOrRemove(){return!!Vn(ww,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){Vn(ww,this)&&Hn(Cw,this,Rw).onScaleChangingWhenDrawing(this)}destroy(){var t;this.commitOrRemove(),(null===(t=Vn(Ew,this).getActive())||void 0===t?void 0:t.parent)===this&&(Vn(Ew,this).commitOrRemove(),Vn(Ew,this).setActiveEditor(null)),Vn(gw,this)&&(clearTimeout(Vn(gw,this)),Gn(gw,this,null));for(const n of Vn(mw,this).values()){var e;null===(e=Vn(hw,this))||void 0===e||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,Vn(mw,this).clear(),Vn(Ew,this).removeLayer(this)}render(t){let{viewport:e}=t;this.viewport=e,_r(this.div,e);for(const n of Vn(Ew,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(t){let{viewport:e}=t;Vn(Ew,this).commitOrRemove(),Un(Cw,this,Nw).call(this);const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,_r(this.div,{rotation:i}),n!==i)for(const r of Vn(mw,this).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return Vn(Ew,this).viewParameters.realScale}}function Tw(t){return 0!==Vn(mw,t).size?Vn(mw,t).values():Vn(Ew,t).getEditors(t.pageIndex)}function Pw(t){Vn(Ew,this).unselectAll();const{target:e}=t;if(e===Vn(xw,this).div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&Vn(xw,this).div.contains(e)){const{isMac:e}=qi.platform;if(0!==t.button||t.ctrlKey&&e)return;Vn(Ew,this).showAllEditors("highlight",!0,!0),Vn(xw,this).div.classList.add("free"),this.toggleDrawing(),sy.startHighlighting(this,"ltr"===Vn(Ew,this).direction,{target:Vn(xw,this).div,x:t.x,y:t.y}),Vn(xw,this).div.addEventListener("pointerup",()=>{Vn(xw,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Vn(Ew,this)._signal}),t.preventDefault()}}function Rw(t){return Iw._.get(Vn(Ew,t).getMode())}function Dw(t){const e=Hn(Cw,this,Rw);return e?new e.prototype.constructor(t):null}function Lw(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,r=Math.max(0,t),s=Math.max(0,e),a=(r+Math.min(window.innerWidth,t+n))/2-t,o=(s+Math.min(window.innerHeight,e+i))/2-e,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function Nw(){for(const t of Vn(mw,this).values())t.isEmpty()&&t.remove()}c(Mw,"_initialized",!1);var Iw={_:new Map([Dm,wb,nw,sy,Hb].map(t=>[t._editorType,t]))},Fw=new WeakMap,Ow=new WeakMap,Bw=new WeakMap,Ww=new WeakSet;class jw{constructor(t){let{pageIndex:e}=t;jn(this,Ww),zn(this,Fw,null),zn(this,Ow,new Map),zn(this,Bw,new Map),this.pageIndex=e}setParent(t){if(Vn(Fw,this)){if(Vn(Fw,this)!==t){if(Vn(Ow,this).size>0)for(const e of Vn(Ow,this).values())e.remove(),t.append(e);Gn(Fw,this,t)}}else Gn(Fw,this,t)}static get _svgFactory(){return Fi(this,"_svgFactory",new Rf)}draw(t){var e,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(Gw._=(e=Gw._,n=e++,e),n),a=Un(Ww,this,Uw).call(this),o=jw._svgFactory.createElement("defs");a.append(o);const l=jw._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&Vn(Bw,this).set(s,l);const u=r?Un(Ww,this,Hw).call(this,o,c):null,h=jw._svgFactory.createElement("use");return a.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(a,t),Vn(Ow,this).set(s,a),{id:s,clipPathId:"url(#".concat(u,")")}}drawOutline(t,e){var n,i;const r=(Gw._=(n=Gw._,i=n++,n),i),s=Un(Ww,this,Uw).call(this),a=jw._svgFactory.createElement("defs");s.append(a);const o=jw._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e){const t=jw._svgFactory.createElement("mask");a.append(t),c="mask_p".concat(this.pageIndex,"_").concat(r),t.setAttribute("id",c),t.setAttribute("maskUnits","objectBoundingBox");const e=jw._svgFactory.createElement("rect");t.append(e),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill","white");const n=jw._svgFactory.createElement("use");t.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const u=jw._svgFactory.createElement("use");s.append(u),u.setAttribute("href","#".concat(l)),c&&u.setAttribute("mask","url(#".concat(c,")"));const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),Vn(Ow,this).set(r,s),r}finalizeDraw(t,e){Vn(Bw,this).delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:i,rootClass:r,path:s}=e,a="number"===typeof t?Vn(Ow,this).get(t):t;if(a){if(n&&Un(Ww,this,Vw).call(this,a,n),i&&zw.call(jw,a,i),r){const{classList:t}=a;for(const[e,n]of Object.entries(r))t.toggle(e,n)}if(s){const t=a.firstChild.firstChild;Un(Ww,this,Vw).call(this,t,s)}}}updateParent(t,e){if(e===this)return;const n=Vn(Ow,this).get(t);n&&(Vn(Fw,e).append(n),Vn(Ow,this).delete(t),Vn(Ow,e).set(t,n))}remove(t){Vn(Bw,this).delete(t),null!==Vn(Fw,this)&&(Vn(Ow,this).get(t).remove(),Vn(Ow,this).delete(t))}destroy(){Gn(Fw,this,null);for(const t of Vn(Ow,this).values())t.remove();Vn(Ow,this).clear(),Vn(Bw,this).clear()}}function zw(t,e){let[n,i,r,s]=e;const{style:a}=t;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*s,"%")}function Uw(){const t=In._svgFactory.create(1,1,!0);return Vn(Fw,this).append(t),t.setAttribute("aria-hidden",!0),t}function Hw(t,e){const n=In._svgFactory.createElement("clipPath");t.append(n);const i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=In._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(e)),r.classList.add("clip"),i}function Vw(t,e){for(const[n,i]of Object.entries(e))null===i?t.removeAttribute(n):t.setAttribute(n,i)}In=jw;var Gw={_:0};function qw(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=qw(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}globalThis._pdfjsTestingUtils={HighlightOutliner:Tv},globalThis.pdfjsLib={AbortException:Hi,AnnotationEditorLayer:Mw,AnnotationEditorParamsType:oi,AnnotationEditorType:ai,AnnotationEditorUIManager:ga,AnnotationLayer:km,AnnotationMode:ri,AnnotationType:gi,applyOpacity:function(t,e,n,i){const r=255*(1-(i=Math.min(Math.max(null!==i&&void 0!==i?i:1,0),1)));return[t=Math.round(t*i+r),e=Math.round(e*i+r),n=Math.round(n*i+r)]},build:"f56dc8601",ColorPicker:ff,createValidAbsoluteUrl:Ni,CSSConstants:class{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Fi(this,"commentForegroundColor",yr(n))}},DOMSVGFactory:Rf,DrawLayer:jw,FeatureTest:qi,fetchData:or,findContrastColor:function(t,e){const n=t[0]+256*t[1]+65536*t[2]+16777216*e[0]+4294967296*e[1]+1099511627776*e[2];let i=Tr.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);Sr(t,a);const o=r.subarray(6,9);Sr(e,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),Mr(a,o,s)<c){let t,e;l?(t=a[2],e=1):(t=0,e=a[2]);const n=.005;for(;e-t>n;){const n=a[2]=(t+e)/2;l===Mr(a,o,s)<c?t=n:e=n}a[2]=l?e:t}return Er(a,s),i=Yi.makeHexColor(Math.round(255*s[0]),Math.round(255*s[1]),Math.round(255*s[2])),Tr.set(n,i),i},getDocument:gp,getFilenameFromUrl:function(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof t)return e;if(ur(t))return Ri('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(t=>{try{return new URL(t)}catch(e){try{return new URL(decodeURIComponent(t))}catch(n){try{return new URL(t,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(t),"https://foo.bar")}catch(r){return null}}}}})(t);if(!n)return e;const i=t=>{try{let e=decodeURIComponent(t);return e.includes("/")?(e=e.split("/").at(-1),e.test(/^\.pdf$/i)?e:t):e}catch(e){return t}},r=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(r.test(s))return i(s);if(n.searchParams.size>0){const t=Array.from(n.searchParams.values()).reverse();for(const n of t)if(r.test(n))return i(n);const e=Array.from(n.searchParams.keys()).reverse();for(const n of e)if(r.test(n))return i(n)}if(n.hash){const t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(t)return i(t[0])}return e},getRGB:yr,getUuid:Zi,getXfaPageViewport:function(t,e){let{scale:n=1,rotation:i=0}=e;const{width:r,height:s}=t.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new lr({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:Gh,ImageKind:fi,InvalidPDFException:ji,isDataScheme:ur,isPdfFile:hr,isValidExplicitDest:Gl,MathClamp:er,noContextMenu:fr,normalizeUnicode:function(t){return $i||($i=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Ji=new Map([["\ufb05","\u017ft"]])),t.replaceAll($i,(t,e,n)=>e?e.normalize("NFKC"):Ji.get(n))},OPS:xi,OutputScale:xr,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:kp,PDFDateString:mr,PDFWorker:Np,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:ar,RenderingCancelledException:cr,renderRichText:Pr,ResponseException:zi,setLayerDimensions:_r,shadow:Fi,SignatureExtractor:kb,stopEvent:gr,SupportedImageMimeTypes:kr,TextLayer:np,TouchManager:Co,updateUrlHash:Ii,Util:Yi,VerbosityLevel:_i,version:"5.4.296",XfaLayer:rr};const Xw=function(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=qw(t))&&(i&&(i+=" "),i+=e);return i};var Yw=Object.prototype.hasOwnProperty;function Kw(t,e,n){for(n of t.keys())if(Qw(n,e))return n}function Qw(t,e){var n,i,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&Qw(t[i],e[i]););return-1===i}if(n===Set){if(t.size!==e.size)return!1;for(i of t){if((r=i)&&"object"===typeof r&&!(r=Kw(e,r)))return!1;if(!e.has(r))return!1}return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t){if((r=i[0])&&"object"===typeof r&&!(r=Kw(e,r)))return!1;if(!Qw(i[1],e.get(r)))return!1}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return-1===i}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return-1===i}if(!n||"object"===typeof t){for(n in i=0,t){if(Yw.call(t,n)&&++i&&!Yw.call(e,n))return!1;if(!(n in e)||!Qw(t[n],e[n]))return!1}return Object.keys(e).length===i}}return t!==t&&e!==e}function $w(t){let e=!1;return{promise:new Promise((n,i)=>{t.then(t=>!e&&n(t)).catch(t=>!e&&i(t))}),cancel(){e=!0}}}const Jw=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];function Zw(t,e){const n={};for(const i of Jw){const r=t[i];r&&(n[i]=e?t=>r(t,e(i)):r)}return n}var t_="Invariant failed";function e_(t,e){if(!t)throw new Error(t_)}var n_=n(440);const i_=(0,r.createContext)(null);class r_{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return e_(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){e_(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{e_(this.pdfDocument),e_(t),"string"===typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(t=>{e_(Array.isArray(t),'"'.concat(t,'" is not a valid destination array.'));const e=t[0];new Promise(t=>{e_(this.pdfDocument),e instanceof Object?this.pdfDocument.getPageIndex(e).then(e=>{t(e)}).catch(()=>{e_(!1,'"'.concat(e,'" is not a valid page reference.'))}):"number"===typeof e?t(e):e_(!1,'"'.concat(e,'" is not a valid destination reference.'))}).then(e=>{const n=e+1;e_(this.pdfViewer),e_(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:n})})})}goToPage(t){const e=t-1;e_(this.pdfViewer),e_(t>=1&&t<=this.pagesCount,'"'.concat(t,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function s_(t){let{children:e,type:n}=t;return(0,ke.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:e})}const a_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function o_(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function l_(){return(0,r.useReducer)(o_,{value:void 0,error:void 0})}const c_="undefined"!==typeof window,u_=c_&&"file:"===window.location.protocol;function h_(t){return function(t){return"undefined"!==typeof t}(t)&&null!==t}function d_(t){return function(t){return"string"===typeof t}(t)&&/^data:/.test(t)}function p_(t){e_(d_(t));const[e="",n=""]=t.split(",");return-1!==e.split(";").indexOf("base64")?atob(n):unescape(n)}function f_(){return c_&&window.devicePixelRatio||1}const g_="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function m_(){n_(!u_,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(g_))}function v_(t){(null===t||void 0===t?void 0:t.cancel)&&t.cancel()}function y_(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}const b_=["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"],w_=["url"],{Tm:__}=i,x_=(t,e)=>{switch(e){case a_.NEED_PASSWORD:t(prompt("Enter the password to open this PDF file."));break;case a_.INCORRECT_PASSWORD:t(prompt("Invalid password. Please try again."));break}};function k_(t){return"object"===typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}const A_=(0,r.forwardRef)(function(t,e){let{children:n,className:i,error:s="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:c,inputRef:u,imageResourcesPath:d,loading:p="Loading PDF\u2026",noData:f="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:v,onLoadSuccess:y,onPassword:b=x_,onSourceError:w,onSourceSuccess:_,options:x,renderMode:k,rotate:A,scale:S}=t,E=a(t,b_);const[C,M]=l_(),{value:T,error:P}=C,[R,D]=l_(),{value:L,error:N}=R,I=(0,r.useRef)(new r_),F=(0,r.useRef)([]),O=(0,r.useRef)(void 0),B=(0,r.useRef)(void 0);c&&c!==O.current&&k_(c)&&(n_(!Qw(c,O.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),O.current=c),x&&x!==B.current&&(n_(!Qw(x,B.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),B.current=x);const W=(0,r.useRef)({scrollPageIntoView:t=>{const{dest:e,pageNumber:n,pageIndex:i=n-1}=t;if(g)return void g({dest:e,pageIndex:i,pageNumber:n});const r=F.current[i];r?r.scrollIntoView():n_(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,r.useImperativeHandle)(e,()=>({linkService:I,pages:F,viewer:W}),[]),(0,r.useEffect)(function(){M({type:"RESET"})},[c,M]);const j=(0,r.useCallback)(async()=>{if(!c)return null;if("string"===typeof c){if(d_(c)){return{data:p_(c)}}return m_(),{url:c}}if(c instanceof __)return{range:c};if(c instanceof ArrayBuffer)return{data:c};if(c_&&function(t){return e_(c_),t instanceof Blob}(c)){const t=await function(t){return new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));e(i.result)},i.onerror=t=>{if(!t.target)return n(new Error("Error while reading a file."));const{error:e}=t.target;if(!e)return n(new Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case e.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(t)})}(c);return{data:t}}if(e_("object"===typeof c),e_(k_(c)),"url"in c&&"string"===typeof c.url){if(d_(c.url)){const{url:t}=c,e=a(c,w_);return h({data:p_(t)},e)}m_()}return c},[c]);(0,r.useEffect)(()=>{const t=$w(j());return t.promise.then(t=>{M({type:"RESOLVE",value:t})}).catch(t=>{M({type:"REJECT",error:t})}),()=>{v_(t)}},[j,M]),(0,r.useEffect)(()=>{"undefined"!==typeof T&&(!1!==T?_&&_():P&&(n_(!1,P.toString()),w&&w(P)))},[T]),(0,r.useEffect)(function(){D({type:"RESET"})},[D,T]),(0,r.useEffect)(function(){if(!T)return;const t=gp(x?h(h({},T),x):T);v&&(t.onProgress=v),b&&(t.onPassword=b);const e=t,n=e.promise.then(t=>{D({type:"RESOLVE",value:t})}).catch(t=>{e.destroyed||D({type:"REJECT",error:t})});return()=>{n.finally(()=>e.destroy())}},[x,D,T]),(0,r.useEffect)(()=>{"undefined"!==typeof L&&(!1!==L?L&&(y&&y(L),F.current=new Array(L.numPages),I.current.setDocument(L)):N&&(n_(!1,N.toString()),m&&m(N)))},[L]),(0,r.useEffect)(function(){I.current.setViewer(W.current),I.current.setExternalLinkRel(o),I.current.setExternalLinkTarget(l)},[o,l]);const z=(0,r.useCallback)((t,e)=>{F.current[t]=e},[]),U=(0,r.useCallback)(t=>{delete F.current[t]},[]),H=(0,r.useMemo)(()=>({imageResourcesPath:d,linkService:I.current,onItemClick:g,pdf:L,registerPage:z,renderMode:k,rotate:A,scale:S,unregisterPage:U}),[d,g,L,z,k,A,S,U]),V=(0,r.useMemo)(()=>Zw(E,()=>L),[E,L]);return(0,ke.jsx)("div",h(h({className:Xw("react-pdf__Document",i),ref:u},V),{},{children:c?void 0===L||null===L?(0,ke.jsx)(s_,{type:"loading",children:"function"===typeof p?p():p}):!1===L?(0,ke.jsx)(s_,{type:"error",children:"function"===typeof s?s():s}):function(){if(t=H,!Boolean(null===t||void 0===t?void 0:t.pdf))throw new Error("pdf is undefined");var t;const e="function"===typeof n?n(H):n;return(0,ke.jsx)(i_.Provider,{value:H,children:e})}():(0,ke.jsx)(s_,{type:"no-data",children:"function"===typeof f?f():f})}))}),S_=A_;function E_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(Boolean);return n.length<=1?n[0]||null:function(t){for(var e=0,i=n;e<i.length;e++){var r=i[e];"function"===typeof r?r(t):r&&(r.current=t)}}}function C_(){return(0,r.useContext)(i_)}const M_=(0,r.createContext)(null);function T_(){return(0,r.useContext)(M_)}function P_(){const t=C_(),e=T_();e_(e);const n=h(h({},t),e),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:d,renderForms:p,rotate:f,scale:g=1}=n;e_(d),e_(u),e_(s);const[m,v]=l_(),{value:y,error:b}=m,w=(0,r.useRef)(null);n_(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,r.useEffect)(function(){v({type:"RESET"})},[v,u]),(0,r.useEffect)(function(){if(!u)return;const t=$w(u.getAnnotations()),e=t;return t.promise.then(t=>{v({type:"RESOLVE",value:t})}).catch(t=>{v({type:"REJECT",error:t})}),()=>{v_(e)}},[v,u]),(0,r.useEffect)(()=>{void 0!==y&&(!1!==y?y&&o&&o(y):b&&(n_(!1,b.toString()),a&&a(b)))},[y]);const _=(0,r.useMemo)(()=>u.getViewport({scale:g,rotation:f}),[u,f,g]);return(0,r.useEffect)(function(){if(!d||!u||!s||!y)return;const{current:t}=w;if(!t)return;const e=_.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:t,l10n:null,linkService:s,page:u,structTreeLayer:null,viewport:e},r={annotations:y,annotationStorage:d.annotationStorage,div:t,imageResourcesPath:i,linkService:s,page:u,renderForms:p,viewport:e};t.innerHTML="";try{new km(n).render(r),c&&c()}catch(a){!function(t){n_(!1,"".concat(t)),l&&l(t)}(a)}return()=>{}},[y,i,s,u,d,p,_]),(0,ke.jsx)("div",{className:Xw("react-pdf__Page__annotations","annotationLayer"),ref:w})}const R_={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},D_=/^H(\d+)$/;function L_(t){return"children"in t}function N_(t){return!!L_(t)&&(1===t.children.length&&0 in t.children&&"id"in t.children[0])}function I_(t){const e={};if(L_(t)){const{role:n}=t,i=n.match(D_);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(function(t){return t in R_}(n)){const t=R_[n];t&&(e.role=t)}}return e}function F_(t){const e={};if(L_(t)){if(void 0!==t.alt&&(e["aria-label"]=t.alt),void 0!==t.lang&&(e.lang=t.lang),N_(t)){const[n]=t.children;if(n){const t=F_(n);return h(h({},e),t)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function O_(t){return t?h(h({},I_(t)),F_(t)):null}function B_(t){let{className:e,node:n}=t;const i=(0,r.useMemo)(()=>O_(n),[n]),s=(0,r.useMemo)(()=>L_(n)?N_(n)?null:n.children.map((t,e)=>(0,ke.jsx)(B_,{node:t},e)):null,[n]);return(0,ke.jsx)("span",h(h({className:e},i),{},{children:s}))}function W_(){const t=T_();e_(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:n}=t,[i,s]=l_(),{value:a,error:o}=i,{customTextRenderer:l,page:c}=t;return(0,r.useEffect)(function(){s({type:"RESET"})},[s,c]),(0,r.useEffect)(function(){if(l)return;if(!c)return;const t=$w(c.getStructTree()),e=t;return t.promise.then(t=>{s({type:"RESOLVE",value:t})}).catch(t=>{s({type:"REJECT",error:t})}),()=>v_(e)},[l,c,s]),(0,r.useEffect)(()=>{void 0!==a&&(!1!==a?a&&n&&n(a):o&&(n_(!1,o.toString()),e&&e(o)))},[a]),a?(0,ke.jsx)(B_,{className:"react-pdf__Page__structTree structTree",node:a}):null}const j_=ri;function z_(t){const e=T_();e_(e);const n=h(h({},e),t),{_className:i,canvasBackground:s,devicePixelRatio:a=f_(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:d,rotate:p,scale:f}=n,{canvasRef:g}=t;e_(c);const m=(0,r.useRef)(null);function v(t){(function(t){return"RenderingCancelledException"===t.name})(t)||(n_(!1,t.toString()),o&&o(t))}const y=(0,r.useMemo)(()=>c.getViewport({scale:f*a,rotation:p}),[a,c,p,f]),b=(0,r.useMemo)(()=>c.getViewport({scale:f,rotation:p}),[c,p,f]);(0,r.useEffect)(function(){if(!c)return;c.cleanup();const{current:t}=m;if(!t)return;t.width=y.width,t.height=y.height,t.style.width="".concat(Math.floor(b.width),"px"),t.style.height="".concat(Math.floor(b.height),"px"),t.style.visibility="hidden";const e={annotationMode:u?j_.ENABLE_FORMS:j_.ENABLE,canvas:t,canvasContext:t.getContext("2d",{alpha:!1}),viewport:y};s&&(e.background=s);const n=c.render(e),i=n;return n.promise.then(()=>{t.style.visibility="",c&&l&&l(y_(c,f))}).catch(v),()=>v_(i)},[s,c,u,y,b]);const w=(0,r.useCallback)(()=>{const{current:t}=m;t&&(t.width=0,t.height=0)},[]);return(0,r.useEffect)(()=>w,[w]),(0,ke.jsx)("canvas",{className:"".concat(i,"__canvas"),dir:"ltr",ref:E_(g,m),style:{display:"block",userSelect:"none"},children:d?(0,ke.jsx)(W_,{}):null})}function U_(){const t=T_();e_(t);const{customTextRenderer:e,onGetTextError:n,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:d}=t;e_(o);const[p,f]=l_(),{value:g,error:m}=p,v=(0,r.useRef)(null);n_(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,r.useEffect)(function(){f({type:"RESET"})},[o,f]),(0,r.useEffect)(function(){if(!o)return;const t=$w(o.getTextContent()),e=t;return t.promise.then(t=>{f({type:"RESOLVE",value:t})}).catch(t=>{f({type:"REJECT",error:t})}),()=>v_(e)},[o,f]),(0,r.useEffect)(()=>{void 0!==g&&(!1!==g?g&&i&&i(g):m&&(n_(!1,m.toString()),n&&n(m)))},[g]);const y=(0,r.useCallback)(()=>{a&&a()},[a]),b=(0,r.useCallback)(t=>{n_(!1,t.toString()),s&&s(t)},[s]);const w=(0,r.useMemo)(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return(0,r.useLayoutEffect)(function(){if(!o||!g)return;const{current:t}=v;if(!t)return;t.innerHTML="";const n=o.streamTextContent({includeMarkedContent:!0}),i=new np({container:t,textContentSource:n,viewport:w}),r=i;return i.render().then(()=>{const n=document.createElement("div");n.className="endOfContent",t.append(n);const i=t.querySelectorAll('[role="presentation"]');if(e){let t=0;g.items.forEach((n,r)=>{if(!function(t){return"str"in t}(n))return;const s=i[t];if(!s)return;const a=e(h({pageIndex:l,pageNumber:c,itemIndex:r},n));s.innerHTML=a,t+=n.str&&n.hasEOL?2:1})}y()}).catch(b),()=>v_(r)},[e,b,y,o,l,c,g,w]),(0,ke.jsx)("div",{className:Xw("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const t=v.current;t&&t.classList.remove("selecting")},onMouseDown:function(){const t=v.current;t&&t.classList.add("selecting")},ref:v})}const H_=["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"],V_=1;function G_(t){const e=h(h({},C_()),t),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:s,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:p,error:f="Failed to load the page.",height:g,inputRef:m,loading:v="Loading page\u2026",noData:y="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:w,onGetStructTreeError:_,onGetStructTreeSuccess:x,onGetTextError:k,onGetTextSuccess:A,onLoadError:S,onLoadSuccess:E,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:M,onRenderError:T,onRenderSuccess:P,onRenderTextLayerError:R,onRenderTextLayerSuccess:D,pageIndex:L,pageNumber:N,pdf:I,registerPage:F,renderAnnotationLayer:O=!0,renderForms:B=!1,renderMode:W="canvas",renderTextLayer:j=!0,rotate:z,scale:U=V_,unregisterPage:H,width:V}=e,G=a(e,H_),[q,X]=l_(),{value:Y,error:K}=q,Q=(0,r.useRef)(null);e_(I);const $=h_(N)?N-1:null!==L&&void 0!==L?L:null,J=null!==N&&void 0!==N?N:h_(L)?L+1:null,Z=null!==z&&void 0!==z?z:Y?Y.rotate:null,tt=(0,r.useMemo)(()=>{if(!Y)return null;let t=1;const e=null!==U&&void 0!==U?U:V_;if(V||g){const e=Y.getViewport({scale:1,rotation:Z});V?t=V/e.width:g&&(t=g/e.height)}return e*t},[g,Y,Z,U,V]);(0,r.useEffect)(function(){return()=>{h_($)&&i&&H&&H($)}},[i,I,$,H]),(0,r.useEffect)(function(){X({type:"RESET"})},[X,I,$]),(0,r.useEffect)(function(){if(!I||!J)return;const t=$w(I.getPage(J)),e=t;return t.promise.then(t=>{X({type:"RESOLVE",value:t})}).catch(t=>{X({type:"REJECT",error:t})}),()=>v_(e)},[X,I,J]),(0,r.useEffect)(()=>{void 0!==Y&&(!1!==Y?function(){if(E){if(!Y||!tt)return;E(y_(Y,tt))}if(i&&F){if(!h_($)||!Q.current)return;F($,Q.current)}}():K&&(n_(!1,K.toString()),S&&S(K)))},[Y,tt]);const et=(0,r.useMemo)(()=>h_($)&&J&&h_(Z)&&h_(tt)?{_className:n,canvasBackground:s,customTextRenderer:d,devicePixelRatio:p,onGetAnnotationsError:b,onGetAnnotationsSuccess:w,onGetStructTreeError:_,onGetStructTreeSuccess:x,onGetTextError:k,onGetTextSuccess:A,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:M,onRenderError:T,onRenderSuccess:P,onRenderTextLayerError:R,onRenderTextLayerSuccess:D,page:Y,pageIndex:$,pageNumber:J,renderForms:B,renderTextLayer:j,rotate:Z,scale:tt}:null,[n,s,d,p,b,w,_,x,k,A,C,M,T,P,R,D,Y,$,J,B,j,Z,tt]),nt=(0,r.useMemo)(()=>Zw(G,()=>Y?tt?y_(Y,tt):void 0:Y),[G,Y,tt]),it="".concat($,"@").concat(tt,"/").concat(Z);function rt(){switch(W){case"custom":return e_(u),(0,ke.jsx)(u,{},"".concat(it,"_custom"));case"none":return null;default:return(0,ke.jsx)(z_,{canvasRef:o},"".concat(it,"_canvas"))}}return(0,ke.jsx)("div",h(h({className:Xw(n,c),"data-page-number":J,ref:E_(m,Q),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":"".concat(tt),"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},nt),{},{children:J?null===I||void 0===Y||null===Y?(0,ke.jsx)(s_,{type:"loading",children:"function"===typeof v?v():v}):!1===I||!1===Y?(0,ke.jsx)(s_,{type:"error",children:"function"===typeof f?f():f}):function(){if(t=et,!Boolean(null===t||void 0===t?void 0:t.page))throw new Error("page is undefined");var t;const e="function"===typeof l?l(et):l;return(0,ke.jsxs)(M_.Provider,{value:et,children:[rt(),j?(0,ke.jsx)(U_,{},"".concat(it,"_text")):null,O?(0,ke.jsx)(P_,{},"".concat(it,"_annotations")):null,e]})}():(0,ke.jsx)(s_,{type:"no-data",children:"function"===typeof y?y():y})}))}Gh.workerSrc=new URL(n(749),n.b).toString();const q_=t=>{let{initialCode:e}=t;const[n,i]=(0,r.useState)(e||""),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[g,m]=(0,r.useState)(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"vs-dark":"vs-light");r.useEffect(()=>{const t=window.matchMedia("(prefers-color-scheme: dark)"),e=t=>{m(t.matches?"vs-dark":"vs-light")};return t.addEventListener("change",e),()=>t.removeEventListener("change",e)},[]);(0,r.useEffect)(()=>{if(!n)return;const t=setTimeout(()=>{v()},2e3);return()=>clearTimeout(t)},[n]);const v=async()=>{u(!0),d(null);try{const t=await(async t=>{try{const r={NODE_ENV:"production",PUBLIC_URL:"/Resume-Reader",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL||"http://localhost:3001";try{const e=await fetch("".concat(r,"/api/compile-latex"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latex:t})});if(e.ok){const t=e.headers.get("content-type");if(t&&t.includes("pdf"))return console.log("\u2713 LaTeX compiled successfully via local backend"),await e.blob()}if(!e.ok){const t=await e.json().catch(()=>({}));throw console.error("Backend compilation error:",t),new Error(t.message||"Compilation failed")}}catch(e){console.log("Local backend not available:",e.message);const r="https://shreyahubcredo.app.n8n.cloud/webhook-test/latex-compile";try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latex:t})});if(e.ok){const t=e.headers.get("content-type");if(t&&t.includes("pdf"))return console.log("\u2713 LaTeX compiled successfully via n8n webhook"),await e.blob()}}catch(n){console.log("n8n compilation not available, trying alternative...")}const s=new FormData,a=new Blob([t],{type:"text/plain"});s.append("file",a,"resume.tex");try{const t=await fetch("https://latexonline.cc/compile?target=resume.tex",{method:"POST",body:s});if(t.ok)return console.log("\u2713 LaTeX compiled successfully via LaTeX.Online"),await t.blob()}catch(i){console.log("External LaTeX.Online not available")}throw new Error("CORS_ERROR")}}catch(r){if(console.error("LaTeX compilation error:",r),"CORS_ERROR"===r.message||r.message.includes("fetch")||r.message.includes("CORS")||r.message.includes("Failed to fetch"))throw new Error("PREVIEW_UNAVAILABLE");throw r}})(n);f(t),s&&URL.revokeObjectURL(s);const e=URL.createObjectURL(t);a(e)}catch(t){console.error("Compilation error:",t),"PREVIEW_UNAVAILABLE"===t.message?d("PREVIEW_UNAVAILABLE"):d(t.message||"Failed to compile LaTeX. Please check your code for errors.")}finally{u(!1)}};return(0,r.useEffect)(()=>{e&&!s&&v()},[e]),(0,r.useEffect)(()=>()=>{s&&URL.revokeObjectURL(s)},[s]),(0,ke.jsxs)("div",{className:"latex-editor-container",children:[(0,ke.jsxs)("div",{className:"editor-header",children:[(0,ke.jsx)("h3",{children:"Suggested Resume (LaTeX)"}),(0,ke.jsxs)("div",{className:"editor-actions",children:[(0,ke.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(n).then(()=>{alert("LaTeX code copied to clipboard!")}).catch(t=>{console.error("Failed to copy:",t),alert("Failed to copy to clipboard")})},className:"copy-btn",children:"Copy Code"}),(0,ke.jsx)("button",{onClick:()=>{const t=new Blob([n],{type:"text/plain"}),e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="resume.tex",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(e)},className:"download-btn",children:"Download .tex"}),p&&(0,ke.jsx)("button",{onClick:()=>{if(p){const t=URL.createObjectURL(p),e=document.createElement("a");e.href=t,e.download="resume.pdf",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(t)}},className:"export-pdf-btn",children:"Export to PDF"})]})]}),(0,ke.jsxs)("div",{className:"editor-content-split",children:[(0,ke.jsx)("div",{className:"editor-wrapper",children:(0,ke.jsx)(On,{height:"400px",defaultLanguage:"latex",theme:g,value:n,onChange:t=>{i(t||"")},options:{minimap:{enabled:!1},fontSize:13,wordWrap:"on",lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}})}),(0,ke.jsxs)("div",{className:"pdf-preview-section",children:[(0,ke.jsxs)("div",{className:"pdf-preview-header",children:[(0,ke.jsx)("h4",{children:"LaTeX Preview"}),c&&(0,ke.jsx)("span",{className:"compiling-indicator",children:"Rendering..."})]}),"PREVIEW_UNAVAILABLE"===h?(0,ke.jsxs)("div",{className:"preview-unavailable",children:[(0,ke.jsx)("div",{className:"preview-unavailable-icon",children:"\ud83d\udcc4"}),(0,ke.jsx)("h3",{children:"PDF Preview Unavailable"}),(0,ke.jsx)("p",{children:"Real-time PDF preview requires a LaTeX compilation backend."}),(0,ke.jsxs)("div",{className:"preview-options",children:[(0,ke.jsx)("h4",{children:"Options to view your resume:"}),(0,ke.jsxs)("ol",{children:[(0,ke.jsxs)("li",{children:[(0,ke.jsx)("strong",{children:"Download .tex file"})," and compile locally:",(0,ke.jsxs)("ul",{children:[(0,ke.jsx)("li",{children:'Click "Download .tex" button above'}),(0,ke.jsxs)("li",{children:["Compile with: ",(0,ke.jsx)("code",{children:"pdflatex resume.tex"})]})]})]}),(0,ke.jsxs)("li",{children:[(0,ke.jsx)("strong",{children:"Use Overleaf"})," (online LaTeX editor):",(0,ke.jsxs)("ul",{children:[(0,ke.jsxs)("li",{children:["Go to ",(0,ke.jsx)("a",{href:"https://www.overleaf.com",target:"_blank",rel:"noopener noreferrer",children:"overleaf.com"})]}),(0,ke.jsx)("li",{children:"Create new project \u2192 Upload LaTeX code"}),(0,ke.jsx)("li",{children:"Compile and download PDF"})]})]}),(0,ke.jsxs)("li",{children:[(0,ke.jsx)("strong",{children:"Setup n8n LaTeX compilation"}),":",(0,ke.jsxs)("ul",{children:[(0,ke.jsx)("li",{children:"Add LaTeX compilation node to your n8n workflow"}),(0,ke.jsxs)("li",{children:["Create webhook endpoint: ",(0,ke.jsx)("code",{children:"/latex-compile"})]}),(0,ke.jsxs)("li",{children:["Accepts: ",(0,ke.jsx)("code",{children:'{"latex": "..."}'})]}),(0,ke.jsx)("li",{children:"Returns: PDF file"})]})]})]})]})]}):h?(0,ke.jsxs)("div",{className:"compile-error",children:[(0,ke.jsx)("strong",{children:"Compilation Error:"})," ",h,(0,ke.jsx)("br",{}),(0,ke.jsx)("small",{children:"Please check your LaTeX syntax and try again."})]}):s&&!c?(0,ke.jsx)("div",{className:"pdf-preview-container",children:(0,ke.jsx)(S_,{file:s,onLoadSuccess:t=>{let{numPages:e}=t;l(e)},onLoadError:t=>d("PDF load error: ".concat(t.message)),className:"pdf-document-preview",children:Array.from({length:o||0}).map((t,e)=>(0,ke.jsx)(G_,{pageNumber:e+1,width:Math.min(.4*window.innerWidth,800),className:"pdf-page-preview"},"page_".concat(e+1)))})}):s||c||h?null:(0,ke.jsx)("div",{className:"pdf-preview-placeholder",children:(0,ke.jsx)("p",{children:"Loading preview... Your resume will appear here shortly."})})]})]})]})},X_=()=>{const t=pt(),e=mt(),{analysisData:n,latexCode:i,hasLatex:s}=t.state||{};if(r.useEffect(()=>{n||e("/")},[n,e]),!n)return null;const a=(t,e)=>t&&0!==t.length?(0,ke.jsx)("ul",{className:e,children:t.map((t,e)=>(0,ke.jsx)("li",{children:t},e))}):null;return(0,ke.jsxs)("div",{className:"App analysis-page results-view",children:[(0,ke.jsxs)("header",{className:"App-header",children:[(0,ke.jsx)("h1",{children:"Resume Analysis & Suggested Resume"}),(0,ke.jsx)("div",{className:"header-actions",children:(0,ke.jsx)(me,{to:"/",className:"back-btn",children:"Back to Form"})})]}),(0,ke.jsxs)("div",{className:"results-split-layout",children:[(0,ke.jsx)("div",{className:"feedback-panel",children:(0,ke.jsxs)("main",{className:"analysis-container",children:[void 0!==n.overall_score&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"Overall Score"}),(0,ke.jsx)("div",{className:"score-display",children:(0,ke.jsx)("div",{className:"score-circle",style:{backgroundColor:n.overall_score>=80?"#10b981":n.overall_score>=60?"#f59e0b":"#ef4444"},children:n.overall_score})})]}),n.category_scores&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"Category Scores"}),(u=n.category_scores,(0,ke.jsx)("div",{className:"category-scores-grid",children:Object.entries(u).map(t=>{let[e,n]=t;const i=n>=80?"#10b981":n>=60?"#f59e0b":"#ef4444";return(0,ke.jsxs)("div",{className:"progress-item",children:[(0,ke.jsxs)("div",{className:"progress-header",children:[(0,ke.jsx)("span",{className:"category-label",children:e.replace(/_/g," ")}),(0,ke.jsx)("span",{className:"score-value",style:{color:i},children:n})]}),(0,ke.jsx)("div",{className:"progress-track",children:(0,ke.jsx)("div",{className:"progress-fill",style:{width:"".concat(n,"%"),backgroundColor:i}})})]},e)})}))]}),n.strengths&&n.strengths.length>0&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\u2713 Strengths"}),a(n.strengths,"strengths-list")]}),n.improvement_areas&&n.improvement_areas.length>0&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\u26a0 Areas for Improvement"}),a(n.improvement_areas,"improvement-list")]}),n.keyword_recommendations&&n.keyword_recommendations.length>0&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\ud83d\udd11 Keyword Recommendations"}),(c=n.keyword_recommendations,c&&0!==c.length?(0,ke.jsx)("div",{className:"keywords-grid",children:c.map((t,e)=>(0,ke.jsx)("span",{className:"keyword-pill",children:t},e))}):null)]}),n.tailored_bullets&&n.tailored_bullets.length>0&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\u2192 Tailored Bullet Points"}),a(n.tailored_bullets,"bullets-list")]}),n.ats_tips&&n.ats_tips.length>0&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\ud83d\udca1 ATS Tips"}),a(n.ats_tips,"tips-list")]}),n.gaps_and_learning_plan&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\ud83d\udcda Learning Plan"}),(l=n.gaps_and_learning_plan,l?(0,ke.jsxs)("div",{className:"learning-plan",children:[l.quick_wins_1_2_weeks&&l.quick_wins_1_2_weeks.length>0&&(0,ke.jsxs)("div",{className:"learning-section",children:[(0,ke.jsx)("h4",{children:(0,ke.jsx)("span",{className:"badge badge-quick",children:"\u26a1 Quick Wins (1-2 weeks)"})}),(0,ke.jsx)("ul",{className:"learning-list",children:l.quick_wins_1_2_weeks.map((t,e)=>(0,ke.jsx)("li",{children:t},e))})]}),l.medium_horizon_1_2_months&&l.medium_horizon_1_2_months.length>0&&(0,ke.jsxs)("div",{className:"learning-section",children:[(0,ke.jsx)("h4",{children:(0,ke.jsx)("span",{className:"badge badge-medium",children:"\ud83c\udfaf Medium Horizon (1-2 months)"})}),(0,ke.jsx)("ul",{className:"learning-list",children:l.medium_horizon_1_2_months.map((t,e)=>(0,ke.jsx)("li",{children:t},e))})]})]}):null)]}),n.company_insights&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\ud83c\udfe2 Company Insights"}),(o=n.company_insights,o?(0,ke.jsxs)("div",{className:"company-insights",children:[o.highlights&&o.highlights.length>0&&(0,ke.jsxs)("div",{className:"highlights-section",children:[(0,ke.jsx)("h4",{children:"Key Highlights"}),(0,ke.jsx)("ul",{className:"highlights-list",children:o.highlights.map((t,e)=>(0,ke.jsx)("li",{children:t},e))})]}),o.sources&&o.sources.length>0&&(0,ke.jsxs)("div",{className:"sources-section",children:[(0,ke.jsx)("h4",{children:"Sources"}),(0,ke.jsx)("div",{className:"sources-list",children:o.sources.map((t,e)=>(0,ke.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"source-link",children:t},e))})]})]}):null)]}),n.summary&&(0,ke.jsxs)("div",{className:"analysis-card",children:[(0,ke.jsx)("h2",{children:"\ud83d\udcc4 Summary"}),(0,ke.jsx)("div",{className:"summary-box",children:n.summary})]})]})}),s&&i&&(0,ke.jsx)("div",{className:"latex-panel",children:(0,ke.jsx)(q_,{initialCode:i})})]})]});var o,l,c,u};Gh.workerSrc=new URL(n(749),n.b).toString();const Y_=()=>{const t=pt(),e=mt(),n=t.state||{},[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,h]=(0,r.useState)("improved-resume.pdf");(0,r.useEffect)(()=>{if(!n||!n.arrayBuffer&&!n.pdfUrl)return void e("/");let t=null;if(n.pdfUrl&&(n.pdfUrl.startsWith("blob:")||n.pdfUrl.startsWith("http")))t=n.pdfUrl,s(t),n.fileName&&h(n.fileName);else if(n.arrayBuffer)try{const e=new Blob([n.arrayBuffer],{type:n.mime||"application/pdf"});t=URL.createObjectURL(e),s(t),n.fileName&&h(n.fileName)}catch(i){c("Failed to load PDF from ArrayBuffer"),console.error("PDF loading error:",i)}else if(n.pdfUrl)try{const e=atob(n.pdfUrl),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);const r=new Blob([i],{type:"application/pdf"});t=URL.createObjectURL(r),s(t)}catch(i){c("Failed to load PDF from base64"),console.error("PDF loading error:",i)}return()=>{t&&t.startsWith("blob:")&&URL.revokeObjectURL(t)}},[n,e]);return i||l?(0,ke.jsxs)("div",{className:"App pdf-page",children:[(0,ke.jsxs)("header",{className:"App-header",children:[(0,ke.jsx)("h1",{children:"Improved Resume"}),(0,ke.jsxs)("div",{className:"header-actions",children:[(0,ke.jsx)(me,{to:"/analysis",state:t.state,className:"back-btn",children:"Back to Analysis"}),(0,ke.jsx)("button",{onClick:()=>{if(i){const t=document.createElement("a");t.href=i,t.download=u,t.click()}},className:"download-btn",children:"Download PDF"})]})]}),(0,ke.jsxs)("main",{className:"pdf-container",children:[l&&(0,ke.jsx)("div",{className:"error",children:l}),i&&(0,ke.jsx)(S_,{file:i,onLoadSuccess:t=>{let{numPages:e}=t;o(e)},onLoadError:t=>c("PDF load error: ".concat(String((null===t||void 0===t?void 0:t.message)||t))),className:"pdf-document",children:Array.from({length:a||0}).map((t,e)=>(0,ke.jsx)(G_,{pageNumber:e+1,className:"pdf-page-item"},"page_".concat(e+1)))})]})]}):(0,ke.jsx)("div",{className:"App",children:(0,ke.jsx)("header",{className:"App-header",children:(0,ke.jsx)("h1",{children:"Loading PDF..."})})})};s.createRoot(document.getElementById("root")).render((0,ke.jsx)(r.StrictMode,{children:(0,ke.jsx)(fe,{children:(0,ke.jsxs)(It,{children:[(0,ke.jsx)(Lt,{path:"/",element:(0,ke.jsx)(Ae,{})}),(0,ke.jsx)(Lt,{path:"/analysis",element:(0,ke.jsx)(X_,{})}),(0,ke.jsx)(Lt,{path:"/pdf",element:(0,ke.jsx)(Y_,{})})]})})}))})();
//# sourceMappingURL=main.b26cc90e.js.map